@{
    ViewData["Title"] = "JSEA Sub-Sofware";

    Layout = "~/Views/Shared/_LayoutWeb.cshtml";
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
          rel="stylesheet">

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

    <link rel="stylesheet" href="~/assets/css/theme.min.css">

    <link rel="stylesheet" href="~/assets/css/tablefreezer.css">

    <link href="~/assets/css/theme.min.css" type="text/css" rel="stylesheet" id="style-default">
    <link href="~/assets/css/choices.min.css" type="text/css" rel="stylesheet">

    <script src="~/assets/js/config.js"></script>
}

<div class="content mt-1" style="font-size: 12px; min-height: auto !important; max-height:100vh; max-width: 100%;" id="divPage" ng-controller="ctrlAppPage">

    <div class="modal fade" id="modalMsgConfirm" tabindex="-1" aria-labelledby="modalMsgConfirmLabel" aria-hidden="true"
         style="display: none;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="text-900 mb-0" data-anchor="data-anchor" id="modalMsgConfirmLabel">
                        <span class=" me-2 text-primary"><B>|</B></span> Do you want to update and close the item?
                    </h5>

                    <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                        <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false"
                             data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 320 512" data-fa-i2svg="">
                            <path fill="currentColor"
                                  d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                            </path>
                        </svg>
                    </button>

                </div>
                <div class="modal-body">
                    <button class="btn btn-success me-1 mb-1" type="button">Yes</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-0" style="margin-left: auto !important;" ng-if="!tabUpdateFollowUp">

        <div class="col-12">
            <div class="row g-3 justify-content-between align-items-center pt-2 pb-3">
                <div class="col-6 col-md">
                    <h5 class="text-900 mb-0" data-anchor="data-anchor"> <span class=" me-2 text-primary"><B>|</B></span>  Followup Sub-Software</h5>
                </div>
                <div class="col-6 col-md">
                    <div class="d-flex align-items-center py-2  justify-content-end">
                        <span class="mx-2" ng-if="cancle_type">
                            <button class="btn btn-outline-secondary btn-sm" style="width: 100px;" ng-click="confirmCancle()">Back</button>
                        </span>
                        <span class="mx-2" ng-if="submit_type">
                            <button class="btn btn-success btn-sm" style="width: 100px;" ng-click="confirmCreate('create')">Create</button>
                        </span>
                    </div>
                </div>
            </div>
            <div class="card shadow-sm p-2 mb-3 bg-light rounded">

                <div class="card-body p-2" ng-repeat="item_m in data_general">

                    <div class="" ng-if="!searchBySeq">
                        <div class="row g-3 justify-content-between align-items-center pt-2 pb-3" ng-if="flow_role_type=='admin'">

                            <ul class="nav nav-underline border-3 border-primary border-bottom " id="myTab" role="tablist">

                                <li class="mx-2 ">
                                    <a class="btn btn-outline-primary border border-0 active" style="border-radius: 10px 10px 0px 0px !important;"
                                       id="home-tab" data-bs-toggle="tab" href="#tab-worksheet" role="tab" aria-controls="tab-worksheet"
                                       aria-selected="true" ng-click="handleLinkClick('worksheet')">Worksheet</a>
                                </li>
                                <li class="mx-2">
                                    <a class="btn btn-outline-primary border border-0 " style="border-radius: 10px 10px 0px 0px !important; "
                                       id="profile-tab" data-bs-toggle="tab" href="#tab-responder" role="tab" aria-controls="tab-responder"
                                       aria-selected="false" ng-click="handleLinkClick('responder')">Responder</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-12 col-md mx-1 pt-2 ">

                            <div class="table-responsive scrollbar tableFixHead" id="table-container" style="font-size: 10px;" tabindex="1">
                                <table class="table fs--2 mb-0 table-bordered " cellpadding="0" cellspacing="0">
                                    <thead class=" text-uppercase  text-center  bg-soft  test" style="font-size: 10px;" id="myHeader">
                                        <tr>
                                            <th class="align-middle text-center" scope="col" style="font-size: 10px;" rowspan="2"></th>
                                            <th class="align-middle" scope="col" style="font-size: 10px;" rowspan="2">Sub-Software</th>
                                            <th class="align-middle" scope="col" style="font-size: 10px;" rowspan="2">PHA Status</th>
                                            <th class="align-middle" scope="col" style="font-size: 10px;" rowspan="2">PHA No.</th>
                                            <th class="align-middle" scope="col" style="font-size: 10px;" rowspan="2" ng-if="tabChange == 'worksheet'">Task Name</th>
                                            <th class="align-middle" scope="col" style="font-size: 10px;" rowspan="2" ng-if="tabChange == 'responder'">Owner</th>
                                            <th class="align-middle text-center" scope="col" colspan="3">Items Status</th>
                                            <th class="align-middle text-center" scope="col" style="font-size: 10px;" rowspan="2" ng-if="tabChange == 'worksheet'"></th>
                                        </tr>
                                        <tr>
                                            <th class="align-middle text-center" scope="col" style="font-size: 10px;">Total</th>
                                            <th class="align-middle text-center" scope="col" style="font-size: 10px;">Open</th>
                                            <th class="align-middle text-center" scope="col" style="font-size: 10px;">Close</th>
                                        </tr>
                                    </thead>
                                    <tbody class="customer-rating-table-body">
                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static rowwork"
                                            ng-repeat="item_h in data_header | filter:{data_by:tabChange}"
                                            ng-if="item_h.action_type == 'update'">
                                            <td class="align-top" style="width:100px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-primary"><a href="" ng-click="selectDetails(item_h)">See Action Items</a></h6>
                                                </div>
                                            </td>
                                            <td class="align-top" style="width:150px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-uppercase">{{item_h.pha_sub_software}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top" style="width:150px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-uppercase">{{item_h.pha_status_name}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold">{{item_h.pha_no}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top" ng-if="tabChange == 'worksheet'">
                                                <div class="p-1 ">
                                                    <h6 class="fw-semi-bold">{{item_h.pha_request_name}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top" ng-if="tabChange == 'responder'">
                                                <div class="p-1 ">
                                                    <h6 class="fw-semi-bold">{{item_h.responder_user_displayname}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top text-center" style="width:100px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-center ">{{item_h.status_total}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top text-center" style="width:100px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-center text-danger">{{item_h.status_open}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top" style="width:100px;">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-center text-success">{{item_h.status_closed}}</h6>
                                                </div>
                                            </td>
                                            <td class="align-top" style="width:100px;" ng-if="tabChange == 'worksheet'">
                                                <div class="p-1 text-center" style="width:100px;">
                                                    <h6 class="fw-semi-bold text-primary"><a href="" ng-click="selectDoc(item_h)">See Details</a></h6>
                                                </div>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>


    <div class="row g-0" style="margin-left: auto !important;" ng-if="tabUpdateFollowUp">

        <div class="col-12">
            <div class="card shadow-sm p-2 mb-3 bg-light rounded">
                <div class="card-body p-2">
                    <div class="row gx-0 align-items-center">

                        <div class="card px-2 ">

                            <div class="row g-3 justify-content-between align-items-center pt-2 pb-3">

                                <div class="col-6 col-md">
                                    <h5 class="text-900 mb-0" data-anchor="data-anchor">
                                        <span class=" me-2 text-primary"><B>|</B></span>Details {{DetailsShow}}
                                    </h5>  
                                </div>
                                <div class="col-6 col-md">
                                    <div class="d-flex align-items-center py-2  justify-content-end">
                                        <span class="mx-2" ng-if="cancle_type">
                                            <button class="btn btn-outline-secondary btn-sm" style="width: 100px;"
                                                    ng-click="confirmFollowBackSearch()">
                                                Back
                                            </button>
                                        </span>
                                        <span class="mx-2 d-none">
                                            <button class="btn btn-outline-secondary btn-sm" style="width: 100px;"
                                                    ng-click="confirmFollowBack()">
                                                Back
                                            </button>
                                        </span> 
                                        <div ng-if="flow_status >= 13 && flow_role_type =='admin'">
                                            <span class="mx-2" ng-if="submit_type">
                                                <button class="btn btn-success btn-sm" style="width: 100px;"
                                                        ng-click="showConfirmDialogSubmit()">
                                                    Submit
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md mx-1 pt-5" ng-if="tabUpdateFollowUp">

                                <div class="table-responsive scrollbar tableFixHead ">

                                    <table class="table fs--2 mb-0 table-bordered " cellpadding="0" cellspacing="0">
                                        <thead class="text-uppercase  bg-light-secondary">
                                            <tr class="text-center">

                                                <th class="sort align-middle " colspan="1" rowspan="2">
                                                    Recommen<br />dations No
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2" scope="col">
                                                    Work Step
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2" scope="col">
                                                    Task description No
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2">
                                                    Recommendations
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2" scope="col">
                                                    Responder
                                                </th>
                                                <th class="sort align-middle" colspan="2" rowspan="1" scope="col">
                                                    Risk Assessment Matrix
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2" scope="col">
                                                    Document File
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2" scope="col">
                                                    Action Status (Items)
                                                </th>
                                                <th class="sort align-middle " colspan="2" rowspan="1" scope="col">
                                                    Estimated Date
                                                </th>

                                                <th class="sort align-middle " colspan="1" rowspan="2">
                                                    Over Due (Day)
                                                </th>
                                                <th class="sort align-middle " colspan="1" rowspan="2"></th>
                                            </tr>

                                            <tr class="text-center">
                                                <th class="sort align-middle" scope="col">Before<br />Action</th>
                                                <th class="sort align-middle" scope="col">After<br />Action</th>
                                                <th class="sort align-middle   bg-light-secondary" scope="col">
                                                    Start<br />Date
                                                </th>
                                                <th class="sort align-middle   bg-light-secondary" scope="col">
                                                    End<br />Date
                                                </th>
                                            </tr>

                                        </thead>
                                        <tbody class="list" id="customer-rating-table-body text-1100 ">

                                            <tr ng-repeat="item_d in data_details"
                                                class="hover-actions-trigger btn-reveal-trigger position-static px-0 text-center">

                                                <td class="align-top  px-1">
                                                    <div class="text-center">
                                                        <p class="" rows="3">
                                                            {{item_d.recommendations_no}}
                                                        </p>
                                                    </div>
                                                </td>
                                                <td class="align-top  px-1">
                                                    <div class="d-flex text-start">
                                                        <p class="" rows="3">
                                                            {{item_d.workstep}}
                                                        </p>
                                                    </div>
                                                </td>

                                                <td class="align-top  px-1">
                                                    <div class="align-items-center ">
                                                        <p><a> {{item_d.taskdesc_no}}</a></p>
                                                    </div>
                                                </td>
                                                <td class="align-top  px-1">
                                                    <div class="d-flex text-start">
                                                        <p class="" rows="3">
                                                            {{item_d.recommendations}}
                                                        </p>
                                                    </div>
                                                </td>
                                                <td class="align-top  px-1">
                                                    <div class="align-items-center ">
                                                        <p class="mb-0 ms-3 fw-bold" style="width: 120px;">
                                                            {{item_d.responder_user_displayname}}
                                                        </p>
                                                    </div>
                                                </td>
                                                <td class="align-top  px-1">
                                                    <div class="align-items-center ">
                                                        <button ng-style=" { 'background-color' : ((item_d.ram_after_risk == 'H') ? 'red' : ((item_d.ram_after_risk == 'M') ? 'yellow' : ((item_d.ram_after_risk == 'L') ? 'green' : '#D3D3D3')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2p-1 ps-0 text-end"
                                                                type="button" ng-click="openModalDataRAM('r',item_d,'after',item_d.id_ram)" style="width: 32px; height:30px">
                                                            <div class="text-center" style=" width: 32px;"><h6 class="me-1 text-center" style=" width: 32px;">{{item_d.ram_after_risk}}</h6></div>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="align-top  px-1">
                                                    <div class="align-items-center ">
                                                        <button ng-style=" { 'background-color' : ((item_d.ram_action_risk == 'H') ? 'red' : ((item_d.ram_action_risk == 'M') ? 'yellow' : ((item_d.ram_action_risk == 'L') ? 'green' : '#D3D3D3')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2p-1 ps-0 text-end"
                                                                type="button" ng-click="openModalDataRAM('r',item_d,'action',item_d.id_ram)" style="width: 32px; height:30px">
                                                            <div class="text-center" style=" width: 32px;"><h6 class="me-1 text-center" style=" width: 32px;">{{item_d.ram_action_risk}}</h6></div>
                                                        </button>
                                                    </div>
                                                </td>
                                                <td class="align-top px-1" style="min-width:200px;">

                                                    <span class="mr-3 d-none"
                                                          id="filename{{item_d.seq}}" ng-click="">
                                                        {{(item_d.document_file_size>0? item_d.document_file_name + '('+
                                                        item_d.document_file_size + 'KB)' : item_d.document_file_name )}}
                                                    </span>
                                                    <a href="{{item_d.document_file_path}}" target="_blank">
                                                        {{(item_d.document_file_size>0? item_d.document_file_name + '('+
                                                        item_d.document_file_size + 'KB)' : item_d.document_file_name )}}
                                                    </a>

                                                    <br>
                                                    <label class="dz-message-text text-primary fw-bold"
                                                           for="attfile-{{item_d.seq}}">
                                                        <i class="fa-solid fa-arrow-up-from-bracket fa-xl me-3"></i>Upload
                                                    </label>
                                                    <input type="file" id="attfile-{{item_d.seq}}"
                                                           name="file{{item_d.seq}}"
                                                           onchange="angular.element(this).scope().fileSelect(this)"
                                                           ng-click="alert(item_d.seq);" style="display:none" />

                                                    <button id="del-{{item_d.seq}}" class="btn btn-link text-danger"
                                                            ng-click="clearFileName(item_d.seq)">
                                                        <span class="fa-regular fa-trash-can fa-lg"></span>
                                                    </button>

                                                </td>

                                                <td class="align-top  px-1" style=" width: 100px;">
                                                    <div class="align-items-center ">
                                                        <select class="form-select form-select-sm p-2"
                                                                ng-model="item_d.action_status"
                                                                ng-change="actionChangedData(item_d)"
                                                                ng-if="!(flow_status >= 13 && item_d.responder_action_type == 2)  || flow_role_type =='admin' ">
                                                            <option id="Open">Open</option>
                                                            <option id="Responed">Responed</option>
                                                            <option id="Closed" ng-if="flow_status >= 14 || flow_role_type =='admin'">Closed</option>
                                                        </select>
                                                        <p ng-if="flow_status >= 13 && item_d.responder_action_type == 2">
                                                            <a>{{item_d.action_status}}</a>
                                                        </p>
                                                    </div>

                                                </td>

                                                <td class="align-top  px-0" style=" width: 80px;">
                                                    <div class="align-items-center ">
                                                        <p><b>{{item_d.estimated_start_date_text}}</b></p>
                                                    </div>
                                                </td>


                                                <td class="align-top  px-0" style=" width: 80px;">
                                                    <div class="align-items-center ">
                                                        <p><b>{{item_d.estimated_end_date_text}}</b></p>
                                                    </div>
                                                </td>


                                                <td class="align-top  px-0">
                                                    <div class="align-items-center ">
                                                        <p class="text-danger"><b>{{item_d.over_due}}</b></p>
                                                    </div>
                                                </td>
                                                <td class="align-top  px-0">
                                                    <div class="align-items-center ">
                                                        <input type="text" class="form-control" placeholder="Comment" ng-model="responder_comment">
                                                    </div>
                                                </td>

                                                <td class="align-top px-0 pt-0 ">
                                                    <div class="" ng-if="!(item_d.responder_action_type == 2) || flow_role_type =='admin'">
                                                        <button class="btn text-primary btn-sm" style="font-size:10px;"
                                                                ng-click="showConfirmDialog(item_d)">
                                                            <span class="text-900 fs-3 uil uil-save  text-primary"></span><br />Save
                                                        </button>
                                                    </div>
                                                </td>

                                            </tr>
                                        </tbody>
                                    </table>

                                </div>

                                <div>
                                    <label class="form-label ps-0" for="description_general">Comment :</label>
                                    <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                        <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                           data-bs-placement="top" title="" data-bs-html="true"></a>
                                    </label>
                                    <textarea class="form-control rounded-1" ng-class="{'disabled-link':(!tab_general_active)}"
                                              id="review_folow_comment" name="review_folow_comment"
                                              placeholder="Comment" style="height: 100px"
                                              ng-model="data_general[0].review_folow_comment"
                                              ng-change="actionChangedData(item)"></textarea>
                                </div>

                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade modal-xl shadow-sm p-3 mb-5  rounded" id="modalRAM" tabindex="-1"
         aria-labelledby="modalRAMLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-dialog-centered"
             ng-style=" { 'width' :  (selectedDataRamType !=5 && (selectedDataNodeWorksheetRamType == 's' || selectedDataNodeWorksheetRamType == 'l')  ) ?'500px' :  '100%' }">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalRAMLabel">Risk Assessment Matrix (RAM){{(selectedDataNodeWorksheetRamType =='s'?' : Security':(selectedDataNodeWorksheetRamType =='l'?' : Likelihood':''))}}</h5>

                    <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                        <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                             data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                             data-fa-i2svg="">
                            <path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                            </path>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="row">

                        <div class="col-12 mb-1">
                            <b class="pe-1 me-1"> Security : {{cal_ram_action_security}}</b>
                            <b class="pe-1 me-1"> Likelihood : {{cal_ram_action_likelihood}}</b>
                            <b class="pe-1 me-1">  Risk : </b>
                            <label class="pe-1 me-1 text-center" style="width:200px"
                                   ng-style=" { 'background-color' : ((cal_ram_action_risk == 'H') ? 'red' : ((cal_ram_action_risk == 'M') ? 'yellow' : ((cal_ram_action_risk == 'L') ? 'green' : '#D3D3D3')) ) }">{{cal_ram_action_risk}}</label>
                        </div>
                        <div class="col-6">
                            <table class="table table-sm fs--1 mb-0 col-auto ">
                                <thead class="bg-light-primary">
                                    <tr>
                                        <td rowspan="2" class="text-center"></td>
                                        <th rowspan="1" colspan="3" class="text-center" ng-if="selectedDataRamType != 5">Security</th>
                                        <th rowspan="1" colspan="6" class="text-center" ng-if="selectedDataRamType == 5">Security</th>
                                    </tr>
                                    <tr ng-if="selectedDataRamType != 5">
                                        <td class="text-center">Level</td>
                                        <td>Description</td>
                                    </tr>
                                    <tr ng-if="selectedDataRamType == 5">
                                        <td class="text-center">Level</td>
                                        <td>People</td>
                                        <td>Assets</td>
                                        <td>Enhancement</td>
                                        <td>Reputation</td>
                                        <td>Product Quality</td>
                                    </tr>
                                </thead>

                                <tbody class=" align-top text-start">
                                    <tr class="hover-actions-trigger btn-reveal-trigger position-static "
                                        ng-repeat="item_ram in master_security_level | filter:{id_ram:selectedDataID_Ram,category_type:item_ram.category_type}">
                                        <td class=" text-end" style="width: 80px;">
                                            <a class="pointer" ng-click="selectDataRAM('s',item_ram.security_level)"
                                               data-bs-dismiss="modal" aria-label="Close">Select</a>
                                        </td>
                                        <td class="text-center">{{item_ram.security_level}}</td>
                                        <td ng-if="item_ram.category_type !== 5">{{item_ram.security_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.people_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.assets_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.enhancement_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.reputation_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.product_quality_text}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-6">
                            <table class="table table-sm fs--1 mb-0 col-auto ">
                                <thead class="bg-light-primary">
                                    <tr>
                                        <td rowspan="2" class="text-center"></td>
                                        <th rowspan="1" colspan="3" ng-if="selectedDataRamType != 5">Likelihood</th>
                                        <th rowspan="1" colspan="5" ng-if="selectedDataRamType == 5">Likelihood</th>
                                    </tr>
                                    <tr ng-if="selectedDataRamType != 5">
                                        <td class="text-center">Level</td>
                                        <td>Description</td>
                                    </tr>
                                    <tr ng-if="selectedDataRamType == 5">
                                        <td class="text-center">Level</td>
                                        <td>Description</td>
                                        <td>Description(2)</td>
                                        <td>Criterion</td>
                                    </tr>
                                </thead>

                                <tbody class=" align-top text-start">
                                    <tr class="hover-actions-trigger btn-reveal-trigger position-static "
                                        ng-repeat="item_ram in master_likelihood_level | filter:{id_ram:selectedDataID_Ram,category_type:item_ram.category_type}">
                                        <td class="text-end pointer" style="width: 80px;">
                                            <a class="pointer" ng-click="selectDataRAM('l',item_ram.likelihood_level)"
                                               data-bs-dismiss="modal" aria-label="Close">Select</a>
                                        </td>
                                        <td class="text-center">{{item_ram.likelihood_level}}</td>
                                        <td ng-if="item_ram.category_type !== 5">{{item_ram.likelihood_show}}</td>

                                        <td ng-if="item_ram.category_type == 5">{{item_ram.likelihood_text}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.likelihood_desc}}</td>
                                        <td ng-if="item_ram.category_type == 5">{{item_ram.likelihood_criterion}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-12 mt-1 pt-1" style="zoom:0.7;">

                            <table class="table table-sm fs--1 mb-0" ng-if="selectedDataRamType != 5">
                                <thead class="">
                                    <tr>
                                        <th rowspan="2" colspan="1" class="text-center">ระดับความรุนแรง</th>
                                        <th rowspan="1" colspan="4" class="text-center">โอกาสในการเกิดความเสี่ยง</th>
                                    </tr>
                                    <tr>
                                        <th rowspan="1" colspan="1" class="text-center">{{master_ram_level[0].likelihood1_level}}</th>
                                        <th rowspan="1" colspan="1" class="text-center">{{master_ram_level[0].likelihood2_level}}</th>
                                        <th rowspan="1" colspan="1" class="text-center">{{master_ram_level[0].likelihood3_level}}</th>
                                        <th rowspan="1" colspan="1" class="text-center">{{master_ram_level[0].likelihood4_level}}</th>
                                    </tr>
                                </thead>
                                <tbody class=" list">
                                    <tr class="hover-actions-trigger btn-reveal-trigger position-static"
                                        ng-repeat="item_ram in master_ram_level  | filter:{id_ram:selectedDataID_Ram}">
                                        <td class="align-top text-center">{{item_ram.security_level}}</td>
                                        <td class="align-top text-center" ng-style=" { 'background-color' : ((item_ram.ram1_priority == 'H') ? 'red' : ((item_ram.ram1_priority == 'M') ? 'orange' : ((item_ram.ram1_priority == 'L') ? 'yellow' : 'green')) ) }">{{item_ram.ram1_text}}<br />{{ (item_ram.ram1_text == 'H' ? 4 : (item_ram.ram1_text == 'M' ? 3 : (item_ram.ram1_text == 'L' ? 2 : 1)))}}</td>
                                        <td class="align-top text-center" ng-style=" { 'background-color' : ((item_ram.ram2_priority == 'H') ? 'red' : ((item_ram.ram2_priority == 'M') ? 'orange' : ((item_ram.ram2_priority == 'L') ? 'yellow' : 'green')) ) }">{{item_ram.ram2_text}}<br />{{ (item_ram.ram2_text == 'H' ? 4 : (item_ram.ram2_text == 'M' ? 3 : (item_ram.ram2_text == 'L' ? 2 : 1)))}}</td>
                                        <td class="align-top text-center" ng-style=" { 'background-color' : ((item_ram.ram3_priority == 'H') ? 'red' : ((item_ram.ram3_priority == 'M') ? 'orange' : ((item_ram.ram3_priority == 'L') ? 'yellow' : 'green')) ) }">{{item_ram.ram3_text}}<br />{{ (item_ram.ram3_text == 'H' ? 4 : (item_ram.ram3_text == 'M' ? 3 : (item_ram.ram3_text == 'L' ? 2 : 1)))}}</td>
                                        <td class="align-top text-center" ng-style=" { 'background-color' : ((item_ram.ram4_priority == 'H') ? 'red' : ((item_ram.ram4_priority == 'M') ? 'orange' : ((item_ram.ram4_priority == 'L') ? 'yellow' : 'green')) ) }">{{item_ram.ram4_text}}<br />{{ (item_ram.ram4_text == 'H' ? 4 : (item_ram.ram4_text == 'M' ? 3 : (item_ram.ram4_text == 'L' ? 2 : 1)))}}</td>

                                    </tr>
                                </tbody>
                            </table>

                            <div ng-if="( selectedDataRamType == '5' )">

                                <div class="text-center cursor-pointer ">
                                    <img src="~/js/_flow/rma-img-5x5.png">
                                </div>

                            </div>

                        </div>
                    </div>

                </div>

            </div>

        </div>
    </div>

</div>

@section Scripts {

    <script src="~/assets/js/angular.min.js"></script>
    <script src="~/assets/js/lodash.min.js"></script>
    <script src="~/assets/js/phoenix.js"></script>
    <script src="~/assets/js/choices.min.js"></script>
    <script src="~/assets/js/fakedata.js"></script>

    <script src="~/js/_flow/hrafollowup.js"></script>


}
