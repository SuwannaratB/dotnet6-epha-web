@{
    ViewData["Title"] = "HAZOP Guild";

    Layout = "~/Views/Shared/_LayoutWeb.cshtml";
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>

}

<div class="content mt-1" style="font-size: 12px; min-height: auto!important;" id="divPage" ng-controller="ctrlAppPage">
    <div class="loader" id="divLoading">
        <h3>
            <i class="fa fa-circle-o-notch fa-spin fa-fw"></i>&#32;Loading&#8230;
        </h3>
    </div>


    <div class="row g-0">

        <div class="col-6">
            <div class="card shadow-sm p-2 mb-3 bg-light rounded">
                <div class="card-body p-2">

                    <div class="row">
                        <div class="col-4">
                            <b>PHA No.</b> <br>
                            <span> {{data_header[0].pha_no}} (version  {{data_header[0].pha_version}})</span>
                        </div>

                        <div class="col-4">
                            <b>Request By :</b> <br>
                            <span>{{data_header[0].request_user_displayname}}</span> 
                        </div>

                        <div class="col-4">
                            <b>Request Status :</b> <br>
                            <span> {{data_header[0].pha_status_displayname}}</span>
                        </div>

                    </div>

                    <div class="row">

                    </div>

                </div>
            </div>

        </div>

        <div class="col-6 ">

            <div class="d-flex align-items-center py-2  justify-content-end">
                <span class="mx-2" ng-if="cancle_type">
                    <button class="btn btn-outline-secondary btn-sm" style="width: 100px;">CANCEL</button>
                </span>
                <span class="mx-2" ng-if="export_type">
                    <button class="btn text-light btn-sm" style="background-color: #e90f8b;">EXPORT/IMPORT</button>
                </span>
                <span class="mx-2" ng-if="save_type">
                    <button class="btn btn-primary btn-sm" style="width: 100px;" ng-click = "confirmSave()" >SAVE</button>
                </span>
                <span class="mx-2" ng-if="submit_type">
                    <button class="btn btn-success btn-sm" ng-click="confirmSubmit()" style="width: 100px;">SUBMIT</button>
                </span>
            </div>

            <div class="float-end pe-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" id="flexSwitchCheckChecked" type="checkbox" checked="" />
                    <label class="form-check-label" for="flexSwitchCheckChecked">History tracking record</label>
                </div>
            </div>

        </div>

    </div>

    <div class="row g-0">
        <div class="col-12 ">

            <div class="card">

                <div class="card-header mb-0 pb-0 border border-bottom-0">

                    <ul class="nav nav-underline border-3 border-primary border-bottom " id="myTab" role="tablist">

                        <li ng-if="tab_general_show" class="mx-2 ">
                            <a class="btn btn-outline-primary border border-0 active" style="border-radius: 10px 10px 0px 0px !important;" id="home-tab" data-bs-toggle="tab" href="#tab-gen" role="tab" aria-controls="tab-home" aria-selected="true" ng-change="tabChange('1')" >General Information </a>
                        </li>
                        <li ng-if="tab_node_show" class="mx-2">
                            <a class="btn btn-outline-primary border border-0 " style="border-radius: 10px 10px 0px 0px !important; " id="profile-tab" data-bs-toggle="tab" href="#tab-profile" role="tab" aria-controls="tab-profile" aria-selected="false" ng-change="tabChange('2')" >Node List</a>
                        </li>
                        <li ng-if="tab_worksheet_show" class="mx-2">
                            <a class="btn btn-outline-primary border border-0 " style="border-radius: 10px 10px 0px 0px !important;" id="contact-tab" data-bs-toggle="tab" href="#tab-contact" role="tab" aria-controls="tab-contact" aria-selected="false" ng-change="tabChange('3')">HAZOP Worksheet</a>
                        </li>
                        <li ng-if="tab_managerecom_show" class="mx-2">
                            <a class="btn btn-outline-primary border border-0 " style="border-radius: 10px 10px 0px 0px !important;" id="contact-tab" data-bs-toggle="tab" href="#tab-rec" role="tab" aria-controls="tab-contact" aria-selected="false" ng-change="tabChange('4')">Manage Recommendations</a>
                        </li>

                    </ul>

                </div>


                <div class="card-body tab-content">

                    <!-- general information -->

                    <div ng-if="tab_general_show" ng-repeat="item in data_general" class="tab-pane fade show active" id="tab-gen" role="tabpanel" aria-labelledby="home-tab">

                        <div class="row  g-3 align-items-center mx-3">

                            <div class="col-md-2 ">

                                <div class="row g-0 align-items-center">

                                    <div class="col-12 p-1">
                                        <label class="form-label ps-0" for="ram_type">
                                            <b class="text-danger"> * </b> Risk Assessment
                                            Matrix
                                        </label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer " data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Risk Assessment Matrix : 4X4" data-bs-html="true"></a>
                                        </label>

                                        <div class="d-flex me-3">
                                            <div class="">  
                                                    <select class="form-control" ng-change="ActionChanged('ram')" ng-model="item.id_ram"> 
                                                        <option ng-selected="item.id_ram == item2.id" 
                                                        ng-repeat="item2 in master_ram" ng-value="item2.id">{{item2.name}}</option>
                                                    </select> 
                                            </div>
                                            <button data-bs-toggle="modal" data-bs-target="#modalRAM"
                                                    ng-click="openModalDataRAM('ram',0,'befor')"
                                                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex "
                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                    aria-expanded="false" data-bs-reference="parent">
                                                <img src="~/assets/images/rma-img.png" width="20px">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">

                                <label class="form-label ps-0" for="expense_type"><b class="text-danger"> * </b>Expense Type</label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top" title=" Expense Type : OPEX" data-bs-html="true"></a>
                                </label>

                                <select class="form-select rounded-1" id="expense_type" placeholder="Expense Type"
                                        name="expense_type" ng-model="item.expense_type">
                                    <option id="OPEX">OPEX</option>
                                    <option id="CAPEX">CAPEX</option>
                                </select>
                            </div>
                            <div class="col-md-2 ">

                                <label class="form-label ps-0" for="expense_type">
                                    <b class="text-danger"> * </b>Sub Expense
                                    Type
                                </label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top" name="sub_expanse_type" title=" Sub Expense Type : Normal" data-bs-html="true"></a>
                                </label>
                                <select class="form-select  text-uppercase rounded-1" id="sub_expense_type" name="sub_expense_type"
                                        ng-model="item.sub_expense_type">
                                    <option id="Normal">Normal</option>
                                    <option id="Study">Study</option>
                                </select>
                            </div>
                            <div class="col-md-3 ">
                                <div class="row g-0 align-items-center">

                                    <div class="col-12 p-1">
                                        <label class="form-label ps-0" for="unit">Reference MOC </label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Reference MOC : PN-13081" data-bs-html="true"></a>
                                        </label>
                                        <input type="text" name="reference_moc" ng-model="item.reference_moc" class="form-control rounded-1" placeholder="Reference MOC" autocomplete="off"
                                               value="PN-13089">
                                        <!-- ng-model="formData.reference_moc" -->
                                    </div>

                                </div>
                            </div>
                            <div class="col-md-3 " ng-if="item.expense_type=='CAPEX' && item.sub_expense_type=='Normal' ">
                                <div class="row g-0">
                                    <div class="col-12 p-1">
                                        <label class="form-label ps-0"><b class="text-danger"> * </b>TA2 Approver</label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" TA2 Approver : XXX XXXX" data-bs-html="true"></a>
                                        </label>

                                        <div class="d-flex bg-soft">

                                            <div class="align-top">
                                                <button ng-click="openModalDataEmployee('info', item.seq)" data-bs-toggle="modal"
                                                        data-bs-target="#modalEmployee" class="btn btn-link me-4 px-0">
                                                    <span class="far fa-address-book"></span>
                                                </button>
                                            </div>

                                            <div style="width: 200px; " class="align-top mt-1">
                                                <div class="d-flex align-items-center ">

                                                    <div class="avatar avatar-m col-1 m-0 p-0" style="height: 20px; width: 20px;">
                                                        <img class="rounded-circle" src="{{item.approver_user_img}}" alt="">
                                                    </div>

                                                    <p class="form-label mb-0 ms-3 text-1100 fw-bold  m-0 p-0" style="width: 150px;">
                                                        {{item.approver_user_displayname}}
                                                    </p>

                                                    <button class="btn btn-sm transition-none btn-reveal fs--2" type="button"
                                                            ng-click="removeDataEmpWorkSheet('info',item.approver_user_name,item.seq)"
                                                            ng-if="item.approver_user_name">

                                                        <a class="text-decoration-none text-danger" href="#!">
                                                            <span class="fas fa-times"></span>
                                                        </a>
                                                    </button>

                                                </div>
                                            </div>


                                        </div>


                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="mx-3 row  g-3 align-items-center">
                            <!-- area -->
                            <div class="col-md-2 p-1 ">
                                <div class="row g-0 align-items-center">
                                    <div class="col-10 p-1  ">

                                        <label class="form-label ps-0" for="area"><b class="text-danger"> * </b>Area Process Unit </label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Area Process Unit : A" data-bs-html="true"></a>
                                        </label> 
                                        
                                        <select class="form-control" ng-change="action_changed('apu')" ng-model="item.id_apu"> 
                                            <option ng-selected="item.id_apu == item2.id" 
                                            ng-repeat="item2 in master_apu" ng-value="item2.id">{{item2.name}}</option>
                                        </select> 

                                    </div>

                                    <div class="col-1 p-1">

                                        <button data-bs-toggle="modal" data-bs-target="#modalNotification"
                                                ng-click="openModalDataRAM('ram',0,'befor')"
                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex "
                                                type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                aria-expanded="false" data-bs-reference="parent">
                                            <img src="~/assets/images/Notification.png" width="20px" height="20px">
                                        </button>

                                    </div>

                                </div>
                            </div>
                            <!-- area -->
                            <div class="col-md-6 p-1">
                                <div class="row g-0 align-items-center">


                                    <div class="col-4 p-1">
                                        <label class="form-label ps-0" for="organizerSingle">
                                            <b class="text-danger"> * </b>Functional
                                            Location
                                        </label>

                                        <label class="form-label ps-0" ng-if="select_history_tracking_record"><a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip" data-bs-placement="top" title=" Functional Location : TPX-76-LICSA-002-TX" data-bs-html="true"></a></label>

                                        @* <select 
                                                class="form-select rounded-1" data-choices="data-choices"
                                                data-options='{"removeItemButton":true,"placeholder":true}'
                                                name="functional_location" ng-model="item.functional_location">
                                            <option ng-repeat="item2 in master_functional"
                                                    ng-selected="item.functional_location == item2.name"
                                                    value="{{item2.name}}">{{ item2.name }} </option>
                                        </select> *@ 
                                        <select class="form-control" 
                                        ng-if="!(item.expense_type=='CAPEX' && item.sub_expense_type=='Study')"
                                        ng-change="action_changed('functional_location')" ng-model="item.functional_location"> 
                                            <option ng-selected="item.functional_location == item2.id" 
                                            ng-repeat="item2 in master_functional" ng-value="item2.id">{{item2.name}}</option>
                                        </select>  


                                        <input type="text" ng-if="item.expense_type=='CAPEX' && item.sub_expense_type=='Study'"
                                               class="form-control rounded-1"
                                               name="functional_location" ng-model="item.functional_location">
                                    </div>


                                    <div class="col-8 p-1">
                                        <label class="form-label ps-0" for="organizerMultiple">Functional Location Audition</label>

                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top"
                                               title=" Functional Location Desc: TPX-76-LICSA-002-TX, TPX-76-LICSA-003-TX, TPX-76-LICSA-004-TX"
                                               data-bs-html="true"></a>
                                        </label>

                                        <select class="form-select align-bottom rounded-1"
                                                id="organizerMultiple" data-choices="data-choices"
                                                multiple="multiple" data-options='{"removeItemButton":true,"placeholder":true}'
                                                name="functional_location_audition"
                                                ng-model="item.functional_location_audition">
                                            <option value=""></option>
                                            <option ng-repeat="item2 in master_functional_audition"
                                                    ng-selected="item.functional_location_audition == item2.name"
                                                    value="{{item2.name}}">{{ item2.name }} </option>
                                        </select>
                                    </div>



                                </div>
                            </div>

                            <!-- Business Unit -->
                            <div class="col-md-2 p-1" ng-if="item.expense_type=='OPEX' ">

                                <label class="form-label ps-0" for="unit">Business Unit </label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top" title=" Business Unit : ADIP Unit" data-bs-html="true"></a>
                                </label>

                                <select ng-if="!(item.expense_type=='CAPEX' && item.sub_expense_type=='Study')"
                                        class="form-select rounded-1" data-choices="data-choices" data-options='{"removeItemButton":true,"placeholder":true}'
                                        id="business_unit" name="business_unit"
                                        ng-model="item.id_business_unit">
                                    <option ng-repeat="item2 in master_business_unit"
                                            ng-selected="item.id_business_unit == item2.id"
                                            value="{{item2.id}}">{{ item2.name }} </option>
                                </select>

                                <input ng-if="(item.expense_type=='CAPEX' && item.sub_expense_type=='Study')"
                                       type="text" class="form-control rounded-1" id="business_unit" name="business_unit"
                                       ng-model="item.business_unit_name">
                            </div>

                            <!-- Unit No -->
                            <div class="col-md-2 p-1" ng-if="item.expense_type=='OPEX' ">

                                <label class="form-label ps-0" for="unit">Unit No </label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top" title=" Unit No : ADIP Unit" data-bs-html="true"></a>
                                </label>
                                <select ng-if="!(item.expense_type=='CAPEX' && item.sub_expense_type=='Study')"
                                        class="form-select rounded-1" data-choices="data-choices" name="unit_no"
                                        data-options='{"removeItemButton":true,"placeholder":true}' id="unit"
                                        ng-model="item.id_unit_no">
                                    <option ng-repeat="item2 in master_unit_no"
                                            ng-selected="item.id_unit_no == item2.id"
                                            value="{{item2.id}}">{{ item2.name }} </option>

                                </select>

                                <input ng-if="(item.expense_type=='CAPEX' && item.sub_expense_type=='Study')"
                                       type="text" class="form-control rounded-1" name="unit_no"
                                       ng-model="unit_no_name">
                            </div>


                        </div>

                        <div class="mx-3 row  g-3 align-items-center">

                            <!-- Project Name -->
                            <div class="col-md-5 p-1">


                                <label class="form-label ps-0" for="unit" ng-if="item.expense_type=='CAPEX'">Project Name</label>
                                <label class="form-label ps-0" for="unit" ng-if="item.expense_type=='OPEX'">e-MOC Request Number</label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top"
                                       title=" Project Name : PXXXXXXX-0001 New close loop drain of CDU-1 Analyzer"
                                       data-bs-html="true"></a>
                                </label>
 
                                <input class="form-control rounded-1" type="text" placeholder="Project Name"
                                       name="project_name"
                                       ng-model="item.pha_request_name" ng-keyup="filterResultGeneral(item.pha_request_name, 'pha_request_name')">

                                <ul class="list-group mt-2 w-25" style="position: absolute;" ng-show="showResults">
                                            <li class="list-group-item "
                                                ng-repeat="result in filteredResults | filter:{field:'pha_request_name'}"
                                                ng-click="selectResult(result,item,'pha_request_name')">{{ result.name }}
                                            </li>
                                        </ul>


                            </div>

                            <!-- Target Date -->
                            <div class="col-md-7 p-1">

                                <div class="row g-0 align-items-center">
                                    <div class="col-md-3 p-1">

                                        <label class="form-label ps-0" for="tgs_date">Target Start Date</label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Target Start Date :  " data-bs-html="true"></a>
                                        </label>
                                        @*item.target_start_date*@
                                        <input type="date" name="ts_date" ng-model="item.target_start_date"
                                               class="form-control rounded-1 datetimepicker" id="tgs_date"
                                               placeholder="dd/mm/yyyy">

                                    </div>

                                    <div class="col-md-3 p-1">


                                        <label class="form-label ps-0" for="tge_date">Target End Date</label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Target End Date :  " data-bs-html="true"></a>
                                        </label>
                                        @*item.target_end_date*@
                                        {{formData.te_date}}
                                        <input type="date" name="te_date" ng-model="formData.te_date" class="form-control rounded-1 datetimepicker" id="tgs_date"
                                               placeholder="dd/mm/yyyy">

                                    </div>


                                    <div class="col-md-3 p-1">


                                        <label class="form-label ps-0" for="tgs_date">Actual Start Date</label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Actual Start Date :  " data-bs-html="true"></a>
                                        </label>
                                        @*item.actual_start_date*@
                                        <input type="date" name="as_date" ng-model="formData.as_date" class="form-control rounded-1 datetimepicker" id="tgs_date"
                                               placeholder="dd/mm/yyyy">



                                    </div>

                                    <div class="col-md-3 p-1">

                                        <label class="form-label ps-0" for="tge_date">Actual End Date</label>
                                        <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                            <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                               data-bs-placement="top" title=" Actual End Date :  " data-bs-html="true"></a>
                                        </label>
                                        @*item.actual_end_date*@
                                        <input type="date" name="ae_date" ng-model="formData.ae_date" class="form-control rounded-1  datetimepicker"
                                               id="tgs_date" placeholder="dd/mm/yyyy">

                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="mx-3 row  gx-0 align-items-center">

                            <div class="col-8 p-1">

                                <label class="form-label ps-0" for="description_general">Description/Remark :</label>
                                <label class="form-label ps-0" ng-if="select_history_tracking_record">
                                    <a class="form-label far fa-comment-alt text-warning cursor-pointer" data-bs-toggle="tooltip"
                                       data-bs-placement="top" title=" Description/Remark :  " data-bs-html="true"></a>
                                </label>

                                <textarea class="form-control rounded-1" id="description_general" name="remark"
                                          placeholder="Description/Remark"  style="height: 100px"
                                           ng-model="item.descriptions" ng-keyup="filterResultGeneral(item.descriptions, 'descriptions')"
                                          ></textarea> 
                                        <ul  class="list-group mt-2 w-25" style="position: absolute;" ng-show="showResults">
                                            <li class="list-group-item "
                                                ng-repeat="result in filteredResults | filter:{field:'descriptions'}"
                                                ng-click="selectResult(result,item,'descriptions')">{{ result.name }}
                                            </li>
                                        </ul>  
                            </div>

                        </div>

                        <div class="m-3 row  gx-0 align-items-center">

                            <div class="card px-2 ">
                                <div class="row g-3 justify-content-between align-items-center pt-2 pb-3">
                                    <div class="col-12 col-md">
                                        <h5 class="text-900 mb-0" data-anchor="data-anchor"> <span class=" me-2 text-primary"><B>|</B></span>  Session</h5>
                                    </div>
                                </div>

                                <div class="col-12 col-md mx-1">

                                    <div class="table-responsive scrollbar">

                                        <table class="table mb-0 table-borderless" >

                                            <thead class="  text-uppercase text-start border-bottom">
                                                <tr>

                                                    <th class="align-middle text-center" style="font-size: 10px;">No</th>
                                                    <th class="align-middle " style="font-size: 10px;">Member team</th>
                                                    <th class="align-middle " style="font-size: 10px;">Session Date Time </th>
                                                    <th class="align-middle " style="font-size: 10px;"></th>

                                                </tr>
                                            </thead>

                                            <tbody class="" id="customer-rating-table-body">

                                                <tr ng-repeat="item in data_session | orderBy:no" class="">
 
                                                    <td class="align-top text-center col-1">
                                                        <h6 class="fw-semi-bold">{{item.seq}}</h6>
                                                        <h6 class="fw-semi-bold">{{item.no}}</h6>
                                                    </td> 
                                                    <td class="align-top white-space-nowrap col-4">

                                                        <div class="row"> 
                                                        <div class="col-auto"> 
                                                            <button ng-click="openModalEmployeeCheck(item.seq)"   class="btn btn-link p-2 btn  p-2">
                                                                <span class="far fa-address-book fa-lg"></span>
                                                            </button>  

                                                   </div>

                                                        <div class="col-10 align-top d-flex ">

                                                            <div class="row g-2 ">

                                                                <div class="col-6" ng-repeat="item2 in data_memberteam | filter:{id_session:item.seq}" 
                                                                ng-if = "item2.action_type !==''">
                                                                    <div class="d-flex align-items-center "
                                                                         ng-click="ViewMemberTeamCalendar(item2.user_name)">

                                                                        <div class="avatar avatar-m col-1"> 
                                                                            <img class="rounded-circle" src="assets/img/team/avatar.webp" width="20px"  alt=""> 
                                                                        </div>

                                                                        <label class="mb-0 ms-3 text-1100 fw-bold" style="200px">{{ item2.user_displayname}}</label>

                                                                        <button class="btn btn-sm transition-none btn-reveal fs--2" type="button"
                                                                                ng-click="removeDataEmpSession(item2.id,item.seq)">
                                                                            <a class="text-decoration-none text-danger" href="#!">
                                                                                <span class="fas fa-times"></span>
                                                                            </a>
                                                                        </button>

                                                                    </div>
                                                                </div>

                                                            </div>


                                                        </div>

                                                             </div>
                                                    </td>
 
                                                    <td class="align-top  white-space-nowrap col-7">

                                                        <div class="row g-2 d-flex align-items-end">

                                                            <span class="row p-0">

                                                                <span class="col-md-4  p-1 "> 
                                                                    <label class="form-label" for="meeting_date">Meeting Date</label>

                                                                    <input type="date" class="form-control rounded-1 datetimepicker" id="meeting_date" name="meeting_date"
                                                                           ng-model="item.meeting_date" placeholder="dd/mm/yyyy">

                                                                </span>

                                                                <span class="col-md-4  p-1">

                                                                    <label class="form-label" for="timepicker1">Start Time</label>
                                                                    <input class="form-control " id="st_meet" name="st_meet"
                                                                           ng-model="item.meeting_start_time"
                                                                           type="time" placeholder="hour : minute">

                                                                </span>


                                                                <span class="col-md-4  p-1">

                                                                    <label class="form-label" for="timepicker2">End Time</label>
                                                                    <input class="form-control " id="et_meet" name="et_meet"
                                                                           ng-model="item.meeting_end_time"
                                                                           type="time" placeholder="hour : minute">
                                                                </span>


                                                            </span>
 
                                                            <div class="col-md-12   p-1" ng-if="selectMemberTeamCalendar ">
                                                                <img src="~/assets/images/1687508177333.jpg" class="img-fluid" alt="...">
                                                            </div>

                                                        </div>

                                                    </td>
                                                    <td class="align-middle " style="width: 158px;">

                                                                <div class="col-12" style="width: 158px;"> 
                                                                <div class="float-end" > 
                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #ff2828; background-color: #f1f2f4; border-color: #ff2828;"
                                                                         ng-click=removeDataSession(item.seq)>
                                                                            <span class="fa-regular fa-trash-can fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #2445fc; background-color: #f1f2f4; border-color: #2445fc;" 
                                                                        ng-click=copyDataSession(item.seq)>
                                                                            <span class="fas fa-copy fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                    <span class="mx-1 d-none">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #1336fc; background-color: #f1f2f4; border-color: #a8a8a8;" 
                                                                        ng-click=copyDataSession(item.seq)>
                                                                            <span class="fas fa-copy fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #0abe0a; background-color: #f1f2f4; border-color: #0abe0a;"
                                                                         ng-click=addDataSession(item.seq)>
                                                                            <span class="fas fa-square-plus fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                </div> 
                                                                </div> 
                                                    </td>

                                                </tr>
 

                                            </tbody>

                                        </table>

                                    </div>

                                </div>

                            </div>


                        </div>

                        <div class="m-3 row  gx-0 align-items-center">
                            <div class="card px-2">
                                <div class="row g-3 justify-content-between align-items-center pt-2 pb-3">
                                    <div class="col-12 col-md">
                                        <h5 class="text-900 mb-0" data-anchor="data-anchor"> <span class=" me-2 text-primary"><B>|</B></span>  Drawing & Reference</h5>
                                    </div>
                                </div>
                                <div class="col-12 col-md mx-1">

                                    <div class="table-responsive scrollbar">

                                        <table class="table fs--1 mb-0 table-borderless">
                                            <thead class=" text-uppercase border-bottom">
                                                <tr>
                                                    <th class="align-middle text-center" scope="col" style="font-size: 10px;">No</th>
                                                    <th class="align-middle" scope="col" style="font-size: 10px;">Document Name</th>
                                                    <th class="align-middle" scope="col" style="font-size: 10px;">Drawing No</th>
                                                    <th class="align-middle" scope="col" style="font-size: 10px;">Document File</th>
                                                    <th class="align-middle" scope="col" style="font-size: 10px;">Comment </th>
                                                    <th class="align-middle" scope="col" style="font-size: 10px;"> </th>

                                                </tr>
                                            </thead>

                                            <tbody class="list" id="customer-rating-table-body ">
                                                <tr class="hover-actions-trigger btn-reveal-trigger position-static "
                                                    ng-repeat="item in data_drawing">
                                                    <td class="align-middle text-center">
                                                        <div class="p-1 ">
                                                            <h6 class="fw-semi-bold">{{item.no}}</h6>
                                                        </div>
                                                    </td>
                                                    <td class="align-middle white-space-nowrap ">

                                                        <textarea ng-model="item.document_name" class="form-control form-control-sm  rounded-1 shadow-sm  bg-body-tertiary" placeholder="Document Name" style="height:80px"></textarea>


                                                    </td>
                                                    <td class="align-middle rating ">

                                                        <textarea ng-model="item.drawing_no" class="form-control form-control-sm  rounded-1 shadow-sm  bg-body-tertiary" placeholder="Drawing No" style="height:80px"></textarea>


                                                    </td>

                                                    <td class="align-middle review">

                                                        <div class="d-flex align-items-center d-none ">
                                                            <input type="file" ng-model="selectedFile" id="fileInput" style="display: none" />
                                                            <label for="fileInput">เลือกไฟล์</label>
                                                            <label>{{ selectedFile.name }}</label>

                                                            <label for="fileInput" class="text-primary fw-bold"><i class="fa-solid fa-arrow-up-from-bracket fa-xl me-3"></i> Upload  </label>
                                                            <input type="file" name="document[]" ng-model="formdata.file" id="fileInput"
                                                                   class="form-control form-control-sm" hidden />
                                                            <label>{{ selectedFile.name }}</label>

                                                        </div>

                                                        <div class="d-flex align-items-center  ">

                                                            <div class=" d-flex align-items-center p-0" id="dropzone" data-dropzone="data-dropzone" data-options='{"url":"valid/url","maxFiles":1,"dictDefaultMessage":"Choose or Drop a file here"}'>
                                                                <div class="fallback"><input type="file" name="file" /></div>
                                                                <div class="dz-message" data-dz-message="data-dz-message">
                                                                    <div class="dz-message-text text-primary fw-bold"><i class="fa-solid fa-arrow-up-from-bracket fa-xl me-3"></i>Upload</div>
                                                                </div>
                                                                <div class="dz-preview dz-preview-multiple m-1 d-flex flex-column">
                                                                    <div class=" ">
                                                                        <div class="border border-300 p-2 rounded-2 me-2 d-none">
                                                                            <img class="rounded-2 dz-image" src="~/assets/img/icons/file.png" alt="..." data-dz-thumbnail="data-dz-thumbnail" />
                                                                        </div>
                                                                        <div class="flex-1 d-flex flex-between-center ">

                                                                            <div class="mx-1">

                                                                                <h6 data-dz-name="data-dz-name "></h6>
                                                                                <div class="d-flex align-items-center">
                                                                                    <p class="mb-0 fs--1 text-400 lh-1" data-dz-size="data-dz-size"></p>
                                                                                    <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress=""></span></div>
                                                                                </div><span class="fs--2 text-danger" data-dz-errormessage="data-dz-errormessage"></span>

                                                                            </div>

                                                                            <div class="dropdown font-sans-serif">

                                                                                <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal dropdown-caret-none p-1 " type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                                    <span class="fas fa-ellipsis-h"></span>
                                                                                </button>
                                                                                <div class="dropdown-menu  border py-2"><a class="dropdown-item" href="#!" data-dz-remove="data-dz-remove">Remove File</a></div>

                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                        </div>

                                                        <div class=" align-items-center d-none">
                                                            <div class="dropzone dropzone-multiple p-0" id="dropzone"
                                                                 data-dropzone="data-dropzone"
                                                                 data-options='{"url":"valid/url","maxFiles":1,"maxFilesize":15,"dictDefaultMessage":"Choose or Drop a file here"}'>
                                                                <div class="fallback"><input type="file" name="file" /></div>

                                                                <div class="d-flex align-items-center ">
                                                                    <div class="dz-message p-1 m-0" style="zoom:80%; width: 30px ;"
                                                                         data-dz-message="data-dz-message">
                                                                        <div class="dz-message-text">
                                                                            <i class="fa-solid fa-arrow-up-from-bracket fa-xl me-3"></i>
                                                                        </div>
                                                                    </div>
                                                                    <div class="dz-preview dz-preview-multiple p-0 m-0 d-flex flex-column ms-1 ">
                                                                        <div class="d-flex pb-0  media px-0 p-0 m-0">
                                                                            <div class="flex-1 d-flex flex-between-center p-0 m-0 ">
                                                                                <div>
                                                                                    <h6 data-dz-name="data-dz-name"></h6>
                                                                                    <div class="d-flex align-items-center  ">
                                                                                        <p class="mb-0 fs--1 text-400 lh-1" data-dz-size="data-dz-size"></p>
                                                                                        <div class="dz-progress">
                                                                                            <span class="dz-upload"
                                                                                                  data-dz-uploadprogress=""></span>
                                                                                        </div>
                                                                                    </div><span class="fs--2 text-danger"
                                                                                                data-dz-errormessage="data-dz-errormessage"></span>
                                                                                </div>
                                                                                <div class="dropdown font-sans-serif">
                                                                                    <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal dropdown-caret-none"
                                                                                            type="button" data-bs-toggle="dropdown" aria-haspopup="true"
                                                                                            aria-expanded="false">
                                                                                        <span class="fas fa-ellipsis-h"></span>
                                                                                    </button>
                                                                                    <div class="dropdown-menu dropdown-menu-end border py-2"><a class="dropdown-item" href="#!" data-dz-remove="data-dz-remove">Remove File</a></div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>


                                                    </td>

                                                    <td class="align-middle ">
    <div class="col-12">
                                                                        <textarea ng-model="item.descriptions" class="form-control form-control-sm  rounded-1 shadow-sm  bg-body-tertiary" placeholder="Comment"
                                                                                  style="height:80px"></textarea>
                                                                 

                                                    </td>
                                                    <td class="align-middle " style="width: 158px;">

                                                                <div class="col-12" style="width: 158px;">
                                                                <div class="float-end "  >

                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #ff2828; background-color: #f1f2f4; border-color: #ff2828;"
                                                                         ng-click=removeDrawingDoc(item.seq)>
                                                                            <span class="fa-regular fa-trash-can fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #1336fc; background-color: #f1f2f4; border-color: #a8a8a8;" 
                                                                        ng-click=copyDrawingDoc(item.seq)>
                                                                            <span class="fas fa-copy fa-lg"></span>
                                                                        </button>
                                                                    </span>

                                                                    <span class="mx-1">
                                                                        <button class="btn btn-outline-secondary p-2" style="color: #0abe0a; background-color: #f1f2f4; border-color: #0abe0a;" ng-click=addDrawingDoc(item.seq)>
                                                                            <span class="fas fa-square-plus fa-lg"></span>
                                                                        </button>
                                                                    </span>


                                                                </div>
</div>
                                                    </td>


                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- general information -->
                    <!-- Node list -->
                    <div ng-if="tab_node_show" class="tab-pane fade" id="tab-profile" role="tabpanel" aria-labelledby="profile-tab">

                        <div class="mx-3 row  g-3 align-items-center">
                            <div class="col-12 col-md ">

                                <div class="table-responsive scrollbar">
                                    <table class="table fs--2 mb-0 table-borderless">
                                        <thead class=" text-uppercase text-start border-bottom">
                                            <tr>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">No</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col"><b class="text-danger"> * </b>Node</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">Design Intent</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">Design Conditions</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">Operating Conditions</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">Node Boundary</th>
                                                <th class=" align-middle" style="font-size: 10px;" scope="col">
                                                    <b class="text-danger">
                                                        *
                                                    </b>Drawing
                                                </th>
                                                <th class=" align-middle d-none" scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody class="list">
                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static"
                                                ng-repeat="item in data_node | orderBy:no">

                                                <td class="align-top text-center " style="width: 30px;">
                                                    <h6 class="fw-semi-bold"> {{item.seq}} {{item.no}}</h6>
                                                    <div class="">
                                                        <div class="align-top ">
                                                           
                                                            <div class="font-sans-serif btn-reveal-trigger position-static  col-auto">

                                                                <button class="btn btn-sm transition-none btn-reveal fs--2 p-1" type="button"
                                                                        ng-click=addDataNodeList(item.seq)>
                                                                    <span class="fas fa-plus-circle text-success"></span>
                                                                </button>

                                                                <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none
                                                              btn-reveal fs--2 p-1" type="button" data-bs-toggle="dropdown" data-boundary="window"
                                                                        aria-haspopup="true" aria-expanded="false" data-bs-reference="parent">
                                                                    <span class="fas fa-cog text-info"></span>
                                                                </button>

                                                                <div class="dropdown-menu dropdown-menu-end py-2">

                                                                    <a class="dropdown-item text-success" href="#!"
                                                                       ng-click=copyDataNodeList(item.seq)>
                                                                        <span class="fas fa-copy"></span>
                                                                        Copy
                                                                    </a>
                                                                    <div class="dropdown-divider"></div><a class="dropdown-item text-danger" href="#!"
                                                                                                           ng-click=removeDataNodeList(item.seq)>
                                                                        <span class="fas fa-times-circle"></span>
                                                                        Remove
                                                                    </a>
                                                                </div>
                                                                <button class="btn btn-sm transition-none btn-reveal fs--2 d-none" type="button"
                                                                        ng-click=removeDataNodeList(item.seq)>
                                                                    <span class="fas fa-times-circle text-danger"></span>
                                                                </button>

                                                            </div>
                                                        </div>

                                                    </div>

                                                </td>

                                                <td class="align-top">
                                                    <div class="d-flex align-items-center ">
                                                        <div>
                                                            <textarea ng-model="item.node" class="form-control form-control-sm rounded-1" rows="3"
                                                                      type="text" placeholder="Node"></textarea>
                                                        </div>
                                                    </div>


                                                    <a data-bs-toggle="modal" nd-click = "openModalGuideWords()" data-bs-target="#modalGuideWords"
                                                       class="text-decoration-none">
                                                        <span class="fas fa-edit"></span>
                                                        Select Guide Words
                                                    </a>


                                                </td>

                                                <td class="align-top ">

                                                    <div class="d-flex align-items-center ">
                                                        <div>
                                                            <textarea ng-model="item.design_intent" class="form-control form-control-sm rounded-1" rows="3"
                                                                      type="text" placeholder="Design Intent"></textarea>
                                                        </div>
                                                    </div>

                                                </td>
                                                <td class="align-top text-end status">

                                                    <div class="d-flex align-items-center ">
                                                        <div>
                                                            <textarea ng-model="item.design_conditioins" class="form-control form-control-sm rounded-1"
                                                                      rows="3" type="text" placeholder="Design Conditions"></textarea>
                                                        </div>
                                                    </div>

                                                </td>
                                                <td class="align-top text-end status">

                                                    <div class="d-flex align-items-center ">
                                                        <div>
                                                            <textarea ng-model="item.operating_conditioins" class="form-control form-control-sm rounded-1"
                                                                      rows="3" type="text" placeholder="Operating Conditions"></textarea>
                                                        </div>
                                                    </div>

                                                </td>
                                                <td class="align-top text-end ">

                                                    <div class="d-flex align-items-center ">
                                                        <div>
                                                            <textarea ng-model="item.node_boundary" class="form-control form-control-sm rounded-1" rows="3"
                                                                      type="text" placeholder="Node Boundary"></textarea>
                                                        </div>
                                                    </div>




                                                </td>
                                                <td class="align-top text-end ">

                                                    @*data_nodedrawing*@
                                                    <div ng-repeat="item2 in data_nodedrawing | filter:{seq_node:item.seq}">

                                                        <div class="d-flex align-items-center pb-1" style="width: 350px;">

                                                            <div class="font-sans-serif btn-reveal-trigger position-static me-1">
                                                                <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 p-1"
                                                                        type="button" data-bs-toggle="dropdown" data-boundary="window"
                                                                        aria-haspopup="true" aria-expanded="false" data-bs-reference="parent">
                                                                    <span class="fas fa-cog text-info"></span>
                                                                </button>
                                                                <div class="dropdown-menu dropdown-menu-end py-2">
                                                                    <a class="dropdown-item text-success" href="#!"
                                                                       ng-click=addDataNodeDrawing(x.seq,item.seq)>
                                                                        <span class="fas fa-copy"></span>
                                                                        Add
                                                                    </a>
                                                                    <div class="dropdown-divider"></div><a class="dropdown-item text-danger" href="#!"
                                                                                                           ng-click=removeDataNodeDrawing(item2.seq,item.seq)>
                                                                        <span class="fas fa-times-circle"></span> Remove
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            @*item2.id_drawing*@
                                                            <select class="form-select form-select-sm pb-2 rounded-1" ng-model="selectedItem"
                                                                    ng-change="updateDataNodeDrawing(item2.seq,item.seq,selectedItem)">
                                                                <option ng-repeat="y in data_drawing" ng-if="y.document_name !== ''"
                                                                        ng-model="y.seq" ng-selected="selectedItem == y.seq" value="{{y.seq}}">
                                                                    {{y.seq
                                                                    +':'+
                                                                    y.document_name }}
                                                                </option>
                                                            </select>

                                                            <div class="p-0 m-0 align-top">
                                                                <input class=" m-0" style="height: 14px; width: 30px; font-size: 10px;"
                                                                       placeholder="Start" />
                                                                <input class=" m-0" style="height: 14px; width: 30px; font-size: 10px;"
                                                                       placeholder="Start"
                                                                       ng-model="item2.page_start_second" />
                                                            </div>

                                                            <div class="p-0 m-0 align-top">
                                                                <input class=" m-0" style="height: 14px; width: 30px; font-size: 10px;"
                                                                       placeholder="End"
                                                                       ng-model="item2.page_end_first" />
                                                                <input class=" m-0" style="height: 14px; width: 30px; font-size: 10px;"
                                                                       placeholder="End"
                                                                       ng-model="item2.page_end_second" />
                                                            </div>

                                                            <div class="font-sans-serif btn-reveal-trigger position-static mx-1">
                                                                <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 p-1 " data-bs-toggle="modal" data-bs-target="#scrollingLong2"
                                                                        type="button">
                                                                    <span class="fas fa-folder-open text-info"></span>
                                                                </button>
                                                                <button ng-click="embedPdf()"><span class="fas fa-folder-open text-info"></span></button>
                                                            </div>


                                                        </div>
                                                    </div>

                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>

                        </div>



                    </div>
                    <!-- Node list -->
                    <!-- HAZOP Worksheet -->
                    <div ng-if="tab_worksheet_show" class="tab-pane fade" id="tab-contact" role="tabpanel" aria-labelledby="contact-tab">

                        <div id="fullscreenzone" style="background-color: #ffffff;">

                            <div class="mx-3 row  g-3 align-items-center ">


                                <div class=" col-md-4">
                                    <div class="col-md-12">
                                        <p class="form-label m-1">
                                            Node :

                                            <select class="form-select form-select-sm" ng-model="selectedItemNodeView"
                                                    ng-change="viewDataNodeList(selectedItemNodeView)">
                                                <option ng-repeat="item in data_node" ng-if="item.node !== ''" ng-model="item.id"
                                                        ng-selected="selectedItemNodeView == item.id" value="{{item.id}}">
                                                    {{item.node}}
                                                </option>
                                            </select>


                                        </p>

                                        <div class="d-flex ms-3">
                                            <button class="btn btn-link me-4 px-0 text-end" ng-if="selectedItemNodeView >-1">
                                                <span class="fas fa-share"></span> view record Node List
                                            </button>


                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-5 ">
                                    <div ng-repeat="item in data_node | filter:{id:selectedItemNodeView}">
                                        <div class="row">
                                            <div class=" col-auto">
                                                <p class="form-label m-1">Design Intent : {{item.design_intent}}</p>
                                                <p class="form-label m-1">Operating Conditions : {{item.operating_conditioins}}</p>
                                            </div>
                                            <div class=" col-auto">
                                                <p class="form-label m-1">Design Conditions : {{item.design_conditioins}}</p>
                                                <p class="form-label m-1">Node Boundary : {{item.node_boundary}}</p>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <p class="form-label m-1">
                                                    PFD, PID No. :
                                                    <div class="d-flex">
                                                        <div class="m-0 p-0" ng-repeat="x in data_nodedrawing | filter:{id_node:selectedItemNodeView}">
                                                            <a class="form-label m-1 text-info" href="#!" ng-repeat="y in data_drawing"
                                                               ng-if="y.id == x.id_drawing">{{y.document_no}}({{y.document_name}}),</a>
                                                        </div>
                                                    </div>
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-3">
                                    <div class="float-end align-top">
                                        <button class="btn btn-outline-primary btn-sm p-1" ng-click="toggleFullscreen()">
                                            {{ isFullscreen ? 'Exit Fullscreen' : 'Go Fullscreen' }}
                                        </button>
                                    </div>
                                </div>



                            </div>


                            <div class=" border-bottom  ">
                                <div class="table-responsive scrollbar tableFixHead">

                                    <table class="table fs--2 mb-0 table-bordered  uprightTbl d-none" cellpadding="0" cellspacing="0">
                                        <thead class=" text-uppercase  text-center  bg-soft " style="font-size: 10px;">
                                            <tr>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2">Guide Word </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">Deviations</th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">Causes</th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">Consequences</th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col"></th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="1" scope="col">
                                                    CAT
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="3" rowspan="1" scope="col">
                                                    Unmitigated Risk<br>Assessment Matrix
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="1" scope="col">
                                                    Major
                                                    <br>Accident<br>Event
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">
                                                    Existing Safeguards
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="3" rowspan="1" scope="col">
                                                    Mitigated Risk<br>Assessment Matrix
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">
                                                    Recommendations
                                                </th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">Responder</th>
                                                <th class=" align-middle text-start px-0 m-0" colspan="1" rowspan="2" scope="col">Action Status</th>
                                            </tr>
                                            <tr>
                                                <th class=" align-middle px-0 m-0" style="font-size: 9px;" scope="col">(P/A/E/R/Q)</th>
                                                <th class=" align-middle px-0 m-0" scope="col">S</th>
                                                <th class=" align-middle px-0 m-0" scope="col">L</th>
                                                <th class=" align-middle px-0 m-0" scope="col">R</th>
                                                <th class=" align-middle px-0 m-0" scope="col">(Y/N)</th>
                                                <th class=" align-middle px-0 m-0" scope="col">S</th>
                                                <th class=" align-middle px-0 m-0" scope="col">L</th>
                                                <th class=" align-middle px-0 m-0" scope="col">R</th>
                                            </tr>
                                        </thead>

                                        <tbody class="">

                                            <tr class="rowwork" ng-repeat="item in data_nodeworksheet">

                                                <td class="px-0 py-1">
                                                    <p class="mb-0 mx-0 px-0 text-1100 fw-bold ">
                                                        {{ item.no + ' ' +
                                                        item.guidewords}}
                                                    </p>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <p class="mb-0 ms-1 me-0 text-1100 fw-bold">{{item.deviations}}</p>
                                                </td>

                                                <td class="p-0 ">

                                                    <div class="d-flex align-top px-0" ng-if="item.row_type =='causes'">
                                                        <div class="align-top  font-sans-serif btn-reveal-trigger position-static pt-0 mx-1">
                                                            <p class="p-0 m-0 me-1 text-end">{{item.seq_guidewords + '.' + item.seq_causes}}</p>
                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top">
                                                                <a class="dropdown-item text-success" href="#!"
                                                                   ng-click="adddata_nodeworksheet('causes',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes,
                                                                      item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger" href="#!"
                                                                                                        ng-click=addDataNodeDrawing(x.seq,item.seq)>
                                                                    <span class="fas fa-times-circle"></span> Remove
                                                                </a>
                                                            </div>
                                                            <br>
                                                            <button data-bs-toggle="modal" data-bs-target="#modalSuggestionCauses"
                                                                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1">
                                                                <span class="fas fa-lightbulb text-warning align-top"></span>
                                                            </button>
                                                        </div>

                                                        <div class="px-0 mx-1">

                                                            <textarea ng-model="item.causes_no" ng-if="selectViewTypeFollowup == 1" class="form-control form-control-sm rounded-1 p-1 m-0"
                                                                      rows="1" type="text" placeholder="Causes"></textarea>

                                                            <textarea ng-model="item.causes" ng-if="selectViewTypeFollowup == 2" class="form-control form-control-sm rounded-1 p-1 m-0"
                                                                      rows="3" type="text" placeholder="Causes"></textarea>

                                                        </div>
                                                    </div>

                                                    <div class="mx-auto " ng-if="item.row_type !='causes'">

                                                        <div class="text-center my-aoto showcase">
                                                            {{item.seq_guidewords + '.' + item.seq_causes}}
                                                        </div>

                                                    </div>


                                                </td>
                                                <td class="px-0 py-1">

                                                    <div class="d-flex align-top px-0" ng-if="item.row_type =='causes' || item.row_type =='consequences'">
                                                        <div class="align-top  font-sans-serif btn-reveal-trigger position-static pt-0">
                                                            <p class="p-0 m-0 me-1 text-end">{{item.seq_guidewords + '.' + item.seq_causes+ '.' + item.seq_consequences}}</p>

                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top ">
                                                                <a class="dropdown-item text-success" href="#!" ng-click="adddata_nodeworksheet('consequences',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes,
                                                                  item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger"
                                                                                                        href="#!"><span class="fas fa-times-circle"></span> Remove</a>
                                                            </div>
                                                        </div>
                                                        <div class="px-0">
                                                            <textarea ng-model="item.consequences_no" ng-if="selectViewTypeFollowup2 == 1" class="form-control form-control-sm p-1 rounded-1"
                                                                      style="width: 175px;" rows="1" type="text"
                                                                      placeholder="Consequences"></textarea>
                                                            <textarea ng-model="item.consequences" ng-if="selectViewTypeFollowup2 == 3" class="form-control form-control-sm p-1 rounded-1"
                                                                      style="width: 175px;" rows="3" type="text"
                                                                      placeholder="Consequences"></textarea>
                                                        </div>
                                                    </div>

                                                    <div class="mx-auto " ng-if="item.row_type !='causes' && item.row_type !='consequences' ">

                                                        <div class="text-center my-aoto showcase">
                                                            {{item.seq_guidewords + '.' + item.seq_causes+ '.' + item.seq_consequences}}
                                                        </div>

                                                    </div>


                                                </td>
                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center px-0">

                                                        <div class="align-top  font-sans-serif btn-reveal-trigger position-static pt-0">
                                                            <p class="p-0 m-0 me-1 text-end d-none">
                                                                {{item.seq_guidewords + '.' + item.seq_causes+
                                                                '.' +
                                                                item.seq_consequences+ '.' + item.seq_consequences_sub}}
                                                            </p>

                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1 mx-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top">
                                                                <a class="dropdown-item text-success" href="#!" ng-click="adddata_nodeworksheet('consequences_sub',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes,
                                                                item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger"
                                                                                                        href="#!"><span class="fas fa-times-circle"></span> Remove</a>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="align-items-center ">
                                                        @*ng-model="item.category_type"*@
                                                        <select class="form-select rounded-1 mx-1 p-1" style="width: 50px;"
                                                                ng-model="item.category_type"
                                                                ng-init="item.category_type = item.category_type || DataCategory[0].id">
                                                            <option ng-repeat="y in DataCategory" ng-if="y.name !== ''" ng-model="y.id"
                                                                    ng-selected="item.category_type == y.id" value="{{y.id}}">
                                                                {{y.name}}
                                                            </option>
                                                        </select>
                                                    </div>

                                                </td>


                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('s',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.security_befor}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('l',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.likelihood_befor}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button ng-style="{ 'background-color' : ((item.ram_befor_risk == 'H') ? 'red' : ((item.ram_befor_risk == 'M') ? 'yellow' : ((item.ram_befor_risk == 'L') ? 'green' : 'white')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning p-1"
                                                                type="button" ng-click="openModalDataRAM('r',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="">{{item.risk_befor}}</h>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <select class="form-select form-select-sm mx-1 p-1 rounded-1" style="width: 50px;">
                                                            <option value="Y" ng-selected="item.major_accident_event == 'Y'">Y</option>
                                                            <option value="N" ng-selected="item.major_accident_event == 'N'">N</option>
                                                        </select>
                                                        <!-- major_accident_event -->
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center " ng-if="item.row_type =='causes' || item.row_type =='consequences'">
                                                        <div>
                                                            <textarea class="form-control form-control-sm p-1 rounded-1" style="width: 175px;" rows="3"
                                                                      type="text" placeholder="Existing Safeguards"
                                                                      ng-model="item.existing_safeguards"></textarea>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('s',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.security_after}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('l',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.likelihood_after}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex align-items-center ">
                                                        <button ng-style="{ 'background-color' : ((item.ram_after_risk == 'H') ? 'red' : ((item.ram_after_risk == 'M') ? 'yellow' : ((item.ram_after_risk == 'L') ? 'green' : 'white')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning p-1"
                                                                type="button" ng-click="openModalDataRAM('r',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="">{{item.risk_after}}</h6>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="d-flex">
                                                        <div class="align-top  font-sans-serif btn-reveal-trigger position-static pt-0 mx-1">
                                                            <button data-bs-toggle="modal" data-bs-target="#modalSuggestionRecommendations"
                                                                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end align-top p-1">
                                                                <span class="fas fa-lightbulb text-warning align-top"></span>
                                                            </button>
                                                        </div>
                                                        <div>
                                                            <textarea class="form-control form-control-sm p-1 rounded-1" style="width: 175px;" rows="3"
                                                                      type="text" placeholder="Recommendations"
                                                                      ng-model="item.recommendations"></textarea>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-0 py-1">

                                                    <div class="d-flex align-items-center ">

                                                        <button ng-click="openModalDataEmployee('worksheet',item.seq)" data-bs-toggle="modal"
                                                                data-bs-target="#modalEmployee" class="btn btn-link px-0 mx-1">
                                                            <span class="far fa-address-book"></span>
                                                        </button>

                                                        <button class="btn btn-sm transition-none btn-reveal fs--2 p-1 " type="button"
                                                                ng-click="removeDataEmpWorkSheet('worksheet',item.responder_user_name,item.seq)"
                                                                ng-if="item.responder_id>0">
                                                            <span class="fas fa-times text-danger"></span>
                                                        </button>
                                                         
                                                        <p class="mb-0  text-1100 fw-bold" style="width: 115px;">
                                                            {{item.responder_user_displayname}}
                                                        </p>



                                                    </div>

                                                </td>

                                                <td class="px-0 py-1">
                                                    <div class="text-center p-1">

                                                        <span class="badge badge-phoenix fs--2 badge-phoenix-success">
                                                            <span class="badge-label">{{item.action_status}}</span>
                                                        </span>

                                                    </div> 
                                                </td>

                                            </tr>



                                        </tbody>

                                    </table>

                                    <table class="table fs--2 mb-0 table-bordered  " cellpadding="0" cellspacing="0">
                                        <thead class=" text-uppercase  text-center  bg-soft " style="font-size: 10px;">
                                            <tr>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" style="padding: 0 !important;">Guide Word </th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important;">Deviations</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important; width: 200px;">Causes</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important; width: 200px;">Consequences</th>

                                                <th class=" align-middle   mx-0" colspan="1" rowspan="1" scope="col" style="padding: 0 !important;">CAT </th>
                                                <th class=" align-middle   mx-0" colspan="3" rowspan="1" scope="col" style="padding: 0 !important;"> Unmitigated Risk<br>Assessment Matrix</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="1" scope="col" style="padding: 0 !important;">Major <br>Accident<br>Event </th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important; width: 175px;"> Existing Safeguards</th>
                                                <th class=" align-middle   mx-0" colspan="3" rowspan="1" scope="col" style="padding: 0 !important;"> Mitigated Risk<br>Assessment Matrix</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important; width: 200px;"> Recommendations</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important;">Responder</th>
                                                <th class=" align-middle   mx-0" colspan="1" rowspan="2" scope="col" style="padding: 0 !important;">Action Status</th>
                                            </tr>
                                            <tr>
                                                <th class=" align-middle  mx-0" scope="col" style="font-size: 9px; padding: 0 !important;">(P/A/E/R/Q)</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">S</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">L</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">R</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">(Y/N)</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">S</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">L</th>
                                                <th class=" align-middle  mx-0" scope="col" style="padding: 0 !important;">R</th>
                                            </tr>
                                        </thead>

                                        <tbody class="">


                                            <tr class="rowwork " ng-repeat="item in data_nodeworksheet">

                                                <td class=" " style="padding: 0 !important; width: 80px;">
                                                    <p class=" mx-1  text-1100 fw-bold ">{{ item.no + 'Safety & Human Factor' }}  </p>
                                                    <!-- <p class=" mx-0  text-1100 fw-bold " >{{ item.no + ' ' + item.guidewords}}  </p> -->
                                                </td>


                                                <td class=" " style="padding: 0 !important; width: 80px;">
                                                    <p class="mx-1 text-1100 fw-bold">
                                                        {{item.deviations}} Operations / Start Up /
                                                        Shutdown
                                                    </p>
                                                </td>

                                                <td class="" style="padding: 0 !important;">

                                                    <div class="d-flex align-items-center w-100" ng-if="item.row_type =='causes'">
                                                        <span class=" font-sans-serif btn-reveal-trigger position-static pt-0 ">
                                                            <p class="p-0 m-0 me-1 text-end text-1100 fw-bold">{{item.seq_guidewords + '.' + item.seq_causes}}</p>
                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top">
                                                                <a class="dropdown-item text-success" href="#!" ng-click="adddata_nodeworksheet('causes',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes,
                                                                    item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger" href="#!"
                                                                                                        ng-click=addDataNodeDrawing(x.seq,item.seq)>
                                                                    <span class="fas fa-times-circle"></span> Remove
                                                                </a>
                                                            </div>
                                                            <br>
                                                            <button data-bs-toggle="modal" data-bs-target="#modalSuggestionCauses"
                                                                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1">
                                                                <span class="fas fa-lightbulb text-warning align-top"></span>
                                                            </button>
                                                        </span>

                                                        <textarea ng-if="selectViewTypeFollowup == 1" class="form-control form-control-sm rounded-1 p-1 m-0 w-100 border border-end-0 border-top-0" rows="1" type="text" placeholder="Causes" style=" width: 200px; font-size: 10px;">1.1</textarea>

                                                        <textarea ng-if="selectViewTypeFollowup == 2" class="form-control form-control-sm rounded-0 p-1 m-0 w-100 border border-end-0 border-top-0" rows="4" type="text" placeholder="Causes" style=" width: 200px; font-size: 10px;">Causes xxx1</textarea>

                                                    </div>


                                                    <div class="mx-auto " ng-if="item.row_type !='causes'">

                                                        <div class="text-center my-aoto showcase">
                                                            {{item.seq_guidewords + '.' + item.seq_causes}}

                                                        </div>

                                                    </div>


                                                </td>

                                                <td class=" " style="padding: 0 !important;">

                                                    <div class="d-flex align-items-center w-100" ng-if="item.row_type =='causes' || item.row_type =='consequences'">
                                                        <span class=" font-sans-serif btn-reveal-trigger position-static pt-0 ">
                                                            <p class="p-0 m-0 me-1 text-end">{{item.seq_guidewords + '.' + item.seq_causes+ '.' + item.seq_consequences}}</p>

                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top ">
                                                                <a class="dropdown-item text-success" href="#!" ng-click="adddata_nodeworksheet('consequences',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes, item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger"
                                                                                                        href="#!"><span class="fas fa-times-circle"></span> Remove</a>
                                                            </div>
                                                        </span>
                                                        <textarea ng-if="selectViewTypeFollowup2 == 1" class="form-control form-control-sm p-1 rounded-1 w-100 border border-end-0 border-top-0" rows="1" type="text" style=" width: 200px;" placeholder="Consequences">1.1.1</textarea>
                                                        <textarea ng-if="selectViewTypeFollowup2 == 2" class="form-control form-control-sm p-1 rounded-1 w-100 border border-end-0 border-top-0" rows="3" type="text" style=" width: 200px;" placeholder="Consequences">Consequences xxx1</textarea>
                                                    </div>


                                                    <div class="mx-auto " ng-if="item.row_type !='causes' && item.row_type !='consequences' ">

                                                        <div class="text-center my-aoto showcase">
                                                            {{item.seq_guidewords + '.' + item.seq_causes+ '.' + item.seq_consequences}}
                                                        </div>

                                                    </div>


                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 90px;">
                                                    <div class="d-flex align-items-center px-0">

                                                        <div class="align-top  font-sans-serif btn-reveal-trigger position-static pt-0">
                                                            <p class="p-0 m-0 me-1 text-end d-none">
                                                                {{item.seq_guidewords + '.' + item.seq_causes+
                                                                '.' +
                                                                item.seq_consequences+ '.' + item.seq_consequences_sub}}
                                                            </p>

                                                            <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end p-1 mx-1"
                                                                    type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                    aria-expanded="false" data-bs-reference="parent">
                                                                <span class="fas fa-cog text-info align-top"></span>
                                                            </button>

                                                            <div class="dropdown-menu dropdown-menu-end py-2 align-top">
                                                                <a class="dropdown-item text-success" href="#!" ng-click="adddata_nodeworksheet('consequences_sub',item.seq_node,item.seq_guidewords, item.seq, item.seq_causes,
                                                                item.seq_consequences, item.seq_consequences_sub)">
                                                                    <span class="fas fa-copy"></span>
                                                                    Add
                                                                </a>
                                                                <div class="dropdown-divider "></div><a class="dropdown-item text-danger"
                                                                                                        href="#!"><span class="fas fa-times-circle"></span> Remove</a>
                                                            </div>

                                                        </div>

                                                        <select class="form-select rounded-1 mx-1 p-1" style="width: 50px;" ng-model="selectedItemNodeCategory" ng-init="selectedItemNodeCategory = selectedItemNodeCategory || DataCategory[0].id">
                                                            <option ng-repeat="y in DataCategory" ng-if="y.name !== ''" ng-model="y.id"
                                                                    ng-selected="selectedItemNodeCategory == y.id" value="{{y.id}}">
                                                                {{y.name}}
                                                            </option>
                                                        </select>

                                                    </div>



                                                </td>


                                                <td class=" " style="padding: 0 !important; width: 40px;">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('s',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.ram_befor_security}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 40px;">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('l',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.ram_befor_likelihood}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" py-0" style="padding: 0 !important; width: 40px;">
                                                    <div class="d-flex align-items-center ">
                                                        <button ng-style="{ 'background-color' : ((item.ram_befor_risk == 'H') ? 'red' : ((item.ram_befor_risk == 'M') ? 'yellow' : ((item.ram_befor_risk == 'L') ? 'green' : 'white')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning p-1"
                                                                type="button" ng-click="openModalDataRAM('r',item.seq,'befor')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="">{{item.ram_befor_risk}}</h>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 80px;">
                                                    <div class="d-flex align-items-center ">
                                                        <select class="form-select form-select-sm mx-1 p-1 rounded-1" style="width: 50px;">
                                                            <option value="Y" selected>Y</option>
                                                            <option value="N">N</option>
                                                        </select>
                                                        <!-- major_accident_event -->
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important;">
                                                    <div ng-if="item.row_type =='causes' || item.row_type =='consequences'">
                                                        <textarea class="form-control form-control-sm p-1 rounded-1 w-100" style="width: 175px;" rows="3"
                                                                  type="text" placeholder="Existing Safeguards"
                                                                  ng-model="item.existing_safeguards"></textarea>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 40px;">
                                                    <div class=" float-center">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('s',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.ram_after_security}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 40px;">
                                                    <div class="d-flex align-items-center ">
                                                        <button class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex p-1"
                                                                type="button" ng-click="openModalDataRAM('l',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="me-1">{{item.ram_after_likelihood}}</h6> <span class="fas fa-pencil-alt fa-sm"></span>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important; width: 40px;">
                                                    <div class="d-flex align-items-center ">
                                                        <button ng-style="{ 'background-color' : ((item.ram_after_risk == 'H') ? 'red' : ((item.ram_after_risk == 'M') ? 'yellow' : ((item.ram_after_risk == 'L') ? 'green' : 'white')) ) }"
                                                                class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning p-1"
                                                                type="button" ng-click="openModalDataRAM('r',item.seq,'after')" data-bs-toggle="modal"
                                                                data-bs-target="#modalRAM">
                                                            <h6 class="">{{item.ram_after_risk}}</h6>
                                                        </button>
                                                    </div>
                                                </td>

                                                <td class=" " style="padding: 0 !important;">
                                                    <div class="d-flex align-items-center w-100">
                                                        <span class=" font-sans-serif btn-reveal-trigger position-static pt-0 ">
                                                            <button data-bs-toggle="modal" data-bs-target="#modalSuggestionRecommendations"
                                                                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 text-align-end align-top p-1">
                                                                <span class="fas fa-lightbulb text-warning align-top"></span>
                                                            </button>
                                                        </span>
                                                        <textarea class="form-control form-control-sm p-1 rounded-1 w-100" style="width: 240px;" rows="3"
                                                                  type="text" placeholder="Recommendations"
                                                                  ng-model="item.recommendations"></textarea>
                                                    </div>

                                                </td>

                                                <td class=" py-0" style="padding: 0 !important; width: 120px;">

                                                    <div class="d-flex align-items-center ">

                                                        <button ng-click="openModalDataEmployee('worksheet',item.seq)" data-bs-toggle="modal"
                                                                data-bs-target="#modalEmployee" class="btn btn-link px-0 mx-1">
                                                            <span class="far fa-address-book"></span>
                                                        </button>

                                                        <button class="btn btn-sm transition-none btn-reveal fs--2 p-1 " type="button"
                                                                ng-click="removeDataEmpWorkSheet('worksheet',item.responder_id,item.seq)"
                                                                ng-if="item.responder_id>0">
                                                            <span class="fas fa-times text-danger"></span>
                                                        </button>

                                                        <p class="m-0  text-1100 fw-bold" style="width: 115px;">
                                                            {{ item.responder_display}}
                                                        </p>

                                                    </div>

                                                </td>

                                                <td class=" py-0" style="padding: 0 !important; width: 80px;">

                                                    <div class="text-center p-1">

                                                        <span class="badge badge-phoenix fs--2 badge-phoenix-success">
                                                            <span class="badge-label">Open </span>
                                                        </span>

                                                    </div>

                                                </td>

                                            </tr>



                                        </tbody>

                                    </table>

                                </div>

                                <div class="row align-items-center mb-5 ">

                                    <div class="form-floating">
                                        <p class="form-label m-1"> Note : </p>
                                            <textarea class="form-control rounded-1" id="floatingTextarea2" placeholder="Note"
                                                      style="height: 100px">The optional Guidewords, please consider to apply by principle. Details of HAZOP Study Guideline refer to QMTS-SSM-06
                                                  </textarea>

                                    </div>

                                </div>


                            </div>




                            <!--Modal Suggestion List (Causes) Start-->
                            <div class="modal fade modal-xl shadow-sm p-3 mb-5  rounded" id="modalSuggestionCauses" tabindex="-1"
                                 aria-labelledby="modalSuggestionCausesLabel" aria-hidden="true" style="display: none;">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalSuggestionCausesLabel">Suggestion List (Causes)</h5>

                                            <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                                                <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                                                     data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                                                     data-fa-i2svg="">
                                                    <path fill="currentColor"
                                                          d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="modal-body">

                                            <div class="mb-4">
                                                <div class="row g-3">
                                                    <div class="col-auto d-flex">
                                                        <p class="pe-2"><b>Deviations : </b>Less of</p>
                                                        <p><b>GuideWords : </b>Less/Low Pressure</p>
                                                    </div>
                                                </div>

                                                <div class="row g-3">
                                                    <div class="col-auto d-flex">
                                                        <div class="search-box p-1">
                                                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                                                                <input class="form-control search-input search" type="search" placeholder="Search Causes "
                                                                       aria-label="Search" />
                                                                <span class="fas fa-search search-box-icon"></span>

                                                            </form>
                                                        </div>

                                                        <div class="search-box p-1">

                                                            <div class="col-auto scrollbar overflow-hidden-y flex-grow-1">
                                                                <div class="btn-group position-static" role="group">
                                                                    <div class="btn-group position-static text-nowrap">
                                                                        <button class="btn btn-phoenix-secondary px-7 flex-shrink-0" type="button"
                                                                                data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                                aria-expanded="false" data-bs-reference="parent">
                                                                            ACTION TYPE<span class="fas fa-angle-down ms-2"></span>
                                                                        </button>
                                                                        <ul class="dropdown-menu">
                                                                            <li><a class="dropdown-item" href="#">ALL</a></li>
                                                                            <li><a class="dropdown-item" href="#">ACTIVE</a></li>
                                                                            <li><a class="dropdown-item" href="#">INACTIVE</a></li>
                                                                        </ul>
                                                                    </div>

                                                                    <button class="btn btn-phoenix-primary  ms-1  float-end bg-light-primary">
                                                                        <a class="dropdown-item text-primary" href="#!">
                                                                            <span class="fas fa-check"></span>
                                                                            Apply
                                                                        </a>
                                                                    </button>
                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <!--Modal Suggestion List (Causes) End-->
                            <!--Modal Suggestion List (Recommendations) Start-->
                            <div class="modal fade modal-xl shadow-sm p-3 mb-5  rounded" id="modalSuggestionRecommendations" tabindex="-1"
                                 aria-labelledby="modalSuggestionRecommendationsLabel" aria-hidden="true" style="display: none;">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalSuggestionRecommendationsLabel">Suggestion List (Recommendations)</h5>

                                            <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                                                <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                                                     data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                                                     data-fa-i2svg="">
                                                    <path fill="currentColor"
                                                          d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="modal-body">

                                            <div class="mb-4">
                                                <div class="row g-3">
                                                    <div class="col-auto d-flex">
                                                        <p class="pe-2"><b>Deviations : </b>Less of</p>
                                                        <p class="pe-2"><b>GuideWords : </b>Less/Low Pressure</p>
                                                        <p class="pe-2"><b>Causes : </b>Operator fails to align correct lines/valves</p>
                                                    </div>
                                                </div>

                                                <div class="row g-3">
                                                    <div class="col-auto d-flex">
                                                        <div class="search-box p-1">
                                                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                                                                <input class="form-control search-input search" type="search"
                                                                       placeholder="Search Recommendations" aria-label="Search" />
                                                                <span class="fas fa-search search-box-icon"></span>

                                                            </form>
                                                        </div>

                                                        <div class="search-box p-1">

                                                            <div class="col-auto scrollbar overflow-hidden-y flex-grow-1">
                                                                <div class="btn-group position-static" role="group">
                                                                    <div class="btn-group position-static text-nowrap">
                                                                        <button class="btn btn-phoenix-secondary px-7 flex-shrink-0" type="button"
                                                                                data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                                                aria-expanded="false" data-bs-reference="parent">
                                                                            ACTION TYPE<span class="fas fa-angle-down ms-2"></span>
                                                                        </button>
                                                                        <ul class="dropdown-menu">
                                                                            <li><a class="dropdown-item" href="#">ALL</a></li>
                                                                            <li><a class="dropdown-item" href="#">ACTIVE</a></li>
                                                                            <li><a class="dropdown-item" href="#">INACTIVE</a></li>
                                                                        </ul>
                                                                    </div>

                                                                    <button class="btn btn-phoenix-primary  ms-1  float-end bg-light-primary">
                                                                        <a class="dropdown-item text-primary" href="#!">
                                                                            <span class="fas fa-check"></span>
                                                                            Apply
                                                                        </a>
                                                                    </button>
                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="bg-white border-top border-bottom border-200 position-relative top-1">
                                                <div class="table-responsive scrollbar-overlay mx-n1 px-1">
                                                    <table class="table table-sm fs--1 mb-0">
                                                        <thead class=" text-uppercase">
                                                            <tr>
                                                                <th class="white-space-nowrap fs--1 align-middle ps-0" style="width:5%;">Active</th>
                                                                <th class=" align-middle pe-5" scope="col" data-sort="sort_causes" style="width:30%">
                                                                    Recommendations
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody class=" list" id="customers-table-body">
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" disabled
                                                                           type="checkbox" value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Position indicator on valve
                                                                </td>
                                                            </tr>
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" type="checkbox"
                                                                           value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Labeling of lines in the
                                                                    field
                                                                    fails CV closed
                                                                </td>
                                                            </tr>
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" type="checkbox"
                                                                           value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Car seals on critical valves
                                                                </td>
                                                            </tr>
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" type="checkbox"
                                                                           value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Procedures for routing of
                                                                    lines
                                                                </td>
                                                            </tr>
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" type="checkbox"
                                                                           value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Unique connectors for
                                                                    flexible lines
                                                                </td>
                                                            </tr>
                                                            <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                                <td class="fs--1 align-middle ps-0 py-3">
                                                                    <input class="form-check-input text-end bg-glay" id="flexCheckChecked" type="checkbox"
                                                                           value="" checked="">
                                                                </td>
                                                                <td class="align-middle white-space-nowrap text-1000 pe-5">
                                                                    Color coded lines, connectors
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <!--Modal Suggestion List (Recommendations) End-->
                            <!--Modal RAM Start-->
                            <div class="modal fade modal-xl shadow-sm p-3 mb-5  rounded" id="modalRAM" tabindex="-1" aria-labelledby="modalRAMLabel" aria-hidden="true"
                                 style="display: none;">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="modalRAMLabel">Risk Assessment Matrix (RAM)</h5>

                                            <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                                                <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                                                     data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                                                     data-fa-i2svg="">
                                                    <path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                                                    </path>
                                                </svg>
                                            </button>
                                        </div>
                                        <div class="modal-body">


                                            <div ng-if="selectedDataNodeWorksheetRamType == 's'">
                                                <table class="table table-sm fs--1 mb-0">
                                                    <thead class="">
                                                        <tr>
                                                            <th rowspan="2" colspan="1"></th>
                                                            <th rowspan="2" colspan="1">Security</th>
                                                            <th rowspan="1" colspan="5">Security</th>
                                                        </tr>
                                                        <tr>
                                                            <th rowspan="1" colspan="1">People</th>
                                                            <th rowspan="1" colspan="1">Assets</th>
                                                            <th rowspan="1" colspan="1">Environment</th>
                                                            <th rowspan="1" colspan="1">Reputation</th>
                                                            <th rowspan="1" colspan="1">Product Quality</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class=" list">
                                                    <tbody class=" list">
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top text-end">
                                                                <a href="!#" ng-click="selectDataRAM('s','5')"
                                                                   data-bs-dismiss="modal" aria-label="Close">Select</a>
                                                            </td>
                                                            <td class="align-top">5</td>
                                                            <td class="align-top">Multipletd</td>
                                                            <td class="align-top">Extexxx</td>
                                                            <td class="align-top">Massxxx</td>
                                                            <td class="align-top">Interxxx</td>
                                                            <td class="align-top">Massixxx</td>
                                                        </tr>

                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top text-end">
                                                                <a href="!#" ng-click="selectDataRAM('s','4')"
                                                                   data-bs-dismiss="modal" aria-label="Close">Select</a>
                                                            </td>
                                                            <td class="align-top">4</td>
                                                            <td class="align-top">Permanent</td>
                                                            <td class="align-top">Major damage</td>
                                                            <td class="align-top">Major effect extended</td>
                                                            <td class="align-top">National impact</td>
                                                            <td class="align-top">Major effect</td>
                                                        </tr>


                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top text-end">
                                                                <a href="!#" ng-click="selectDataRAM('s','3')"
                                                                   data-bs-dismiss="modal" aria-label="Close">Select</a>
                                                            </td>
                                                            <td class="align-top">3</td>
                                                            <td class="align-top">Major health</td>
                                                            <td class="align-top">Localised damage</td>
                                                            <td class="align-top">Localised effect</td>
                                                            <td class="align-top">Considerable impact</td>
                                                            <td class="align-top">Considerable effect</td>
                                                        </tr>

                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top text-end">
                                                                <a href="!#" ng-click="selectDataRAM('s','2')"
                                                                   data-bs-dismiss="modal" aria-label="Close">Select</a>
                                                            </td>
                                                            <td class="align-top">2</td>
                                                            <td class="align-top">Minor health</td>
                                                            <td class="align-top">Minor damage</td>
                                                            <td class="align-top">Minor effect</td>
                                                            <td class="align-top">Limited impact</td>
                                                            <td class="align-top">Limited effect</td>
                                                        </tr>

                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top text-end">
                                                                <a href="!#" ng-click="selectDataRAM('s','1')"
                                                                   data-bs-dismiss="modal" aria-label="Close">Select</a>
                                                            </td>
                                                            <td class="align-top">1</td>
                                                            <td class="align-top">slight hralth effect</td>
                                                            <td class="align-top">Slight damage</td>
                                                            <td class="align-top">Slight effect</td>
                                                            <td class="align-top">Slight impact</td>
                                                            <td class="align-top">Slight effect</td>
                                                        </tr>


                                                    </tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div ng-if="selectedDataNodeWorksheetRamType == 'l'">
                                                <table class="table table-sm fs--1 mb-0 d-none">
                                                    <thead class="">
                                                        <tr>
                                                            <th rowspan="4" colspan="1">Security</th>
                                                            <th rowspan="1" colspan="5">Consequences</th>
                                                            <th rowspan="1" colspan="5">Increasing Likelihood</th>

                                                        </tr>
                                                        <tr>
                                                            <th rowspan="3" colspan="1">People</th>
                                                            <th rowspan="3" colspan="1">Assets</th>
                                                            <th rowspan="3" colspan="1">Environment</th>
                                                            <th rowspan="3" colspan="1">Reputation</th>
                                                            <th rowspan="3" colspan="1">Product Quality</th>

                                                            <th rowspan="1" colspan="1">
                                                                A
                                                                <a href="!#" ng-click="selectDataRAM('L','5')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </th>
                                                            <th rowspan="1" colspan="1">B</th>
                                                            <th rowspan="1" colspan="1">C</th>
                                                            <th rowspan="1" colspan="1">D</th>
                                                            <th rowspan="1" colspan="1">E</th>
                                                        </tr>
                                                        <tr>
                                                            <th rowspan="1" colspan="1">Impossible</th>
                                                            <th rowspan="1" colspan="1">Unlikely</th>
                                                            <th rowspan="1" colspan="1">Possible</th>
                                                            <th rowspan="1" colspan="1">Likely</th>
                                                            <th rowspan="1" colspan="1">High</th>
                                                        </tr>
                                                        <tr>
                                                            <th rowspan="1" colspan="1">xxx</th>
                                                            <th rowspan="1" colspan="1">xxx</th>
                                                            <th rowspan="1" colspan="1">xxx</th>
                                                            <th rowspan="1" colspan="1">xxx</th>
                                                            <th rowspan="1" colspan="1">xxx</th>
                                                        </tr>

                                                    </thead>
                                                    <tbody class=" list">
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static bg-light-primary">
                                                            <td class="align-top">5</td>
                                                            <td class="align-top">Multipletd</td>
                                                            <td class="align-top">Extexxx</td>
                                                            <td class="align-top">Massxxx</td>
                                                            <td class="align-top">Interxxx</td>
                                                            <td class="align-top">Massixxx</td>
                                                        </tr>
                                                    </tbody>
                                                </table>

                                                <table class="table table-sm fs--1 mb-0 col-auto ">
                                                    <thead class="bg-light-primary">
                                                        <tr>
                                                            <th rowspan="1" colspan="1"></th>
                                                            <th rowspan="1" colspan="3">Increasing Likelihood</th>
                                                        </tr>

                                                    </thead>
                                                    <tbody class=" align-top text-start">
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static ">
                                                            <td class=" text-end" style="width: 100px;">
                                                                <a href="!#" ng-click="selectDataRAM('l','A')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </td>
                                                            <td>A</td>
                                                            <td>Impossible</td>
                                                            <td>xxx</td>
                                                        </tr>
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static ">
                                                            <td class=" text-end" style="width: 100px;">
                                                                <a href="!#" ng-click="selectDataRAM('l','B')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </td>
                                                            <td>B</td>
                                                            <td>Unlikely</td>
                                                            <td>xxx</td>
                                                        </tr>
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                            <td class=" text-end" style="width: 100px;">
                                                                <a href="!#" ng-click="selectDataRAM('l','C')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </td>
                                                            <td>C</td>
                                                            <td>Possible</td>
                                                            <td>xxx</td>
                                                        </tr>
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                                                            <td class=" text-end" style="width: 100px;">
                                                                <a href="!#" ng-click="selectDataRAM('l','D')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </td>
                                                            <td>D</td>
                                                            <td>Likely</td>
                                                            <td>xxx</td>
                                                        </tr>
                                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static ">
                                                            <td class=" text-end" style="width: 100px;">
                                                                <a href="!#" ng-click="selectDataRAM('l','E')" data-bs-dismiss="modal"
                                                                   aria-label="Close">Select</a>
                                                            </td>
                                                            <td>E</td>
                                                            <td>High</td>
                                                            <td>xxx</td>
                                                        </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                            <div ng-if="selectedDataNodeWorksheetRamType == 'r' || (selectedDataNodeWorksheetRamType= ='ram' && selectedDataRamType= ='5')">

                                                <div class="text-center cursor-pointer ">
                                                    <img src="~/assets/images/rma-img.png">
                                                </div>

                                            </div>
                                            <div ng-if="(selectedDataNodeWorksheetRamType == 'ram' && selectedDataRamType == '5' )">

                                                <div class="text-center cursor-pointer ">
                                                    <img src="~/assets/images/rma-img.png">
                                                </div>

                                            </div>
                                            <div ng-if="(selectedDataNodeWorksheetRamType == 'ram' && selectedDataRamType == '4' )">

                                                <div class="text-center cursor-pointer ">
                                                    <img src="~/assets/images/rma4x4-img.png">
                                                </div>

                                            </div>


                                        </div>

                                    </div>
                                </div>
                            </div>
                            <!--Modal RAM End-->



                        </div>

                        <!-- TA2 -->
                        <div class="m-3 row  gx-0 align-items-center" ng-if="selectExpense_Type=='CAPEX' && selectSubExpense_Type=='Normal'">
                            <div class="card p-2">
                                <div class="row g-3 justify-content-between align-items-center pt-2 pb-3">
                                    <div class="col-12 col-md">
                                        <h5 class="text-900 mb-0" data-anchor="data-anchor"> <span class=" me-2 text-primary"><B>|</B></span>  TA2 Review</h5>
                                    </div>
                                </div>


                                <div class="row g-3 justify-content-between align-items-center mx-1">

                                    <div class="col-md-12 p-1 ps-3">

                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" id="inlineRadio1" type="radio" name="inlineRadioOptions"
                                                   value="option1" checked ng-model="selectSendBack" />
                                            <label class="form-check-label" for="inlineRadio1"> Approve</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" id="inlineRadio2" type="radio" name="inlineRadioOptions"
                                                   value="option2" ng-model="selectSendBack" />
                                            <label class="form-check-label" for="inlineRadio2"> Send back with Comment</label>
                                        </div>

                                    </div>

                                    <div class="col-md-12 px-2" ng-if="selectSendBack == 'option2'">

                                        <label class="form-label ps-0" for="floatingTextarea2">
                                            <b class="text-danger"> * </b>Comment
                                            :
                                        </label>

                                        <textarea class="form-control rounded-1" id="floatingTextarea2" placeholder="Comment"
                                                  style="height: 100px">  </textarea>

                                    </div>
                                    <div class="col-md-12 px-2" ng-if="selectSendBack == 'option1'">

                                        <label class="form-label ps-0" for="floatingTextarea2">Comment :</label>

                                        <textarea class="form-control rounded-1" id="floatingTextarea2" placeholder="Comment"
                                                  style="height: 100px">  </textarea>

                                    </div>

                                </div>




                            </div>



                        </div>
                        <!-- TA2 -->

                    </div>
                    <!-- HAZOP Worksheet -->
                    <!-- manage recment -->
                    <div ng-if="tab_managerecom_show" class="tab-pane fade" id="tab-rec" role="tabpanel" aria-labelledby="contact-tab">


                        <div class=" border-bottom border-200 my-0" id="NodeTable">
                            <div class="table-responsive scrollbar">
                                <table class="table fs--2 mb-0">
                                    <thead class=" text-uppercase  text-center">
                                        <tr>
                                            <th class=" align-middle text-start " colspan="1" rowspan="2">Recommendations</th>
                                            <th class=" align-middle text-start" colspan="1" rowspan="2" scope="col">
                                                Place(s) Used
                                            </th>

                                            <th class=" align-middle text-start" colspan="1" rowspan="2" scope="col">
                                                Owner Action
                                            </th>

                                            <th class=" align-middle" colspan="2" rowspan="1" scope="col">
                                                <b class="text-danger"> * </b>
                                                Maximum Risk
                                            </th>
                                            <th class=" align-middle d-none" colspan="1" rowspan="2" scope="col">Document File</th>
                                            <th class=" align-middle d-none" colspan="1" rowspan="2" scope="col">Action Status</th>
                                            <th class=" align-middle " colspan="2" rowspan="1" scope="col">
                                                <b class="text-danger">
                                                    *
                                                </b>Estimated Date
                                            </th>
                                        </tr>
                                        <tr>
                                            <th class=" align-middle" scope="col">Before Action</th>
                                            <th class=" align-middle" scope="col">After Action</th>
                                            <th class=" align-middle  " scope="col">Start Date</th>
                                            <th class=" align-middle  " scope="col">End Date</th>
                                        </tr>
                                    </thead>


                                    <tbody class="list" id="customer-rating-table-body">


                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">

                                            <td class="align-top rating white-space-nowrap">

                                                <div class="ms-3">
                                                    <p>
                                                        1. Recommendations xxx1<br>2.
                                                        Recommendations xxx2<br>3. Recommendations xxx3
                                                    </p>
                                                </div>

                                            </td>

                                            <td class="align-top rating white-space-nowrap">

                                                <div class="ms-3">
                                                    <p>Cause : <a href="#!"> 1.4.1.1, 1.4.1.2</a> </p>
                                                </div>

                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <div class="avatar avatar-m">
                                                        <img class="rounded-circle"
                                                             src="../../assets/img/team/58.webp" alt="">
                                                    </div>
                                                    <p class="mb-0 ms-3 text-1100 fw-bold">(00000502)TOP XXX-Igor B.</p>
                                                    </a>
                                                </div>
                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <button style="background-color: yellow;"
                                                            class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning"
                                                            type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                            aria-expanded="false" data-bs-reference="parent">
                                                        <h5 class="pe-2 ">M </h5>
                                                    </button>
                                                </div>
                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <button style="background-color: white;"
                                                            class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning"
                                                            type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                            aria-expanded="false" data-bs-reference="parent">
                                                        <h5 class="pe-2 ">L </h5>
                                                    </button>
                                                </div>
                                            </td>


                                            <td class="align-top rating white-space-nowrap  d-none">
                                                <div class="d-flex align-items-center ">

                                                    <span class="badge badge-phoenix fs--2 badge-phoenix-success">
                                                        <span class="badge-label">Closed Item</span>
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                             width="16px" height="16px" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                             class="feather feather-check ms-1" style="height:12.8px;width:12.8px;">
                                                            <polyline points="20 6 9 17 4 12"></polyline>
                                                        </svg>
                                                    </span>

                                                </div>
                                            </td>
                                            <td class="align-top rating white-space-nowrap">

                                                <input type="date" name="date[]" class="form-control datetimepicker rounded-1"
                                                       placeholder="Start Date dd/mm/yyyy"
                                                       data-options='{"disableMobile":true,"dateFormat":"d/m/Y"}'>

                                            </td>
                                            <td class="align-top rating white-space-nowrap">


                                                <input type="date" name="date[]" class="form-control  datetimepicker rounded-1"
                                                       placeholder="End Date dd/mm/yyyy"
                                                       data-options='{"disableMobile":true,"dateFormat":"d/m/Y"}'>


                                            </td>



                                        </tr>

                                        <tr class="hover-actions-trigger btn-reveal-trigger position-static">

                                            <td class="align-top rating white-space-nowrap">

                                                <div class="ms-3">
                                                    <p>1. Recommendations xxx4</p>
                                                </div>

                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <div class="ms-3">
                                                        <p>Cause : <a href="#!"> 1.4.1.1, 1.4.1.2</a> </p>
                                                    </div>
                                                </div>
                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <div class="avatar avatar-m">
                                                        <img class="rounded-circle"
                                                             src="../../assets/img/team/58.webp" alt="">
                                                    </div>
                                                    <p class="mb-0 ms-3 text-1100 fw-bold">(00000502)TOP XXX-Igor B.</p>
                                                    </a>
                                                </div>
                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <button style="background-color: yellow;"
                                                            class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning"
                                                            type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                            aria-expanded="false" data-bs-reference="parent">
                                                        <h5 class="pe-2 ">M </h5>
                                                    </button>
                                                </div>
                                            </td>

                                            <td class="align-top rating white-space-nowrap">
                                                <div class="d-flex align-items-center ">
                                                    <button style="background-color: white;"
                                                            class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2 d-flex text-warning"
                                                            type="button" data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                                            aria-expanded="false" data-bs-reference="parent">
                                                        <h5 class="pe-2 ">L </h5>
                                                    </button>
                                                </div>
                                            </td>


                                            <td class="align-top rating white-space-nowrap d-none">
                                                <div class="d-flex align-items-center ">

                                                    <span class="badge badge-phoenix fs--2 badge-phoenix-warning">
                                                        <span class="badge-label">Pending</span><span class="ms-1" data-feather="alert-octagon"
                                                                                                      style="height:12.8px;width:12.8px;"></span>
                                                    </span>

                                                </div>
                                            </td>
                                            <td class="align-top rating white-space-nowrap">

                                                <input type="date" name="date[]" class="form-control datetimepicker rounded-1"
                                                       placeholder="Start Date dd/mm/yyyy"
                                                       data-options='{"disableMobile":true,"dateFormat":"d/m/Y"}'>

                                            </td>
                                            <td class="align-top rating white-space-nowrap">


                                                <input type="date" name="date[]" class="form-control  datetimepicker rounded-1"
                                                       placeholder="End Date dd/mm/yyyy"
                                                       data-options='{"disableMobile":true,"dateFormat":"d/m/Y"}'>


                                            </td>

                                        </tr>


                                    </tbody>


                                </table>
                            </div>
                            <div class="row align-items-center justify-content-between py-2 pe-0 fs--1 d-none">
                                <div class="col-auto d-flex">
                                    <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info">
                                    </p>
                                    <a class="fw-semi-bold" href="#!" data-list-view="*">
                                        View all<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                    </a><a class="fw-semi-bold d-none" href="#!" data-list-view="less">
                                        View Less<span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                                    </a>
                                </div>
                                <div class="col-auto d-flex">
                                    <button class="page-link" data-list-pagination="prev">
                                        <span class="fas fa-chevron-left"></span>
                                    </button>
                                    <ul class="mb-0 pagination"></ul>
                                    <button class="page-link pe-0" data-list-pagination="next">
                                        <span class="fas fa-chevron-right"></span>
                                    </button>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- manage recment -->


                </div>

            </div>
        </div>
    </div>



 
@* ************************************************************** *@

        <!--Modal Employee Check Start-->
        <div class="modal fade modal-xl" id="modalEmployeeCheck" tabindex="-1" aria-labelledby="modalEmployeeCheckLabel"
          aria-hidden="true" style="display: none;">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalEmployeeCheckLabel">Search Employee</h5>

                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg
                    class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                    data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                    data-fa-i2svg="">
                    <path fill="currentColor"
                      d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                    </path>
                  </svg>
                </button>

              </div>
              <div class="modal-body">

                <div class="mb-4">

                  <div class="row g-3">
  
                    <div class="col-auto">
  
                      <div class="search-box position-relative">
   
                        <input class="form-control search-input search" ng-
                        ng-model="searchText" placeholder="Search"  />
                        <span class="fas fa-search search-box-icon"></span> 
                      </div>


                    </div>
  
                      <div class="col-auto scrollbar overflow-hidden-y flex-grow-1">
                    
                        <button class="btn btn-phoenix-primary px-7 float-end  " ng-click="filteredDataEmpSession()"
                          data-bs-dismiss="modal"> <a class="dropdown-item text-primary" href="#!"><span
                              class="fas fa-check"></span>
                            Apply</a></button>
  
                      </div>
  
                  </div>
                  
                </div>
   
                <div class="bg-white border-top border-bottom border-200 position-relative top-1">
                  <div class="table-responsive scrollbar-overlay mx-n1 px-1">
                    <table class="table table-sm fs--1 mb-0">
                      <thead class=" text-uppercase">
                        <tr class="text-center">
                          <th class=" align-middle "> </th>

                          <th class=" align-middle pe-5" scope="col">
                            Employee 
                          </th> 
                          <th class=" align-middle pe-5" scope="col">E-Mail</th>
                          <th class=" align-middle pe-5" scope="col">Employee Type</th>
 
                        </tr>
                      </thead>
                      <tbody class=" list">


                        <tr class="hover-actions-trigger btn-reveal-trigger position-static text-center"
                          ng-repeat="item in employeelist"
                           ng-click="selectDataEmployee(item)">

                          <td class="">
                            <input type="checkbox" class="form-check-input" id="" ng-model="item.selected"
                              ng-change="updateSelectedItems()">
                          </td>

                          <td class="">
                            <a class=" text-decoration-none d-flex align-items-center">
                              <div class="avatar avatar-m"><img class="rounded-circle" src="../../{{ item.employee_img }}"
                                  alt=""></div>
                              <p class="mb-0 ms-3 text-1100 fw-bold"> ({{item.id}}){{item.employee_displayname}} </p>
                            </a>
                          </td>

                          <td class="">{{item.employee_email}} </td>

                          <td class="">{{item.employee_type}}</td>

                        </tr>
                      </tbody>
                    </table>

                  </div> 
                </div>
              </div>
              <div class="modal-footer">

                <div class="container" >
 
                 <div class="row">
 
                   <div class="col-md-auto">
                     <input type="text" class="form-control" placeholder="Name" ng-model="employee_displayname">
                   </div>
                   <div class="col-md-auto">
                     <input type="text" class="form-control" placeholder="Email" ng-model="employee_email">
                   </div>
                   
                   <div class="col-md-auto">
                     <button ng-click="addText()" class="btn btn-phoenix-primary px-7">ADD</button>
                   </div> 
                 </div>
 
                </div> 
             
             </div>

            </div>
          </div>



        </div>
        <!--Modal Employee Check End-->
 
 <!--Modal GuideWords Start-->
        <div class="modal fade modal-xl" id="modalGuideWords" tabindex="-1" aria-labelledby="modalGuideWordsLabel"
          aria-hidden="true" style="display: none;">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="modalGuideWordsLabel">Search Guide Words</h5>

                <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close"><svg
                    class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas"
                    data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
                    data-fa-i2svg="">
                    <path fill="currentColor"
                      d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z">
                    </path>
                  </svg> </button>
              </div>
              <div class="modal-body">

                <div class="mb-4">
                  <div class="row g-3">
                    <div class="col-auto d-flex">
                      <div class="search-box p-1">
                        <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                          <input class="form-control search-input search" type="search" placeholder="Search Deviations"
                            aria-label="Search" />
                          <span class="fas fa-search search-box-icon"></span>

                        </form>
                      </div>

                      <div class="search-box p-1">
                        <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                          <input class="form-control search-input search" type="search" placeholder="Search Guide Words"
                            aria-label="Search" />
                          <span class="fas fa-search search-box-icon"></span>

                        </form>
                      </div>

                      <div class="search-box p-1">
                        <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                          <input class="form-control search-input search" type="search"
                            placeholder="Search Process Deviation" aria-label="Search" />
                          <span class="fas fa-search search-box-icon"></span>

                        </form>
                      </div>

                      <div class="search-box p-1">
                        <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                          <input class="form-control search-input search" type="search"
                            placeholder="Search Area of Application" aria-label="Search" />
                          <span class="fas fa-search search-box-icon"></span>

                        </form>
                      </div>
 
                      <div class="search-box p-1">

                        <div class="col-auto scrollbar overflow-hidden-y flex-grow-1">
                          <div class="btn-group position-static" role="group">
                            <div class="btn-group position-static text-nowrap">
                              <button class="btn btn-phoenix-secondary px-7 flex-shrink-0" type="button"
                                data-bs-toggle="dropdown" data-boundary="window" aria-haspopup="true"
                                aria-expanded="false" data-bs-reference="parent">
                                ACTION TYPE<span class="fas fa-angle-down ms-2"></span></button>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">ALL</a></li>
                                <li><a class="dropdown-item" href="#">ACTIVE</a></li>
                                <li><a class="dropdown-item" href="#">INACTIVE</a></li>
                              </ul>
                            </div>

                            <button class="btn btn-phoenix-primary  ms-1  float-end bg-light-primary"> <a
                                class="dropdown-item text-primary" href="#!"><span class="fas fa-check"></span>
                                Apply</a></button>
                          </div>

                        </div>

                      </div>
                    </div>
                  </div>
                  <div class="bg-white border-top border-bottom border-200 position-relative top-1">
                    <div class="table-responsive scrollbar-overlay mx-n1 px-1">
                      <table class="table table-sm fs--1 mb-0">
                        <thead class=" text-uppercase">
                          <tr>
                            <th class="white-space-nowrap fs--1 align-middle ps-0" style="width:5%;">Active
                            </th>
                            <th class=" align-middle pe-5" scope="col" data-sort="employee" style="width:15%;">
                              Deviations
                            </th>
                            <th class=" align-middle pe-5" scope="col" data-sort="email" style="width:15%;">Guide
                              Words
                            </th>
                            <th class=" align-middle text-end" scope="col" data-sort="total-orders" style="width:30%">
                              Process Deviation (Examples of Cause)</th>
                            <th class=" align-middle ps-7" scope="col" data-sort="city" style="width:30%;">Area of
                              Application</th>
                          </tr>
                        </thead>
                        <tbody class=" list"  ng-repeat="itemMod in master_guidwords | orderBy:seq"  > 
                        <tr ng-if="itemMod.main_parameter == 1" class="hover-actions-trigger btn-reveal-trigger position-static ">
                            <td class="fs--1 align-middle ps-0 py-3" colspan="5">{{itemMod.parameter}}</td>
                        </tr>
                          <tr class="hover-actions-trigger btn-reveal-trigger position-static">
                            <td class="fs--1 align-middle ps-0 py-3">
                              <input class="form-check-input text-end" id="flexCheckChecked"
                               type="checkbox"  ng-selected="itemMod.def_selected"   >
                            </td>
                            <td class="customer align-middle white-space-nowrap pe-5">{{itemMod.deviations}}</td>
                            <td class="email align-middle white-space-nowrap text-1000 ps-7">{{item.guide_words}}</td>
                            <td class="total-orders align-middle text-1000 ps-7">
                              <p class="text-break">
                               {{itemMod.process_deviation}} 
                              </p>
                            </td>
                            <td class="city align-middle white-space-nowrap text-1000 ps-7">{{itemMod.area_application}}</td>
                          </tr>
 
                        </tbody>
                      </table>
                    </div>
                    <div class="row align-items-center justify-content-between py-2 pe-0 fs--1 d-none">
                      <div class="col-auto d-flex">
                        <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info">
                        </p>
                        <a class="fw-semi-bold" href="#!" data-list-view="*">View all<span
                            class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a><a
                          class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less<span
                            class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span></a>
                      </div>
                      <div class="col-auto d-flex">
                        <button class="page-link" data-list-pagination="prev"><span
                            class="fas fa-chevron-left"></span></button>
                        <ul class="mb-0 pagination"></ul>
                        <button class="page-link pe-0" data-list-pagination="next"><span
                            class="fas fa-chevron-right"></span></button>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>



          </div>
          <!--Modal GuideWords End-->


        </div>

</div>

@section Scripts {


    <script src="~/js/_flow/hazop.js"></script> 
}
 