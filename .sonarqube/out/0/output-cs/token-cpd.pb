€
O/Users/dave/developer/dotnet/dotnet6-epha-web/Views/Master/HazardType.cshtml.cs
	namespace 	
dotnet6_epha_web
 
. 
Views  
.  !
Master! '
.' (
Hra( +
{ 
public 

class 
HazardTypeModel  
:! "
	PageModel# ,
{ 
public 
void 
OnGet 
( 
) 
{		 	
}

 	
} 
} Ž
V/Users/dave/developer/dotnet/dotnet6-epha-web/Views/Master/HazardRiskFactors.cshtml.cs
	namespace 	
dotnet6_epha_web
 
. 
Views  
.  !
Master! '
.' (
Hra( +
{ 
public 

class "
HazardRiskFactorsModel '
:( )
	PageModel* 3
{ 
public 
void 
OnGet 
( 
) 
{		 	
}

 	
} 
} ³}
G/Users/dave/developer/dotnet/dotnet6-epha-web/Services/sessionAuthen.cs
	namespace 	
ServicesAuthen
 
; 
public 
class 
sessionAuthen 
{ 
private  
IHttpContextAccessor  
Accessor! )
;) *
public 
 
IHttpContextAccessor 
	Accessors  )
;) *
public		 

sessionAuthen		 
(		  
IHttpContextAccessor		 -
	_Accessor		. 7
)		7 8
{

 
Accessor 
= 
	_Accessor 
; 
	Accessors 
= 
	_Accessor 
; 
} 
public 

string 
pha_sub_software "
{ 
get 
{ 
return 
Accessor 
. 
HttpContext )
.) *
Session* 1
.1 2
	GetString2 ;
(; <
$str< N
)N O
??P R
$strS U
;U V
}W X
set 
{ 
Accessor 
. 
HttpContext "
." #
Session# *
.* +
	SetString+ 4
(4 5
$str5 G
,G H
valueI N
)N O
;O P
}Q R
} 
public 

string 
responder_user_name %
{ 
get 
{ 
return 
Accessor 
. 
HttpContext )
.) *
Session* 1
.1 2
	GetString2 ;
(; <
$str< Q
)Q R
??S U
$strV X
;X Y
}Z [
set 
{ 
Accessor 
. 
HttpContext "
." #
Session# *
.* +
	SetString+ 4
(4 5
$str5 J
,J K
valueL Q
)Q R
;R S
}T U
} 
public 

string 
vendor 
{ 
get 
{ 
return 
Accessor 
. 
HttpContext )
.) *
Session* 1
.1 2
	GetString2 ;
(; <
$str< D
)D E
??F H
$strI K
;K L
}M N
set 
{ 
Accessor 
. 
HttpContext "
." #
Session# *
.* +
	SetString+ 4
(4 5
$str5 =
,= >
value? D
)D E
;E F
}G H
} 
public   

string   
service_url_link   "
{!! 
get"" 
{"" 
return"" 
Accessor"" 
."" 
HttpContext"" )
."") *
Session""* 1
.""1 2
	GetString""2 ;
(""; <
$str""< N
)""N O
??""P R
$str""S U
;""U V
}""W X
set$$ 
{$$ 
Accessor$$ 
.$$ 
HttpContext$$ "
.$$" #
Session$$# *
.$$* +
	SetString$$+ 4
($$4 5
$str$$5 G
,$$G H
value$$I N
)$$N O
;$$O P
}$$Q R
}%% 
public&& 

string&& 
service_api_url&& !
{'' 
get(( 
{(( 
return(( 
Accessor(( 
.(( 
HttpContext(( )
.(() *
Session((* 1
.((1 2
	GetString((2 ;
(((; <
$str((< M
)((M N
??((O Q
$str((R T
;((T U
}((V W
set** 
{** 
Accessor** 
.** 
HttpContext** "
.**" #
Session**# *
.*** +
	SetString**+ 4
(**4 5
$str**5 F
,**F G
value**H M
)**M N
;**N O
}**P Q
}++ 
public,, 

string,, #
controller_action_befor,, )
{-- 
get.. 
{.. 
return.. 
Accessor.. 
... 
HttpContext.. )
...) *
Session..* 1
...1 2
	GetString..2 ;
(..; <
$str..< U
)..U V
??..W Y
$str..Z \
;..\ ]
}..^ _
set00 
{00 
Accessor00 
.00 
HttpContext00 "
.00" #
Session00# *
.00* +
	SetString00+ 4
(004 5
$str005 N
,00N O
value00P U
)00U V
;00V W
}00X Y
}11 
public22 

string22 
pha_no22 
{33 
get44 
{44 
return44 
Accessor44 
.44 
HttpContext44 )
.44) *
Session44* 1
.441 2
	GetString442 ;
(44; <
$str44< D
)44D E
??44F H
$str44I K
;44K L
}44M N
set66 
{66 
Accessor66 
.66 
HttpContext66 "
.66" #
Session66# *
.66* +
	SetString66+ 4
(664 5
$str665 =
,66= >
value66? D
)66D E
;66E F
}66G H
}77 
public88 

string88 
pha_seq88 
{99 
get:: 
{:: 
return:: 
Accessor:: 
.:: 
HttpContext:: )
.::) *
Session::* 1
.::1 2
	GetString::2 ;
(::; <
$str::< E
)::E F
??::G I
$str::J L
;::L M
}::N O
set<< 
{<< 
Accessor<< 
.<< 
HttpContext<< "
.<<" #
Session<<# *
.<<* +
	SetString<<+ 4
(<<4 5
$str<<5 >
,<<> ?
value<<@ E
)<<E F
;<<F G
}<<H I
}== 
public>> 

string>> 
pha_type_doc>> 
{?? 
get@@ 
{@@ 
return@@ 
Accessor@@ 
.@@ 
HttpContext@@ )
.@@) *
Session@@* 1
.@@1 2
	GetString@@2 ;
(@@; <
$str@@< J
)@@J K
??@@L N
$str@@O Q
;@@Q R
}@@S T
setBB 
{BB 
AccessorBB 
.BB 
HttpContextBB "
.BB" #
SessionBB# *
.BB* +
	SetStringBB+ 4
(BB4 5
$strBB5 C
,BBC D
valueBBE J
)BBJ K
;BBK L
}BBM N
}CC 
publicDD 

stringDD 
	token_docDD 
{EE 
getFF 
{FF 
returnFF 
AccessorFF 
.FF 
HttpContextFF )
.FF) *
SessionFF* 1
.FF1 2
	GetStringFF2 ;
(FF; <
$strFF< G
)FFG H
??FFI K
$strFFL N
;FFN O
}FFP Q
setHH 
{HH 
AccessorHH 
.HH 
HttpContextHH "
.HH" #
SessionHH# *
.HH* +
	SetStringHH+ 4
(HH4 5
$strHH5 @
,HH@ A
valueHHB G
)HHG H
;HHH I
}HHJ K
}II 
publicJJ 

stringJJ 

pha_statusJJ 
{KK 
getLL 
{LL 
returnLL 
AccessorLL 
.LL 
HttpContextLL )
.LL) *
SessionLL* 1
.LL1 2
	GetStringLL2 ;
(LL; <
$strLL< H
)LLH I
??LLJ L
$strLLM O
;LLO P
}LLQ R
setNN 
{NN 
AccessorNN 
.NN 
HttpContextNN "
.NN" #
SessionNN# *
.NN* +
	SetStringNN+ 4
(NN4 5
$strNN5 A
,NNA B
valueNNC H
)NNH I
;NNI J
}NNK L
}OO 
publicQQ 

stringQQ 
	user_nameQQ 
{RR 
getSS 
{SS 
returnSS 
AccessorSS 
.SS 
HttpContextSS )
.SS) *
SessionSS* 1
.SS1 2
	GetStringSS2 ;
(SS; <
$strSS< G
)SSG H
??SSI K
$strSSL N
;SSN O
}SSP Q
setUU 
{UU 
AccessorUU 
.UU 
HttpContextUU "
.UU" #
SessionUU# *
.UU* +
	SetStringUU+ 4
(UU4 5
$strUU5 @
,UU@ A
valueUUB G
)UUG H
;UUH I
}UUJ K
}VV 
publicWW 

stringWW 
	role_typeWW 
{XX 
getYY 
{YY 
returnYY 
AccessorYY 
.YY 
HttpContextYY )
.YY) *
SessionYY* 1
.YY1 2
	GetStringYY2 ;
(YY; <
$strYY< G
)YYG H
??YYI K
$strYYL N
;YYN O
}YYP Q
set[[ 
{[[ 
Accessor[[ 
.[[ 
HttpContext[[ "
.[[" #
Session[[# *
.[[* +
	SetString[[+ 4
([[4 5
$str[[5 @
,[[@ A
value[[B G
)[[G H
;[[H I
}[[J K
}\\ 
public]] 

string]] 
user_display]] 
{^^ 
get__ 
{__ 
return__ 
Accessor__ 
.__ 
HttpContext__ )
.__) *
Session__* 1
.__1 2
	GetString__2 ;
(__; <
$str__< J
)__J K
??__L N
$str__O Q
;__Q R
}__S T
setaa 
{aa 
Accessoraa 
.aa 
HttpContextaa "
.aa" #
Sessionaa# *
.aa* +
	SetStringaa+ 4
(aa4 5
$straa5 C
,aaC D
valueaaE J
)aaJ K
;aaK L
}aaM N
}bb 
publiccc 

stringcc 
user_imgcc 
{dd 
getee 
{ee 
returnee 
Accessoree 
.ee 
HttpContextee )
.ee) *
Sessionee* 1
.ee1 2
	GetStringee2 ;
(ee; <
$stree< F
)eeF G
??eeH J
$streeK M
;eeM N
}eeO P
setgg 
{gg 
Accessorgg 
.gg 
HttpContextgg "
.gg" #
Sessiongg# *
.gg* +
	SetStringgg+ 4
(gg4 5
$strgg5 ?
,gg? @
valueggA F
)ggF G
;ggG H
}ggI J
}hh 
publicii 

stringii 
dtroleii 
{jj 
getkk 
{kk 
returnkk 
Accessorkk 
.kk 
HttpContextkk )
.kk) *
Sessionkk* 1
.kk1 2
	GetStringkk2 ;
(kk; <
$strkk< D
)kkD E
??kkF H
$strkkI K
;kkK L
}kkM N
setmm 
{mm 
Accessormm 
.mm 
HttpContextmm "
.mm" #
Sessionmm# *
.mm* +
	SetStringmm+ 4
(mm4 5
$strmm5 =
,mm= >
valuemm? D
)mmD E
;mmE F
}mmG H
}nn 
publicoo 

stringoo 
timeoutSessionoo  
{pp 
getqq 
{qq 
returnqq 
Accessorqq 
.qq 
HttpContextqq )
.qq) *
Sessionqq* 1
.qq1 2
	GetStringqq2 ;
(qq; <
$strqq< L
)qqL M
??qqN P
$strqqQ S
;qqS T
}qqU V
setss 
{ss 
Accessorss 
.ss 
HttpContextss "
.ss" #
Sessionss# *
.ss* +
	SetStringss+ 4
(ss4 5
$strss5 E
,ssE F
valuessG L
)ssL M
;ssM N
}ssO P
}tt 
publicuu 

booluu 
isLoginuu 
{vv 
getww 
{xx 	
returnyy 
stringyy 
.yy 
IsNullOrEmptyyy '
(yy' (
	user_nameyy( 1
)yy1 2
;yy2 3
}zz 	
}{{ 
public|| 

String|| 
AccessToken|| 
{}} 
get
 
{
‚‚ 	
var
ƒƒ 
value
ƒƒ 
=
ƒƒ 
$str
ƒƒ 
;
ƒƒ 
if
„„ 
(
„„ 
Accessor
„„ 
.
„„ 
HttpContext
„„ $
.
„„$ %
Request
„„% ,
.
„„, -
Cookies
„„- 4
[
„„4 5
$str
„„5 :
]
„„: ;
!=
„„< >
null
„„? C
)
„„C D
{
…… 
value
†† 
=
†† 
Accessor
††  
.
††  !
HttpContext
††! ,
.
††, -
Request
††- 4
.
††4 5
Cookies
††5 <
[
††< =
$str
††= B
]
††B C
;
††C D
}
‡‡ 
return
ˆˆ 
!
ˆˆ 
string
ˆˆ 
.
ˆˆ 
IsNullOrEmpty
ˆˆ (
(
ˆˆ( )
value
ˆˆ) .
)
ˆˆ. /
?
ˆˆ0 1
value
ˆˆ2 7
:
ˆˆ8 9
$str
ˆˆ: <
;
ˆˆ< =
}
‰‰ 	
}
‹‹ 
public
 

String
 
AccessControl
 
{
ŽŽ 
get
 
{
 
return
 
Accessor
 
.
 
HttpContext
 )
.
) *
Session
* 1
.
1 2
	GetString
2 ;
(
; <
$str
< K
)
K L
??
M O
$str
P R
;
R S
}
T U
set
‘‘ 
{
‘‘ 
Accessor
‘‘ 
.
‘‘ 
HttpContext
‘‘ "
.
‘‘" #
Session
‘‘# *
.
‘‘* +
	SetString
‘‘+ 4
(
‘‘4 5
$str
‘‘5 D
,
‘‘D E
value
‘‘F K
)
‘‘K L
;
‘‘L M
}
‘‘N O
}
““ 
public
”” 

String
”” 
Email
”” 
{
•• 
get
–– 
{
–– 
return
–– 
Accessor
–– 
.
–– 
HttpContext
–– )
.
––) *
Session
––* 1
.
––1 2
	GetString
––2 ;
(
––; <
$str
––< C
)
––C D
??
––E G
$str
––H J
;
––J K
}
––L M
set
˜˜ 
{
˜˜ 
Accessor
˜˜ 
.
˜˜ 
HttpContext
˜˜ "
.
˜˜" #
Session
˜˜# *
.
˜˜* +
	SetString
˜˜+ 4
(
˜˜4 5
$str
˜˜5 <
,
˜˜< =
value
˜˜> C
)
˜˜C D
;
˜˜D E
}
˜˜F G
}
šš 
public
 

override
 
bool
 
Equals
 
(
  
object
  &
?
& '
obj
( +
)
+ ,
{
žž 
return
ŸŸ 
base
ŸŸ 
.
ŸŸ 
Equals
ŸŸ 
(
ŸŸ 
obj
ŸŸ 
)
ŸŸ 
;
ŸŸ  
}
   
public
¢¢ 

override
¢¢ 
int
¢¢ 
GetHashCode
¢¢ #
(
¢¢# $
)
¢¢$ %
{
££ 
return
¤¤ 
base
¤¤ 
.
¤¤ 
GetHashCode
¤¤ 
(
¤¤  
)
¤¤  !
;
¤¤! "
}
¥¥ 
public
§§ 

override
§§ 
string
§§ 
?
§§ 
ToString
§§ $
(
§§$ %
)
§§% &
{
¨¨ 
return
©© 
base
©© 
.
©© 
ToString
©© 
(
©© 
)
©© 
;
©© 
}
ªª 
}«« Á"
8/Users/dave/developer/dotnet/dotnet6-epha-web/Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. #
AddControllersWithViews (
(( )
)) *
;* +
builder 
. 
Services 
. 

AddSession 
( 
options #
=>$ &
{		 
} 
) 
; 
builder 
. 
Services 
. "
AddHttpContextAccessor '
(' (
)( )
;) *
builder 
. 
Services 
. 
	AddScoped 
< 
sessionAuthen (
,( )
sessionAuthen* 7
>7 8
(8 9
)9 :
;: ;
builder 
. 
Services 
. 
	AddScoped 
< 
WSSoaps "
," #
WSSoaps$ +
>+ ,
(, -
)- .
;. /
builder 
. 
Services 
. 
AddCors 
( 
p 
=> 
p 
.  
	AddPolicy  )
() *
$str* 7
,7 8
builder9 @
=>A C
{ 
builder 
. 
WithOrigins 
( 
$str 
) 
. 
AllowAnyMethod +
(+ ,
), -
.- .
AllowAnyHeader. <
(< =
)= >
;> ?
} 
) 
) 
; 
var 
initialScopes 
= 
builder 
. 
Configuration )
.) *
GetValue* 2
<2 3
string3 9
>9 :
(: ;
$str; Q
)Q R
?R S
.S T
SplitT Y
(Y Z
$charZ ]
)] ^
;^ _
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
! 
app 
. 	
Environment	 
. 
IsDevelopment "
(" #
)# $
)$ %
{ 
app 
. 
UseExceptionHandler 
( 
$str )
)) *
;* +
app 
. 
UseHsts 
( 
) 
; 
}   
app## 
.## 
UseHttpsRedirection## 
(## 
)## 
;## 
app$$ 
.$$ 
UseStaticFiles$$ 
($$ 
)$$ 
;$$ 
app&& 
.&& 

UseRouting&& 
(&& 
)&& 
;&& 
app'' 
.'' 
UseCors'' 
('' 
$str'' 
)'' 
;'' 
app** 
.** 
UseAuthentication** 
(** 
)** 
;** 
app++ 
.++ 
UseAuthorization++ 
(++ 
)++ 
;++ 
app,, 
.,, 

UseSession,, 
(,, 
),, 
;,, 
app-- 
.-- 
MapControllerRoute-- 
(-- 
name.. 
:.. 	
$str..
 
,.. 
pattern00 
:00 
$str00	 ,
)00, -
;00- .
app33 
.33 
Run33 
(33 
)33 	
;33	 

builder55 
.55 
Services55 
.55 
	AddScoped55 
<55 
sessionAuthen55 (
>55( )
(55) *
)55* +
;55+ ,
builder66 
.66 
Services66 
.66 
	AddScoped66 
<66 
WSSoaps66 "
>66" #
(66# $
)66$ %
;66% &
builder77 
.77 
Services77 
.77 
	AddScoped77 
<77 
ExportExcel77 &
>77& '
(77' (
)77( )
;77) *Þ
E/Users/dave/developer/dotnet/dotnet6-epha-web/Pages/Privacy.cshtml.cs
	namespace 	
dotnet6_epha_web
 
. 
Pages  
{ 
public 

class 
PrivacyModel 
: 
	PageModel  )
{ 
private 
readonly 
ILogger  
<  !
PrivacyModel! -
>- .
_logger/ 6
;6 7
public

 
PrivacyModel

 
(

 
ILogger

 #
<

# $
PrivacyModel

$ 0
>

0 1
logger

2 8
)

8 9
{ 	
_logger 
= 
logger 
; 
} 	
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} Ô
C/Users/dave/developer/dotnet/dotnet6-epha-web/Pages/Index.cshtml.cs
	namespace 	
dotnet6_epha_web
 
. 
Pages  
{ 
public 

class 

IndexModel 
: 
	PageModel '
{ 
private 
readonly 
ILogger  
<  !

IndexModel! +
>+ ,
_logger- 4
;4 5
public

 

IndexModel

 
(

 
ILogger

 !
<

! "

IndexModel

" ,
>

, -
logger

. 4
)

4 5
{ 	
_logger 
= 
logger 
; 
} 	
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} á
C/Users/dave/developer/dotnet/dotnet6-epha-web/Pages/Error.cshtml.cs
	namespace 	
dotnet6_epha_web
 
. 
Pages  
{ 
[ 
ResponseCache 
( 
Duration 
= 
$num 
,  
Location! )
=* +!
ResponseCacheLocation, A
.A B
NoneB F
,F G
NoStoreH O
=P Q
trueR V
)V W
]W X
[ "
IgnoreAntiforgeryToken 
] 
public		 

class		 

ErrorModel		 
:		 
	PageModel		 '
{

 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
private 
readonly 
ILogger  
<  !

ErrorModel! +
>+ ,
_logger- 4
;4 5
public 

ErrorModel 
( 
ILogger !
<! "

ErrorModel" ,
>, -
logger. 4
)4 5
{ 	
_logger 
= 
logger 
; 
} 	
public 
void 
OnGet 
( 
) 
{ 	
	RequestId 
= 
Activity  
.  !
Current! (
?( )
.) *
Id* ,
??- /
HttpContext0 ;
.; <
TraceIdentifier< K
;K L
} 	
} 
} ‰
F/Users/dave/developer/dotnet/dotnet6-epha-web/Models/Response/Login.cs
	namespace 	
EOSL
 
. 
Models 
; 
public 
class 

LoginModel 
{ 
public 

string 
	USER_NAME 
{ 
get !
;! "
set# &
;& '
}( )
}

 
public 
class 
LoginResModel 
{ 
[ 
JsonProperty 
( 
$str 
) 
] 
public 

string 
RoleType 
{ 
get  
;  !
set" %
;% &
}' (
[ 
JsonProperty 
( 
$str 
) 
] 
public 

string 
UserName 
{ 
get  
;  !
set" %
;% &
}' (
[ 
JsonProperty 
( 
$str  
)  !
]! "
public 

string 
UserDisplay 
{ 
get  #
;# $
set% (
;( )
}* +
[ 
JsonProperty 
( 
$str 
) 
] 
public 

string 
UserImg 
{ 
get 
;  
set! $
;$ %
}& '
[ 
JsonProperty 
( 
$str !
)! "
]" #
public 

object 
UserPosition 
{  
get! $
;$ %
set& )
;) *
}+ ,
} ê
K/Users/dave/developer/dotnet/dotnet6-epha-web/Models/Requests/LoginModel.cs
	namespace 	
Models
 
; 
public 
class 
LoginViewModel 
{ 
public 

string 
? 
	user_name 
{ 
get "
;" #
set$ '
;' (
}) *
public 

string 
? 
	role_type 
{ 
get "
;" #
set$ '
;' (
}) *
public 

string 
? 
page 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
? 
seq 
{ 
get 
; 
set !
;! "
}# $
public		 

string		 
?		 
msg		 
{		 
get		 
;		 
set		 !
;		! "
}		# $
} 
public 
class 
LoginFromBodyModel 
{ 
public 

string 
	user_name 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
public 

string 
	pass_word 
{ 
get !
;! "
set# &
;& '
}( )
=* +
$str, .
;. /
} 
public 
class 

LoginError 
{ 
public 

string 
Message 
{ 
get 
;  
set! $
;$ %
}& '
=( )
$str* ,
;, -
public 

int 
Code 
{ 
get 
; 
set 
; 
}  !
} 
public 
class $
LoadSessionDataViewModel %
{ 
public 

string 
? 
	user_name 
{ 
get "
;" #
set$ '
;' (
}) *
public 

string 
? 
	role_type 
{ 
get "
;" #
set$ '
;' (
}) *
public 

string 
? 
pha_no 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 
pha_seq 
{ 
get  
;  !
set" %
;% &
}' (
public   

string   
?   
pha_type_doc   
{    !
get  " %
;  % &
set  ' *
;  * +
}  , -
public!! 

string!! 
?!! 
pha_sub_software!! #
{!!$ %
get!!& )
;!!) *
set!!+ .
;!!. /
}!!0 1
public"" 

string"" 
?"" 

pha_status"" 
{"" 
get""  #
;""# $
set""% (
;""( )
}""* +
public## 

string## 
?## #
controller_action_befor## *
{##+ ,
get##- 0
;##0 1
set##2 5
;##5 6
}##7 8
public$$ 

string$$ 
?$$ 
responder_user_name$$ &
{$$' (
get$$) ,
;$$, -
set$$. 1
;$$1 2
}$$3 4
}&& ©

L/Users/dave/developer/dotnet/dotnet6-epha-web/Models/Requests/AzueADModel.cs
	namespace 	
Models
 
; 
public 
class 
AzureAdLogin 
{ 
public 

string 
	client_id 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
redirect_uri 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
response_mode 
{  !
get" %
;% &
}' (
=) *
$str+ 7
;7 8
public 

string 
scope 
{ 
get 
; 
set "
;" #
}$ %
=& '
$str( >
;> ?
}		 
public

 
class

 
AuthDetails

 
{ 
public 

string 
UserName 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
AccessToken 
{ 
get  #
;# $
set% (
;( )
}* +
} ú
F/Users/dave/developer/dotnet/dotnet6-epha-web/Models/ErrorViewModel.cs
	namespace 	
Models 
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
} 
}		 ¿v
@/Users/dave/developer/dotnet/dotnet6-epha-web/helpers/WSSoaps.cs
	namespace 	
Helperselpers
 
; 
public 
class 
WSSoaps 
{ 

HttpClient		 
_HttpClient		 
;		 
IConfiguration

 
_IConfiguration

 "
;

" #
public 

WSSoaps 
( 
IConfiguration !
IConfiguration" 0
)0 1
{ 
HttpClientHandler 
clientHandler '
=( )
new* -
HttpClientHandler. ?
(? @
)@ A
;A B
clientHandler 
. 5
)ServerCertificateCustomValidationCallback ?
=@ A
(B C
senderC I
,I J
certK O
,O P
chainQ V
,V W
sslPolicyErrorsX g
)g h
=>i k
{l m
returnn t
trueu y
;y z
}{ |
;| }
_HttpClient 
= 
new 

HttpClient $
($ %
clientHandler% 2
)2 3
;3 4
_IConfiguration 
= 
IConfiguration (
;( )
} 
public 

async 
Task 
< 
string 
> $
post_check_authorization 6
(6 7
string7 =
	user_name> G
,G H
stringI O
	user_passP Y
)Y Z
{ 
string 
service_api_url 
=  
_IConfiguration! 0
[0 1
$str1 K
]K L
+M N
$strO j
;j k
var 
person 
= 
new 
{ 
	user_name $
=% &
	user_name' 0
,0 1
	user_pass2 ;
=< =
	user_pass> G
}H I
;I J
var 
json 
= 
JsonConvert 
. 
SerializeObject .
(. /
person/ 5
)5 6
;6 7
var 
data 
= 
new 
StringContent $
($ %
json% )
,) *
Encoding+ 3
.3 4
UTF84 8
,8 9
$str: L
)L M
;M N
var 
result 
= 
await 
_HttpClient &
.& '
	PostAsync' 0
(0 1
service_api_url1 @
,@ A
dataB F
)F G
;G H
string 
resultContent 
= 
await $
result% +
.+ ,
Content, 3
.3 4
ReadAsStringAsync4 E
(E F
)F G
;G H
return 
resultContent 
. 
ToString %
(% &
)& '
;' (
} 
public 

async 
Task 
< 
string 
> !
Post_check_user_login 3
(3 4
string4 :
	user_name; D
,D E
stringF L
	user_passM V
)V W
{ 
string   
service_api_url   
=    
_IConfiguration  ! 0
[  0 1
$str  1 K
]  K L
+  M N
$str  O b
;  b c
Console!! 
.!! 
	WriteLine!! 
(!! 
service_api_url!! )
)!!) *
;!!* +
_HttpClient"" 
."" !
DefaultRequestHeaders"" )
."") *
Accept""* 0
.## 	
Add##	 
(## 
new## +
MediaTypeWithQualityHeaderValue## 0
(##0 1
$str##1 C
)##C D
)##D E
;##E F
var$$ 
person$$ 
=$$ 
new$$ 
{$$ 
emp_id$$ !
=$$" #
$str$$$ &
,$$& '
	indicator$$( 1
=$$2 3
$str$$4 6
,$$6 7
	user_name$$8 A
=$$B C
	user_name$$D M
,$$M N
	user_pass$$O X
=$$Y Z
	user_pass$$[ d
}$$e f
;$$f g
var%% 
json%% 
=%% 
JsonConvert%% 
.%% 
SerializeObject%% .
(%%. /
person%%/ 5
)%%5 6
;%%6 7
var&& 
data&& 
=&& 
new&& 
StringContent&& $
(&&$ %
json&&% )
,&&) *
Encoding&&+ 3
.&&3 4
UTF8&&4 8
,&&8 9
$str&&: L
)&&L M
;&&M N
LoginResModel'' 
['' 
]'' 
resultContents'' &
=''' (
null'') -
;''- .
string(( 
resultContent(( 
=(( 
$str(( !
;((! "
var)) 
result)) 
=)) 
await)) 
_HttpClient)) &
.))& '
	PostAsync))' 0
())0 1
service_api_url))1 @
,))@ A
data))B F
)))F G
;))G H
resultContent** 
=** 
await** 
result** $
.**$ %
Content**% ,
.**, -
ReadAsStringAsync**- >
(**> ?
)**? @
;**@ A
Console++ 
.++ 
	WriteLine++ 
(++ 
resultContent++ '
)++' (
;++( )
return-- 
resultContent-- 
.-- 
ToString-- %
(--% &
)--& '
.--' (
Replace--( /
(--/ 0
$str--0 4
,--4 5
$str--6 8
)--8 9
.--9 :
Replace--: A
(--A B
$str--B F
,--F G
$str--H K
)--K L
;--L M
;--N O
}// 
public00 

async00 
Task00 
<00 
string00 
>00 #
Post_get_emp_data_login00 5
(005 6
string006 <
	user_name00= F
)00F G
{11 
string33 
service_api_url33 
=33  
_IConfiguration33! 0
[330 1
$str331 K
]33K L
+33M N
$str33O d
;33d e
var44 
person44 
=44 
new44 
{44 
emp_id44 !
=44" #
$str44$ &
,44& '
	user_pass44( 1
=442 3
$str444 6
,446 7
	indicator448 A
=44B C
$str44D F
,44F G
	user_name44H Q
=44R S
	user_name44T ]
}44^ _
;44_ `
var55 
json55 
=55 
JsonConvert55 
.55 
SerializeObject55 .
(55. /
person55/ 5
)555 6
;556 7
var66 
data66 
=66 
new66 
StringContent66 $
(66$ %
json66% )
,66) *
Encoding66+ 3
.663 4
UTF8664 8
,668 9
$str66: L
)66L M
;66M N
var;; 
result;; 
=;; 
await;; 
_HttpClient;; &
.;;& '
	PostAsync;;' 0
(;;0 1
service_api_url;;1 @
,;;@ A
data;;B F
);;F G
;;;G H
string<< 
resultContent<< 
=<< 
await<< $
result<<% +
.<<+ ,
Content<<, 3
.<<3 4
ReadAsStringAsync<<4 E
(<<E F
)<<F G
;<<G H
XmlDocument== 
doc== 
=== 
new== 
XmlDocument== )
(==) *
)==* +
;==+ ,
try>> 
{?? 	
doc@@ 
.@@ 
LoadXml@@ 
(@@ 
resultContent@@ %
)@@% &
;@@& '
ConsoleAA 
.AA 
	WriteLineAA 
(AA 
docAA !
.AA! "
	InnerTextAA" +
)AA+ ,
;AA, -
returnBB 
docBB 
.BB 
	InnerTextBB  
;BB  !
}DD 	
catchEE 
{FF 	
}HH 	
returnII 
resultContentII 
.II 
ToStringII %
(II% &
)II& '
.II' (
ReplaceII( /
(II/ 0
$strII0 4
,II4 5
$strII6 8
)II8 9
.II9 :
ReplaceII: A
(IIA B
$strIIB F
,IIF G
$strIIH K
)IIK L
;IIL M
;IIN O
}JJ 
publicLL 

asyncLL 
TaskLL 
<LL 
stringLL 
>LL 
decodeLL $
(LL$ %
stringLL% +
valueLL, 1
)LL1 2
{MM 
stringNN 
service_api_urlNN 
=NN  
_IConfigurationNN! 0
[NN0 1
$strNN1 <
]NN< =
;NN= >
varOO 
personOO 
=OO 
newOO 
{OO 
valOO 
=OO  
valueOO! &
}OO' (
;OO( )
varPP 
jsonPP 
=PP 
$@"PP 
$strPP 
{PP 
valuePP 
}PP 
$strPP !
"PP! "
;PP" #
varRR 
dataRR 
=RR 
newRR 
StringContentRR $
(RR$ %
jsonRR% )
,RR) *
EncodingRR+ 3
.RR3 4
UTF8RR4 8
,RR8 9
$strRR: L
)RRL M
;RRM N
varSS 
resultSS 
=SS 
awaitSS 
_HttpClientSS &
.SS& '
	PostAsyncSS' 0
(SS0 1
service_api_urlSS1 @
,SS@ A
dataSSB F
)SSF G
;SSG H
stringTT 
resultContentTT 
=TT 
awaitTT $
resultTT% +
.TT+ ,
ContentTT, 3
.TT3 4
ReadAsStringAsyncTT4 E
(TTE F
)TTF G
;TTG H
returnVV 
resultContentVV 
;VV 
}WW 
publicYY 

asyncYY 
TaskYY 
<YY 
stringYY 
>YY 
getAccessControlYY .
(YY. /
stringYY/ 5
	user_nameYY6 ?
)YY? @
{ZZ 
var[[ 
value[[ 
=[[ 
$@"[[ 
$str[a =
{aa= >
	user_nameaa> G
}aaG H
$straaH K
"aaK L
;aaL M
stringbb 
service_api_urlbb 
=bb  
_IConfigurationbb! 0
[bb0 1
$strbb1 @
]bb@ A
+bbB C
$strbbD \
;bb\ ]
varhh 
datahh 
=hh 
newhh !
FormUrlEncodedContenthh ,
(hh, -
newhh- 0
[hh0 1
]hh1 2
{ii 
newjj 
KeyValuePairjj  
<jj  !
stringjj! '
,jj' (
stringjj) /
>jj/ 0
(jj0 1
$strjj1 :
,jj: ;
valuejj< A
)jjA B
,jjB C
}kk 
)kk 
;kk 
stringll 
resultContentll 
=ll 
$strll !
;ll! "
trymm 
{nn 	
varoo 
resultoo 
=oo 
awaitoo 
_HttpClientoo *
.oo* +
	PostAsyncoo+ 4
(oo4 5
service_api_urloo5 D
,ooD E
dataooF J
)ooJ K
;ooK L
resultContentpp 
=pp 
awaitpp !
resultpp" (
.pp( )
Contentpp) 0
.pp0 1
ReadAsStringAsyncpp1 B
(ppB C
)ppC D
;ppD E
}qq 	
catchrr 
(rr 
	Exceptionrr 
errrr 
)rr 
{ss 	
throwtt 
newtt 
	Exceptiontt 
(tt  
errtt  #
.tt# $
Messagett$ +
.tt+ ,
ToStringtt, 4
(tt4 5
)tt5 6
)tt6 7
;tt7 8
}uu 	
returnvv 
resultContentvv 
;vv 
}ww 
publicyy 

asyncyy 
Taskyy 
<yy 
stringyy 
>yy !
Post_Register_Accountyy 3
(yy3 4
stringyy4 :

user_emailyy; E
,yyE F
stringyyG M
accept_statusyyN [
)yy[ \
{zz 
string{{ 
service_api_url{{ 
={{  
_IConfiguration{{! 0
[{{0 1
$str{{1 K
]{{K L
+{{M N
$str{{O n
;{{n o
var|| 
person|| 
=|| 
new|| 
{|| 

user_email|| %
=||& '

user_email||( 2
,||2 3
accept_status||4 A
=||B C
accept_status||D Q
}||R S
;||S T
var}} 
json}} 
=}} 
JsonConvert}} 
.}} 
SerializeObject}} .
(}}. /
person}}/ 5
)}}5 6
;}}6 7
var~~ 
data~~ 
=~~ 
new~~ 
StringContent~~ $
(~~$ %
json~~% )
,~~) *
Encoding~~+ 3
.~~3 4
UTF8~~4 8
,~~8 9
$str~~: L
)~~L M
;~~M N
var
€€ 
result
€€ 
=
€€ 
await
€€ 
_HttpClient
€€ &
.
€€& '
	PostAsync
€€' 0
(
€€0 1
service_api_url
€€1 @
,
€€@ A
data
€€B F
)
€€F G
;
€€G H
string
 
resultContent
 
=
 
await
 $
result
% +
.
+ ,
Content
, 3
.
3 4
ReadAsStringAsync
4 E
(
E F
)
F G
;
G H
XmlDocument
‚‚ 
doc
‚‚ 
=
‚‚ 
new
‚‚ 
XmlDocument
‚‚ )
(
‚‚) *
)
‚‚* +
;
‚‚+ ,
try
ƒƒ 
{
„„ 	
doc
…… 
.
…… 
LoadXml
…… 
(
…… 
resultContent
…… %
)
……% &
;
……& '
Console
†† 
.
†† 
	WriteLine
†† 
(
†† 
doc
†† !
.
††! "
	InnerText
††" +
)
††+ ,
;
††, -
return
‡‡ 
doc
‡‡ 
.
‡‡ 
	InnerText
‡‡  
;
‡‡  !
}
‰‰ 	
catch
ŠŠ 
{
‹‹ 	
}
 	
return
ŽŽ 
resultContent
ŽŽ 
.
ŽŽ 
ToString
ŽŽ %
(
ŽŽ% &
)
ŽŽ& '
.
ŽŽ' (
Replace
ŽŽ( /
(
ŽŽ/ 0
$str
ŽŽ0 4
,
ŽŽ4 5
$str
ŽŽ6 8
)
ŽŽ8 9
.
ŽŽ9 :
Replace
ŽŽ: A
(
ŽŽA B
$str
ŽŽB F
,
ŽŽF G
$str
ŽŽH K
)
ŽŽK L
;
ŽŽL M
;
ŽŽN O
}
 
}““ É5
D/Users/dave/developer/dotnet/dotnet6-epha-web/helpers/ExportExcel.cs
	namespace 	
Helpers
 
; 
public 
class 
ExportExcel 
{ 

HttpClient		 
_HttpClient		 
;		 
IConfiguration

 
_IConfiguration

 "
;

" #
string 

pathExports 
; 
string 


pathStatic 
; 
string 

BinaryLocation 
; 
string 

_PathReq 
; 
public 

ExportExcel 
( 
IConfiguration %
IConfiguration& 4
)4 5
{ 
HttpClientHandler 
clientHandler '
=( )
new* -
HttpClientHandler. ?
(? @
)@ A
;A B
clientHandler 
. 5
)ServerCertificateCustomValidationCallback ?
=@ A
(B C
senderC I
,I J
certK O
,O P
chainQ V
,V W
sslPolicyErrorsX g
)g h
=>i k
{l m
returnn t
trueu y
;y z
}{ |
;| }
_HttpClient 
= 
new 

HttpClient $
($ %
clientHandler% 2
)2 3
;3 4
_IConfiguration 
= 
IConfiguration (
;( )
pathExports 
= 
_IConfiguration %
[% &
$str& 8
]8 9
;9 :
_PathReq 
= 
IConfiguration !
[! "
$str" +
]+ ,
;, -

pathStatic 
= 
IConfiguration #
[# $
$str$ 0
]0 1
;1 2
BinaryLocation 
= 
IConfiguration '
[' (
$str( 8
]8 9
;9 :
} 
public 

string 

htmlToXLSX 
( 
string #
strhtml$ +
,+ ,
string- 3
fileNameClient4 B
)B C
{   
string!! 
path!! 
=!! 

pathStatic!!  
;!!  !
string"" 
fileName"" 
="" 
$@""" 
{"" 
fileNameClient"" ,
}"", -
$str""- 2
"""2 3
;""3 4
string## 
PathReqFull## 
=## 
$@"##  
{##  !
_PathReq##! )
}##) *
$str##* 2
{##2 3
fileName##3 ;
}##; <
"##< =
;##= >
string$$ 
PathReq$$ 
=$$ 
$@"$$ 
{$$ 
_PathReq$$ %
}$$% &
$str$$& 4
"$$4 5
;$$5 6
string&& 
xlsxFile&& 
=&& 
pathExports&& %
+&&& '
fileName&&( 0
;&&0 1
string'' 
xlsxFileReq'' 
='' 
$@"''  
{''  !
_PathReq''! )
}'') *
$str''* 8
"''8 9
+'': ;
fileName''< D
;''D E
Boolean(( 
	Existsdir(( 
=(( 
	Directory(( %
.((% &
Exists((& ,
(((, -
pathExports((- 8
)((8 9
;((9 :
if)) 

()) 
!)) 
	Existsdir)) 
))) 
{** 	
	Directory++ 
.++ 
CreateDirectory++ %
(++% &
pathExports++& 1
)++1 2
;++2 3
},, 	
string// 
html// 
=// 
@$"// 
{// 
strhtml// !
}//! "
"//" #
;//# $
Console22 
.22 
	WriteLine22 
(22 
html22 
)22 
;22  
using33 
(33 
var33 
package33 
=33 
new33  
ExcelPackage33! -
(33- .
)33. /
)33/ 0
{44 	
var55 
	worksheet55 
=55 
package55 #
.55# $
Workbook55$ ,
.55, -

Worksheets55- 7
.557 8
Add558 ;
(55; <
$str55< D
)55D E
;55E F
var88 
htmlDoc88 
=88 
new88 
XmlDocument88 )
(88) *
)88* +
;88+ ,
htmlDoc99 
.99 
LoadXml99 
(99 
string99 "
.99" #
Format99# )
(99) *
$str99* <
,99< =
html99> B
)99B C
)99C D
;99D E
var<< 
	tableNode<< 
=<< 
htmlDoc<< #
.<<# $
SelectSingleNode<<$ 4
(<<4 5
$str<<5 >
)<<> ?
;<<? @
var?? 
rowNodes?? 
=?? 
	tableNode?? $
.??$ %
SelectNodes??% 0
(??0 1
$str??1 5
)??5 6
;??6 7
forBB 
(BB 
intBB 
rowIndexBB 
=BB 
$numBB  !
;BB! "
rowIndexBB# +
<BB, -
rowNodesBB. 6
.BB6 7
CountBB7 <
;BB< =
rowIndexBB> F
++BBF H
)BBH I
{CC 
varDD 
	cellNodesDD 
=DD 
rowNodesDD  (
[DD( )
rowIndexDD) 1
]DD1 2
.DD2 3
SelectNodesDD3 >
(DD> ?
$strDD? C
)DDC D
;DDD E
forFF 
(FF 
intFF 
	cellIndexFF "
=FF# $
$numFF% &
;FF& '
	cellIndexFF( 1
<FF2 3
	cellNodesFF4 =
.FF= >
CountFF> C
;FFC D
	cellIndexFFE N
++FFN P
)FFP Q
{GG 
varII 
cellTextII  
=II! "
	cellNodesII# ,
[II, -
	cellIndexII- 6
]II6 7
.II7 8
	InnerTextII8 A
;IIA B
	worksheetLL 
.LL 
CellsLL #
[LL# $
rowIndexLL$ ,
+LL- .
$numLL/ 0
,LL0 1
	cellIndexLL2 ;
+LL< =
$numLL> ?
]LL? @
.LL@ A
ValueLLA F
=LLG H
cellTextLLI Q
;LLQ R
}NN 
}OO 
FileSS 
.SS 
WriteAllBytesSS 
(SS 
xlsxFileSS '
,SS' (
packageSS) 0
.SS0 1
GetAsByteArraySS1 ?
(SS? @
)SS@ A
)SSA B
;SSB C
}TT 	
returnVV 
xlsxFileReqVV 
;VV 
}WW 
}YY ñÚ
M/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/WhatIfController.cs
	namespace 	
dotnet6_epha_web
 
. 
Controllers &
{ 
public 

class 
WhatIfController !
:" #

Controller$ .
{ 
private 
static 
string 
DecryptDataWithAes 0
(0 1
string 

cipherText 
, 
string 
	keyBase64 
, 
string 
vectorBase64 
) 	
{ 	
using 
( 
Aes 
aesAlgorithm #
=$ %
Aes& )
.) *
Create* 0
(0 1
)1 2
)2 3
{ 
aesAlgorithm 
. 
Key  
=! "
Convert# *
.* +
FromBase64String+ ;
(; <
	keyBase64< E
)E F
;F G
aesAlgorithm 
. 
IV 
=  !
Convert" )
.) *
FromBase64String* :
(: ;
vectorBase64; G
)G H
;H I
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
ModeD H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
PaddingD K
}K L
"L M
)M N
;N O
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 3
{3 4
aesAlgorithm4 @
.@ A
KeySizeA H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 5
{5 6
aesAlgorithm6 B
.B C
	BlockSizeC L
}L M
"M N
)N O
;O P
ICryptoTransform!!  
	decryptor!!! *
=!!+ ,
aesAlgorithm!!- 9
.!!9 :
CreateDecryptor!!: I
(!!I J
)!!J K
;!!K L
byte## 
[## 
]## 
cipher## 
=## 
Convert##  '
.##' (
FromBase64String##( 8
(##8 9

cipherText##9 C
)##C D
;##D E
using&& 
(&& 
MemoryStream&& #
ms&&$ &
=&&' (
new&&) ,
MemoryStream&&- 9
(&&9 :
cipher&&: @
)&&@ A
)&&A B
{'' 
using(( 
((( 
CryptoStream(( '
cs((( *
=((+ ,
new((- 0
CryptoStream((1 =
(((= >
ms((> @
,((@ A
	decryptor((B K
,((K L
CryptoStreamMode((M ]
.((] ^
Read((^ b
)((b c
)((c d
{)) 
using** 
(** 
StreamReader** +
sr**, .
=**/ 0
new**1 4
StreamReader**5 A
(**A B
cs**B D
)**D E
)**E F
{++ 
return,, "
sr,,# %
.,,% &
	ReadToEnd,,& /
(,,/ 0
),,0 1
;,,1 2
}-- 
}.. 
}// 
}00 
}11 	
private33 
void33 
Check_QueryString33 &
(33& '
)33' (
{44 	
try;; 
{<< 
using== 
(== 
Aes== 
aesAlgorithm== '
===( )
Aes==* -
.==- .
Create==. 4
(==4 5
)==5 6
)==6 7
{>> 
var?? 
location??  
=??! "
new??# &
Uri??' *
(??* +
$"@@ 
{@@ 
Request@@ "
.@@" #
Scheme@@# )
}@@) *
$str@@* -
{@@- .
Request@@. 5
.@@5 6
Host@@6 :
}@@: ;
{@@; <
Request@@< C
.@@C D
Path@@D H
}@@H I
{@@I J
Request@@J Q
.@@Q R
QueryString@@R ]
}@@] ^
"@@^ _
)AA 
;AA 
stringDD 
	QueryTextDD $
=DD% &
(DD' (
locationDD( 0
.DD0 1
QueryDD1 6
)DD6 7
.DD7 8
ReplaceDD8 ?
(DD? @
$strDD@ C
,DDC D
$strDDE G
)DDG H
;DDH I
ifFF 
(FF 
	QueryTextFF !
==FF" $
$strFF% '
&&FF( *
_sessionAuthenFF+ 9
.FF9 :
	role_typeFF: C
!=FFD F
nullFFG K
)FFK L
{GG 
ifHH 
(HH 
_sessionAuthenHH *
.HH* +
service_url_linkHH+ ;
!=HH< >
$strHH? A
)HHA B
{II 
	QueryTextJJ %
=JJ& '
_sessionAuthenJJ( 6
.JJ6 7
service_url_linkJJ7 G
;JJG H
}KK 
}LL 
ifMM 
(MM 
	QueryTextMM !
!=MM" $
$strMM% '
)MM' (
{NN 
stringOO 

cipherTextOO )
=OO* +
$strOO, .
;OO. /
stringPP 
	keyBase64PP (
=PP) *
$strPP+ -
;PP- .
stringQQ 
vectorBase64QQ +
=QQ, -
$strQQ. 0
;QQ0 1
stringRR 
[RR 
]RR  
xSplitRR! '
=RR( )
	QueryTextRR* 3
.RR3 4
SplitRR4 9
(RR9 :
$charRR: =
)RR= >
;RR> ?
tryTT 
{UU 
ifVV 
(VV  
xSplitVV  &
.VV& '
LengthVV' -
>VV. /
$numVV0 1
)VV1 2
{WW 

cipherTextXX  *
=XX+ ,
xSplitXX- 3
[XX3 4
$numXX4 5
]XX5 6
;XX6 7
	keyBase64YY  )
=YY* +
xSplitYY, 2
[YY2 3
$numYY3 4
]YY4 5
;YY5 6
vectorBase64ZZ  ,
=ZZ- .
xSplitZZ/ 5
[ZZ5 6
$numZZ6 7
]ZZ7 8
;ZZ8 9
}[[ 
}\\ 
catch]] 
(]] 
System]] %
.]]% &
	Exception]]& /
)]]/ 0
{^^ 
return`` "
;``" #
}aa 
stringcc 
tokencc $
=cc% &
DecryptDataWithAescc' 9
(cc9 :

cipherTextcc: D
,ccD E
	keyBase64ccF O
,ccO P
vectorBase64ccQ ]
)cc] ^
;cc^ _
ifdd 
(dd 
tokendd !
!=dd" $
$strdd% '
)dd' (
{ee 
tryff 
{gg 
_sessionAuthenhh  .
.hh. /
service_url_linkhh/ ?
=hh@ A
	QueryTexthhB K
;hhK L
_sessionAuthenii  .
.ii. /
pha_seqii/ 6
=ii7 8
(ii9 :
tokenii: ?
.ii? @
Splitii@ E
(iiE F
$chariiF I
)iiI J
[iiJ K
$numiiK L
]iiL M
)iiM N
.iiN O
SplitiiO T
(iiT U
$chariiU X
)iiX Y
[iiY Z
$numiiZ [
]ii[ \
;ii\ ]
_sessionAuthenjj  .
.jj. /
pha_nojj/ 5
=jj6 7
(jj8 9
tokenjj9 >
.jj> ?
Splitjj? D
(jjD E
$charjjE H
)jjH I
[jjI J
$numjjJ K
]jjK L
)jjL M
.jjM N
SplitjjN S
(jjS T
$charjjT W
)jjW X
[jjX Y
$numjjY Z
]jjZ [
;jj[ \
stringmm  &
stepmm' +
=mm, -
(mm. /
tokenmm/ 4
.mm4 5
Splitmm5 :
(mm: ;
$charmm; >
)mm> ?
[mm? @
$nummm@ A
]mmA B
)mmB C
.mmC D
SplitmmD I
(mmI J
$charmmJ M
)mmM N
[mmN O
$nummmO P
]mmP Q
;mmQ R
ifnn  "
(nn# $
stepnn$ (
==nn) +
$strnn, /
)nn/ 0
{nn1 2
_sessionAuthennn3 A
.nnA B
pha_type_docnnB N
=nnO P
$strnnQ X
;nnX Y
}nnZ [
elseoo  $
ifoo% '
(oo( )
stepoo) -
==oo. 0
$stroo1 4
)oo4 5
{oo6 7
_sessionAuthenoo8 F
.ooF G
pha_type_docooG S
=ooT U
$strooV _
;oo_ `
}ooa b
elsepp  $
ifpp% '
(pp( )
steppp) -
==pp. 0
$strpp1 4
)pp4 5
{pp6 7
_sessionAuthenpp8 F
.ppF G
pha_type_docppG S
=ppT U
$strppV `
;pp` a
}ppb c
elseqq  $
ifqq% '
(qq( )
stepqq) -
==qq. 0
$strqq1 4
)qq4 5
{rr  !
stringss$ *
approver_typess+ 8
=ss9 :
(ss; <
tokenss< A
.ssA B
SplitssB G
(ssG H
$charssH K
)ssK L
[ssL M
$numssM N
]ssN O
)ssO P
.ssP Q
SplitssQ V
(ssV W
$charssW Z
)ssZ [
[ss[ \
$numss\ ]
]ss] ^
;ss^ _
iftt$ &
(tt' (
approver_typett( 5
==tt6 8
$strtt9 B
)ttB C
{ttD E
_sessionAuthenttF T
.ttT U
pha_type_docttU a
=ttb c
$strttd m
;ttm n
}tto p
elseuu$ (
ifuu) +
(uu, -
approver_typeuu- :
==uu; =
$struu> F
)uuF G
{uuH I
_sessionAuthenuuJ X
.uuX Y
pha_type_docuuY e
=uuf g
$struuh p
;uup q
}uur s
elsevv$ (
ifvv) +
(vv, -
approver_typevv- :
==vv; =
$strvv> Q
)vvQ R
{vvS T
_sessionAuthenvvU c
.vvc d
pha_type_docvvd p
=vvq r
$str	vvs †
;
vv† ‡
}
vvˆ ‰
}ww  !
elsexx  $
ifxx% '
(xx( )
stepxx) -
==xx. 0
$strxx1 4
)xx4 5
{xx6 7
_sessionAuthenxx8 F
.xxF G
pha_type_docxxG S
=xxT U
$strxxV g
;xxg h
}xxi j
elseyy  $
{yy% &
_sessionAuthenyy' 5
.yy5 6
pha_type_docyy6 B
=yyC D
$stryyE G
;yyG H
}yyI J
}zz 
catch{{ !
{{{" #
}{{$ %
}|| 
}}} 
}~~ 
} 
catch
€€ 
(
€€ 
System
€€ 
.
€€ 
	Exception
€€ #
)
€€# $
{
 
throw
‚‚ 
;
‚‚ 
}
ƒƒ 
}
„„ 	
private
†† 
readonly
†† 
ILogger
††  
<
††  !
WhatIfController
††! 1
>
††1 2
_logger
††3 :
;
††: ;
public
‡‡ 
readonly
‡‡ 
IConfiguration
‡‡ &
_IConfiguration
‡‡' 6
;
‡‡6 7
public
ˆˆ 
readonly
ˆˆ 
sessionAuthen
ˆˆ %
_sessionAuthen
ˆˆ& 4
;
ˆˆ4 5
public
ŠŠ 
WhatIfController
ŠŠ 
(
ŠŠ  
ILogger
ŠŠ  '
<
ŠŠ' (
WhatIfController
ŠŠ( 8
>
ŠŠ8 9
logger
ŠŠ: @
,
ŠŠ@ A
sessionAuthen
‹‹ 
sessionAuthen
‹‹ '
,
‹‹' (
IConfiguration
ŒŒ 
IConfiguration
ŒŒ )
)
 	
{
ŽŽ 	
_sessionAuthen
 
=
 
sessionAuthen
 *
;
* +
_logger
 
=
 
logger
 
;
 
_IConfiguration
‘‘ 
=
‘‘ 
IConfiguration
‘‘ ,
;
‘‘, -
}
’’ 	
public
•• 
IActionResult
•• 
Index
•• "
(
••" #
)
••# $
{
–– 	
Check_QueryString
—— 
(
—— 
)
—— 
;
——  
if
™™ 
(
™™ 
_sessionAuthen
™™ 
.
™™ 
	role_type
™™ (
==
™™) +
$str
™™, .
||
™™/ 1
_sessionAuthen
™™2 @
.
™™@ A
	role_type
™™A J
==
™™K M
null
™™N R
)
™™R S
{
šš 
return
›› 
RedirectToAction
›› '
(
››' (
$str
››( /
,
››/ 0
$str
››1 8
)
››8 9
;
››9 :
}
œœ 
_sessionAuthen
žž 
.
žž 
service_api_url
žž *
=
žž+ ,
_IConfiguration
žž- <
[
žž< =
$str
žž= W
]
žžW X
;
žžX Y
if
   
(
   
_sessionAuthen
   
.
   %
controller_action_befor
   6
==
  7 9
$str
  : <
)
  < =
{
¡¡ 
_sessionAuthen
¢¢ 
.
¢¢ %
controller_action_befor
¢¢ 6
=
¢¢7 8
$str
¢¢9 J
;
¢¢J K
}
££ 
else
¤¤ 
{
¥¥ 
_sessionAuthen
¦¦ 
.
¦¦ %
controller_action_befor
¦¦ 6
=
¦¦7 8
$str
¦¦9 G
;
¦¦G H
}
§§ 
string
©© 
vendor
©© 
=
©© 
_sessionAuthen
©© *
.
©©* +
vendor
©©+ 1
;
©©1 2
ViewData
¬¬ 
[
¬¬ 
$str
¬¬ #
]
¬¬# $
=
¬¬% &
_sessionAuthen
¬¬' 5
.
¬¬5 6
user_display
¬¬6 B
;
¬¬B C
ViewData
­­ 
[
­­ 
$str
­­  
]
­­  !
=
­­" #
_sessionAuthen
­­$ 2
.
­­2 3
	user_name
­­3 <
;
­­< =
ViewData
®® 
[
®® 
$str
®®  
]
®®  !
=
®®" #
_sessionAuthen
®®$ 2
.
®®2 3
	role_type
®®3 <
;
®®< =
ViewData
°° 
[
°° 
$str
°° 
]
°° 
=
°°  !
_sessionAuthen
°°" 0
.
°°0 1
pha_seq
°°1 8
;
°°8 9
ViewData
±± 
[
±± 
$str
±± 
]
±± 
=
±±  
_sessionAuthen
±±! /
.
±±/ 0
pha_no
±±0 6
;
±±6 7
ViewData
²² 
[
²² 
$str
²² !
]
²²! "
=
²²# $
_sessionAuthen
²²% 3
.
²²3 4

pha_status
²²4 >
;
²²> ?
ViewData
³³ 
[
³³ 
$str
³³ #
]
³³# $
=
³³% &
_sessionAuthen
³³' 5
.
³³5 6
pha_type_doc
³³6 B
;
³³B C
ViewData
´´ 
[
´´ 
$str
´´ .
]
´´. /
=
´´0 1
_sessionAuthen
´´2 @
.
´´@ A%
controller_action_befor
´´A X
;
´´X Y
ViewData
µµ 
[
µµ 
$str
µµ &
]
µµ& '
=
µµ( )
_sessionAuthen
µµ* 8
.
µµ8 9
service_api_url
µµ9 H
;
µµH I
ViewData
·· 
[
·· 
$str
·· '
]
··' (
=
··) *
$str
··+ -
;
··- .
_sessionAuthen
¸¸ 
.
¸¸ 
service_url_link
¸¸ +
=
¸¸, -
$str
¸¸. 0
;
¸¸0 1
if
ºº 
(
ºº 
(
ºº 
ViewData
ºº 
[
ºº 
$str
ºº (
]
ºº( )
+
ºº* +
$str
ºº, .
)
ºº. /
.
ºº/ 0
ToString
ºº0 8
(
ºº8 9
)
ºº9 :
==
ºº; =
$str
ºº> F
)
ººF G
{
»» 
}
½½ 
else
¾¾ 
if
¾¾ 
(
¾¾ 
(
¾¾ 
ViewData
¾¾ 
[
¾¾ 
$str
¾¾ -
]
¾¾- .
+
¾¾/ 0
$str
¾¾1 3
)
¾¾3 4
.
¾¾4 5
ToString
¾¾5 =
(
¾¾= >
)
¾¾> ?
==
¾¾@ B
$str
¾¾C K
)
¾¾K L
{
¿¿ 
}
ÁÁ 
else
ÂÂ 
if
ÂÂ 
(
ÂÂ 
(
ÂÂ 
ViewData
ÂÂ 
[
ÂÂ 
$str
ÂÂ -
]
ÂÂ- .
+
ÂÂ/ 0
$str
ÂÂ1 3
)
ÂÂ3 4
.
ÂÂ4 5
ToString
ÂÂ5 =
(
ÂÂ= >
)
ÂÂ> ?
==
ÂÂ@ B
$str
ÂÂC M
)
ÂÂM N
{
ÃÃ 
return
ÄÄ 
View
ÄÄ 
(
ÄÄ 
$str
ÄÄ &
,
ÄÄ& '
$str
ÄÄ( 0
)
ÄÄ0 1
;
ÄÄ1 2
}
ÅÅ 
else
ÆÆ 
if
ÆÆ 
(
ÆÆ 
(
ÆÆ 
ViewData
ÆÆ 
[
ÆÆ 
$str
ÆÆ -
]
ÆÆ- .
+
ÆÆ/ 0
$str
ÆÆ1 3
)
ÆÆ3 4
.
ÆÆ4 5
ToString
ÆÆ5 =
(
ÆÆ= >
)
ÆÆ> ?
==
ÆÆ@ B
$str
ÆÆC S
)
ÆÆS T
{
ÇÇ 
ViewData
ÈÈ 
[
ÈÈ 
$str
ÈÈ .
]
ÈÈ. /
=
ÈÈ0 1
_sessionAuthen
ÈÈ2 @
.
ÈÈ@ A!
responder_user_name
ÈÈA T
;
ÈÈT U
return
ÊÊ 
View
ÊÊ 
(
ÊÊ 
$str
ÊÊ ,
,
ÊÊ, -
$str
ÊÊ. 6
)
ÊÊ6 7
;
ÊÊ7 8
}
ËË 
else
ÌÌ 
if
ÌÌ 
(
ÌÌ 
(
ÌÌ 
ViewData
ÌÌ 
[
ÌÌ 
$str
ÌÌ -
]
ÌÌ- .
+
ÌÌ/ 0
$str
ÌÌ1 3
)
ÌÌ3 4
.
ÌÌ4 5
ToString
ÌÌ5 =
(
ÌÌ= >
)
ÌÌ> ?
==
ÌÌ@ B
$str
ÌÌC L
)
ÌÌL M
{
ÍÍ 
return
ÏÏ 
View
ÏÏ 
(
ÏÏ 
$str
ÏÏ %
,
ÏÏ% &
$str
ÏÏ' /
)
ÏÏ/ 0
;
ÏÏ0 1
}
ÐÐ 
else
ÑÑ 
if
ÑÑ 
(
ÑÑ 
(
ÑÑ 
ViewData
ÑÑ 
[
ÑÑ 
$str
ÑÑ -
]
ÑÑ- .
+
ÑÑ/ 0
$str
ÑÑ1 3
)
ÑÑ3 4
.
ÑÑ4 5
ToString
ÑÑ5 =
(
ÑÑ= >
)
ÑÑ> ?
==
ÑÑ@ B
$str
ÑÑC V
)
ÑÑV W
{
ÒÒ 
return
ÔÔ 
View
ÔÔ 
(
ÔÔ 
$str
ÔÔ %
,
ÔÔ% &
$str
ÔÔ' /
)
ÔÔ/ 0
;
ÔÔ0 1
}
ÕÕ 
else
ÖÖ 
if
ÖÖ 
(
ÖÖ 
(
ÖÖ 
ViewData
ÖÖ 
[
ÖÖ 
$str
ÖÖ -
]
ÖÖ- .
+
ÖÖ/ 0
$str
ÖÖ1 3
)
ÖÖ3 4
.
ÖÖ4 5
ToString
ÖÖ5 =
(
ÖÖ= >
)
ÖÖ> ?
==
ÖÖ@ B
$str
ÖÖC K
)
ÖÖK L
{
×× 
}
ÙÙ 
return
ÛÛ 
View
ÛÛ 
(
ÛÛ 
)
ÛÛ 
;
ÛÛ 
}
ÜÜ 	
public
ÞÞ 
IActionResult
ÞÞ 
Followup
ÞÞ %
(
ÞÞ% &
)
ÞÞ& '
{
ßß 	
if
àà 
(
àà 
_sessionAuthen
àà 
.
àà 
	role_type
àà (
==
àà) +
$str
àà, .
||
àà/ 1
_sessionAuthen
àà2 @
.
àà@ A
	role_type
ààA J
==
ààK M
null
ààN R
)
ààR S
{
áá 
return
ââ 
RedirectToAction
ââ '
(
ââ' (
$str
ââ( /
,
ââ/ 0
$str
ââ1 8
)
ââ8 9
;
ââ9 :
}
ãã 
_sessionAuthen
åå 
.
åå 
service_api_url
åå *
=
åå+ ,
_IConfiguration
åå- <
[
åå< =
$str
åå= W
]
ååW X
;
ååX Y
if
ææ 
(
ææ 
(
ææ 
_sessionAuthen
ææ 
.
ææ  %
controller_action_befor
ææ  7
+
ææ8 9
$str
ææ: <
)
ææ< =
.
ææ= >
ToString
ææ> F
(
ææF G
)
ææG H
==
ææI K
null
ææL P
)
ææP Q
{
çç 
_sessionAuthen
èè 
.
èè %
controller_action_befor
èè 6
=
èè7 8
$str
èè9 F
;
èèF G
}
éé 
ViewData
ëë 
[
ëë 
$str
ëë #
]
ëë# $
=
ëë% &
_sessionAuthen
ëë' 5
.
ëë5 6
user_display
ëë6 B
;
ëëB C
ViewData
ìì 
[
ìì 
$str
ìì  
]
ìì  !
=
ìì" #
_sessionAuthen
ìì$ 2
.
ìì2 3
	user_name
ìì3 <
;
ìì< =
ViewData
íí 
[
íí 
$str
íí  
]
íí  !
=
íí" #
_sessionAuthen
íí$ 2
.
íí2 3
	role_type
íí3 <
;
íí< =
ViewData
îî 
[
îî 
$str
îî .
]
îî. /
=
îî0 1
_sessionAuthen
îî2 @
.
îî@ A%
controller_action_befor
îîA X
;
îîX Y
ViewData
ïï 
[
ïï 
$str
ïï &
]
ïï& '
=
ïï( )
_sessionAuthen
ïï* 8
.
ïï8 9
service_api_url
ïï9 H
;
ïïH I
ViewData
òò 
[
òò 
$str
òò 
]
òò 
=
òò  !
_sessionAuthen
òò" 0
.
òò0 1
pha_seq
òò1 8
;
òò8 9
return
ôô 
View
ôô 
(
ôô 
)
ôô 
;
ôô 
}
õõ 	
public
öö 
IActionResult
öö 
FollowupUpdate
öö +
(
öö+ ,
)
öö, -
{
÷÷ 	
if
øø 
(
øø 
_sessionAuthen
øø 
.
øø 
	role_type
øø (
==
øø) +
$str
øø, .
||
øø/ 1
_sessionAuthen
øø2 @
.
øø@ A
	role_type
øøA J
==
øøK M
null
øøN R
)
øøR S
{
ùù 
return
úú 
RedirectToAction
úú '
(
úú' (
$str
úú( /
,
úú/ 0
$str
úú1 8
)
úú8 9
;
úú9 :
}
ûû 
_sessionAuthen
ýý 
.
ýý 
service_api_url
ýý *
=
ýý+ ,
_IConfiguration
ýý- <
[
ýý< =
$str
ýý= W
]
ýýW X
;
ýýX Y
if
þþ 
(
þþ 
(
þþ 
_sessionAuthen
þþ 
.
þþ  %
controller_action_befor
þþ  7
+
þþ8 9
$str
þþ: <
)
þþ< =
.
þþ= >
ToString
þþ> F
(
þþF G
)
þþG H
==
þþI K
null
þþL P
)
þþP Q
{
ÿÿ 
_sessionAuthen
€€ 
.
€€ %
controller_action_befor
€€ 6
=
€€7 8
$str
€€9 F
;
€€F G
}
 
ViewData
ƒƒ 
[
ƒƒ 
$str
ƒƒ #
]
ƒƒ# $
=
ƒƒ% &
_sessionAuthen
ƒƒ' 5
.
ƒƒ5 6
user_display
ƒƒ6 B
;
ƒƒB C
ViewData
„„ 
[
„„ 
$str
„„  
]
„„  !
=
„„" #
_sessionAuthen
„„$ 2
.
„„2 3
	user_name
„„3 <
;
„„< =
ViewData
…… 
[
…… 
$str
……  
]
……  !
=
……" #
_sessionAuthen
……$ 2
.
……2 3
	role_type
……3 <
;
……< =
ViewData
†† 
[
†† 
$str
†† .
]
††. /
=
††0 1
_sessionAuthen
††2 @
.
††@ A%
controller_action_befor
††A X
;
††X Y
ViewData
‡‡ 
[
‡‡ 
$str
‡‡ &
]
‡‡& '
=
‡‡( )
_sessionAuthen
‡‡* 8
.
‡‡8 9
service_api_url
‡‡9 H
;
‡‡H I
ViewData
ŠŠ 
[
ŠŠ 
$str
ŠŠ '
]
ŠŠ' (
=
ŠŠ) *
_sessionAuthen
ŠŠ+ 9
.
ŠŠ9 :
pha_sub_software
ŠŠ: J
;
ŠŠJ K
ViewData
‹‹ 
[
‹‹ 
$str
‹‹ 
]
‹‹ 
=
‹‹  !
_sessionAuthen
‹‹" 0
.
‹‹0 1
pha_seq
‹‹1 8
;
‹‹8 9
ViewData
ŒŒ 
[
ŒŒ 
$str
ŒŒ 
]
ŒŒ 
=
ŒŒ  
_sessionAuthen
ŒŒ! /
.
ŒŒ/ 0
pha_no
ŒŒ0 6
;
ŒŒ6 7
ViewData
 
[
 
$str
 !
]
! "
=
# $
_sessionAuthen
% 3
.
3 4

pha_status
4 >
;
> ?
ViewData
ŽŽ 
[
ŽŽ 
$str
ŽŽ *
]
ŽŽ* +
=
ŽŽ, -
_sessionAuthen
ŽŽ. <
.
ŽŽ< =!
responder_user_name
ŽŽ= P
;
ŽŽP Q
return
‘‘ 
RedirectToAction
‘‘ #
(
‘‘# $
$str
‘‘$ 4
,
‘‘4 5
$str
‘‘6 =
)
‘‘= >
;
‘‘> ?
}
’’ 	
public
”” 
IActionResult
”” 
Search
”” #
(
””# $
)
””$ %
{
•• 	
if
–– 
(
–– 
_sessionAuthen
–– 
.
–– 
	role_type
–– (
==
––) +
$str
––, .
||
––/ 1
_sessionAuthen
––2 @
.
––@ A
	role_type
––A J
==
––K M
null
––N R
)
––R S
{
—— 
return
˜˜ 
RedirectToAction
˜˜ '
(
˜˜' (
$str
˜˜( /
,
˜˜/ 0
$str
˜˜1 8
)
˜˜8 9
;
˜˜9 :
}
™™ 
_sessionAuthen
›› 
.
›› 
service_api_url
›› *
=
››+ ,
_IConfiguration
››- <
[
››< =
$str
››= W
]
››W X
;
››X Y
_sessionAuthen
œœ 
.
œœ %
controller_action_befor
œœ 2
=
œœ3 4
$str
œœ5 B
;
œœB C
ViewData
   
[
   
$str
   #
]
  # $
=
  % &
_sessionAuthen
  ' 5
.
  5 6
user_display
  6 B
;
  B C
ViewData
¡¡ 
[
¡¡ 
$str
¡¡  
]
¡¡  !
=
¡¡" #
_sessionAuthen
¡¡$ 2
.
¡¡2 3
	user_name
¡¡3 <
;
¡¡< =
ViewData
¢¢ 
[
¢¢ 
$str
¢¢  
]
¢¢  !
=
¢¢" #
_sessionAuthen
¢¢$ 2
.
¢¢2 3
	role_type
¢¢3 <
;
¢¢< =
ViewData
££ 
[
££ 
$str
££ .
]
££. /
=
££0 1
_sessionAuthen
££2 @
.
££@ A%
controller_action_befor
££A X
;
££X Y
ViewData
¤¤ 
[
¤¤ 
$str
¤¤ &
]
¤¤& '
=
¤¤( )
_sessionAuthen
¤¤* 8
.
¤¤8 9
service_api_url
¤¤9 H
;
¤¤H I
return
¦¦ 
View
¦¦ 
(
¦¦ 
)
¦¦ 
;
¦¦ 
}
§§ 	
public
©© 
IActionResult
©© 
Approve
©© $
(
©©$ %
)
©©% &
{
ªª 	
if
«« 
(
«« 
_sessionAuthen
«« 
.
«« 
	role_type
«« (
==
««) +
$str
««, .
||
««/ 1
_sessionAuthen
««2 @
.
««@ A
	role_type
««A J
==
««K M
null
««N R
)
««R S
{
¬¬ 
return
­­ 
RedirectToAction
­­ '
(
­­' (
$str
­­( /
,
­­/ 0
$str
­­1 8
)
­­8 9
;
­­9 :
}
®® 
_sessionAuthen
°° 
.
°° 
service_api_url
°° *
=
°°+ ,
_IConfiguration
°°- <
[
°°< =
$str
°°= W
]
°°W X
;
°°X Y
_sessionAuthen
±± 
.
±± %
controller_action_befor
±± 2
=
±±3 4
$str
±±5 B
;
±±B C
ViewData
³³ 
[
³³ 
$str
³³ #
]
³³# $
=
³³% &
_sessionAuthen
³³' 5
.
³³5 6
user_display
³³6 B
;
³³B C
ViewData
´´ 
[
´´ 
$str
´´  
]
´´  !
=
´´" #
_sessionAuthen
´´$ 2
.
´´2 3
	user_name
´´3 <
;
´´< =
ViewData
µµ 
[
µµ 
$str
µµ  
]
µµ  !
=
µµ" #
_sessionAuthen
µµ$ 2
.
µµ2 3
	role_type
µµ3 <
;
µµ< =
ViewData
¶¶ 
[
¶¶ 
$str
¶¶ .
]
¶¶. /
=
¶¶0 1
_sessionAuthen
¶¶2 @
.
¶¶@ A%
controller_action_befor
¶¶A X
;
¶¶X Y
ViewData
·· 
[
·· 
$str
·· &
]
··& '
=
··( )
_sessionAuthen
··* 8
.
··8 9
service_api_url
··9 H
;
··H I
ViewData
¹¹ 
[
¹¹ 
$str
¹¹ 
]
¹¹ 
=
¹¹  !
_sessionAuthen
¹¹" 0
.
¹¹0 1
pha_seq
¹¹1 8
;
¹¹8 9
ViewData
ºº 
[
ºº 
$str
ºº #
]
ºº# $
=
ºº% &
_sessionAuthen
ºº' 5
.
ºº5 6
pha_type_doc
ºº6 B
;
ººB C
return
¼¼ 
View
¼¼ 
(
¼¼ 
)
¼¼ 
;
¼¼ 
}
½½ 	
public
ÀÀ 
IActionResult
ÀÀ 
Notification
ÀÀ )
(
ÀÀ) *
)
ÀÀ* +
{
ÁÁ 	
if
ÂÂ 
(
ÂÂ 
_sessionAuthen
ÂÂ 
.
ÂÂ 
	role_type
ÂÂ (
==
ÂÂ) +
$str
ÂÂ, .
||
ÂÂ/ 1
_sessionAuthen
ÂÂ2 @
.
ÂÂ@ A
	role_type
ÂÂA J
==
ÂÂK M
null
ÂÂN R
)
ÂÂR S
{
ÃÃ 
return
ÄÄ 
RedirectToAction
ÄÄ '
(
ÄÄ' (
$str
ÄÄ( /
,
ÄÄ/ 0
$str
ÄÄ1 8
)
ÄÄ8 9
;
ÄÄ9 :
}
ÅÅ 
_sessionAuthen
ÇÇ 
.
ÇÇ 
service_api_url
ÇÇ *
=
ÇÇ+ ,
_IConfiguration
ÇÇ- <
[
ÇÇ< =
$str
ÇÇ= W
]
ÇÇW X
;
ÇÇX Y
_sessionAuthen
ÈÈ 
.
ÈÈ %
controller_action_befor
ÈÈ 2
=
ÈÈ3 4
$str
ÈÈ5 B
;
ÈÈB C
ViewData
ÊÊ 
[
ÊÊ 
$str
ÊÊ #
]
ÊÊ# $
=
ÊÊ% &
_sessionAuthen
ÊÊ' 5
.
ÊÊ5 6
user_display
ÊÊ6 B
;
ÊÊB C
ViewData
ËË 
[
ËË 
$str
ËË  
]
ËË  !
=
ËË" #
_sessionAuthen
ËË$ 2
.
ËË2 3
	user_name
ËË3 <
;
ËË< =
ViewData
ÌÌ 
[
ÌÌ 
$str
ÌÌ  
]
ÌÌ  !
=
ÌÌ" #
_sessionAuthen
ÌÌ$ 2
.
ÌÌ2 3
	role_type
ÌÌ3 <
;
ÌÌ< =
ViewData
ÍÍ 
[
ÍÍ 
$str
ÍÍ .
]
ÍÍ. /
=
ÍÍ0 1
_sessionAuthen
ÍÍ2 @
.
ÍÍ@ A%
controller_action_befor
ÍÍA X
;
ÍÍX Y
ViewData
ÎÎ 
[
ÎÎ 
$str
ÎÎ &
]
ÎÎ& '
=
ÎÎ( )
_sessionAuthen
ÎÎ* 8
.
ÎÎ8 9
service_api_url
ÎÎ9 H
;
ÎÎH I
ViewData
ÐÐ 
[
ÐÐ 
$str
ÐÐ 
]
ÐÐ 
=
ÐÐ  !
$str
ÐÐ" $
;
ÐÐ$ %
ViewData
ÑÑ 
[
ÑÑ 
$str
ÑÑ #
]
ÑÑ# $
=
ÑÑ% &
$str
ÑÑ' )
;
ÑÑ) *
return
ÓÓ 
View
ÓÓ 
(
ÓÓ 
)
ÓÓ 
;
ÓÓ 
}
ÔÔ 	
[
ÖÖ 	
HttpPost
ÖÖ	 
]
ÖÖ 
public
×× 
async
×× 
Task
×× 
<
×× 
IActionResult
×× '
>
××' (
set_session_doc
××) 8
(
××8 9
[
××9 :
FromBody
××: B
]
××B C&
LoadSessionDataViewModel
××D \
model
××] b
)
××b c
{
ØØ 	
_sessionAuthen
ÙÙ 
.
ÙÙ 
service_api_url
ÙÙ *
=
ÙÙ+ ,
_IConfiguration
ÙÙ- <
[
ÙÙ< =
$str
ÙÙ= W
]
ÙÙW X
;
ÙÙX Y
_sessionAuthen
ÚÚ 
.
ÚÚ %
controller_action_befor
ÚÚ 2
=
ÚÚ3 4
model
ÚÚ5 :
.
ÚÚ: ;%
controller_action_befor
ÚÚ; R
;
ÚÚR S
_sessionAuthen
ÛÛ 
.
ÛÛ 
pha_seq
ÛÛ "
=
ÛÛ# $
model
ÛÛ% *
.
ÛÛ* +
pha_seq
ÛÛ+ 2
;
ÛÛ2 3
_sessionAuthen
ÜÜ 
.
ÜÜ 
pha_no
ÜÜ !
=
ÜÜ" #
model
ÜÜ$ )
.
ÜÜ) *
pha_no
ÜÜ* 0
;
ÜÜ0 1
_sessionAuthen
ÝÝ 
.
ÝÝ 

pha_status
ÝÝ %
=
ÝÝ& '
model
ÝÝ( -
.
ÝÝ- .

pha_status
ÝÝ. 8
;
ÝÝ8 9
_sessionAuthen
ÞÞ 
.
ÞÞ 
pha_type_doc
ÞÞ '
=
ÞÞ( )
model
ÞÞ* /
.
ÞÞ/ 0
pha_type_doc
ÞÞ0 <
;
ÞÞ< =
ViewData
áá 
[
áá 
$str
áá #
]
áá# $
=
áá% &
_sessionAuthen
áá' 5
.
áá5 6
user_display
áá6 B
;
ááB C
ViewData
ââ 
[
ââ 
$str
ââ  
]
ââ  !
=
ââ" #
_sessionAuthen
ââ$ 2
.
ââ2 3
	user_name
ââ3 <
;
ââ< =
ViewData
ãã 
[
ãã 
$str
ãã  
]
ãã  !
=
ãã" #
_sessionAuthen
ãã$ 2
.
ãã2 3
	role_type
ãã3 <
;
ãã< =
ViewData
åå 
[
åå 
$str
åå 
]
åå 
=
åå  !
_sessionAuthen
åå" 0
.
åå0 1
pha_seq
åå1 8
;
åå8 9
ViewData
ææ 
[
ææ 
$str
ææ 
]
ææ 
=
ææ  
_sessionAuthen
ææ! /
.
ææ/ 0
pha_no
ææ0 6
;
ææ6 7
ViewData
çç 
[
çç 
$str
çç !
]
çç! "
=
çç# $
_sessionAuthen
çç% 3
.
çç3 4

pha_status
çç4 >
;
çç> ?
ViewData
èè 
[
èè 
$str
èè #
]
èè# $
=
èè% &
_sessionAuthen
èè' 5
.
èè5 6
pha_type_doc
èè6 B
;
èèB C
ViewData
éé 
[
éé 
$str
éé .
]
éé. /
=
éé0 1
_sessionAuthen
éé2 @
.
éé@ A%
controller_action_befor
ééA X
;
ééX Y
ViewData
êê 
[
êê 
$str
êê &
]
êê& '
=
êê( )
_sessionAuthen
êê* 8
.
êê8 9
service_api_url
êê9 H
;
êêH I
LoginViewModel
ìì 
res_page
ìì #
=
ìì$ %
new
ìì& )
LoginViewModel
ìì* 8
(
ìì8 9
)
ìì9 :
;
ìì: ;
res_page
íí 
.
íí 
msg
íí 
=
íí 
$str
íí 
;
íí 
return
îî 
Ok
îî 
(
îî 
res_page
îî 
)
îî 
;
îî  
}
ïï 	
[
òò 	
HttpPost
òò	 
]
òò 
public
óó 
async
óó 
Task
óó 
<
óó 
IActionResult
óó '
>
óó' ( 
follow_back_search
óó) ;
(
óó; <&
LoadSessionDataViewModel
óó< T
model
óóU Z
)
óóZ [
{
ôô 	
_sessionAuthen
õõ 
.
õõ 
pha_seq
õõ "
=
õõ# $
$str
õõ% '
;
õõ' (
_sessionAuthen
öö 
.
öö 
pha_type_doc
öö '
=
öö( )
$str
öö* 2
;
öö2 3
_sessionAuthen
÷÷ 
.
÷÷ 
	role_type
÷÷ $
=
÷÷% &
_sessionAuthen
÷÷' 5
.
÷÷5 6
	role_type
÷÷6 ?
;
÷÷? @
LoginViewModel
ùù 
res_page
ùù #
=
ùù$ %
new
ùù& )
LoginViewModel
ùù* 8
(
ùù8 9
)
ùù9 :
;
ùù: ;
res_page
úú 
.
úú 
seq
úú 
=
úú 
_sessionAuthen
úú )
.
úú) *
pha_seq
úú* 1
;
úú1 2
return
üü 
Ok
üü 
(
üü 
res_page
üü 
)
üü 
;
üü  
}
ýý 	
[
ÿÿ 	
HttpPost
ÿÿ	 
]
ÿÿ 
public
€€ 
async
€€ 
Task
€€ 
<
€€ 
IActionResult
€€ '
>
€€' (
case_new_document
€€) :
(
€€: ;
[
€€; <
FromBody
€€< D
]
€€D E&
LoadSessionDataViewModel
€€F ^
model
€€_ d
)
€€d e
{
 	
_sessionAuthen
‚‚ 
.
‚‚ 
pha_seq
‚‚ "
=
‚‚# $
model
‚‚% *
.
‚‚* +
pha_seq
‚‚+ 2
;
‚‚2 3
_sessionAuthen
ƒƒ 
.
ƒƒ 
pha_type_doc
ƒƒ '
=
ƒƒ( )
model
ƒƒ* /
.
ƒƒ/ 0
pha_type_doc
ƒƒ0 <
;
ƒƒ< =
_sessionAuthen
„„ 
.
„„ 
	role_type
„„ $
=
„„% &
_sessionAuthen
„„' 5
.
„„5 6
	role_type
„„6 ?
;
„„? @
LoginViewModel
†† 
res_page
†† #
=
††$ %
new
††& )
LoginViewModel
††* 8
(
††8 9
)
††9 :
;
††: ;
res_page
‡‡ 
.
‡‡ 
seq
‡‡ 
=
‡‡ 
_sessionAuthen
‡‡ )
.
‡‡) *
pha_seq
‡‡* 1
;
‡‡1 2
return
‰‰ 
Ok
‰‰ 
(
‰‰ 
res_page
‰‰ 
)
‰‰ 
;
‰‰  
}
ŠŠ 	
[
ŒŒ 	
HttpPost
ŒŒ	 
]
ŒŒ 
public
 
async
 
Task
 
<
 
IActionResult
 '
>
' (
	next_page
) 2
(
2 3
[
3 4
FromBody
4 <
]
< =&
LoadSessionDataViewModel
> V
model
W \
)
\ ]
{
ŽŽ 	
_sessionAuthen
 
.
 
pha_type_doc
 '
=
( )
(
* +
model
+ 0
.
0 1
pha_type_doc
1 =
+
> ?
$str
@ B
)
B C
;
C D
_sessionAuthen
 
.
 
	role_type
 $
=
% &
_sessionAuthen
' 5
.
5 6
	role_type
6 ?
;
? @
LoginViewModel
’’ 
res_page
’’ #
=
’’$ %
new
’’& )
LoginViewModel
’’* 8
(
’’8 9
)
’’9 :
;
’’: ;
if
““ 
(
““ 
_sessionAuthen
““ 
.
““ 
pha_type_doc
““ +
==
““, .
$str
““/ 5
)
““5 6
{
”” 
res_page
•• 
.
•• 
page
•• 
=
•• 
model
••  %
.
••% &%
controller_action_befor
••& =
;
••= >
}
–– 
else
—— 
if
—— 
(
—— 
_sessionAuthen
—— #
.
——# $
pha_type_doc
——$ 0
==
——1 3
$str
——4 <
)
——< =
{
˜˜ 
_sessionAuthen
™™ 
.
™™ 
pha_seq
™™ &
=
™™' (
$str
™™) +
;
™™+ ,
_sessionAuthen
šš 
.
šš 
pha_no
šš %
=
šš& '
$str
šš( *
;
šš* +
_sessionAuthen
›› 
.
›› 

pha_status
›› )
=
››* +
$str
››, 0
;
››0 1
_sessionAuthen
œœ 
.
œœ %
controller_action_befor
œœ 6
=
œœ7 8
(
œœ9 :
model
œœ: ?
.
œœ? @
pha_sub_software
œœ@ P
+
œœQ R
$str
œœS U
)
œœU V
;
œœV W
res_page
žž 
.
žž 
page
žž 
=
žž 
model
žž  %
.
žž% &
pha_sub_software
žž& 6
+
žž7 8
$str
žž9 A
;
žžA B
}
ŸŸ 
else
   
if
   
(
   
_sessionAuthen
   #
.
  # $
pha_type_doc
  $ 0
==
  1 3
$str
  4 D
)
  D E
{
¡¡ 
_sessionAuthen
¢¢ 
.
¢¢ %
controller_action_befor
¢¢ 6
=
¢¢7 8
(
¢¢9 :
model
¢¢: ?
.
¢¢? @
pha_sub_software
¢¢@ P
+
¢¢Q R
$str
¢¢S U
)
¢¢U V
;
¢¢V W
_sessionAuthen
££ 
.
££ 
pha_sub_software
££ /
=
££0 1
(
££2 3
model
££3 8
.
££8 9
pha_sub_software
££9 I
+
££J K
$str
££L N
)
££N O
;
££O P
_sessionAuthen
¤¤ 
.
¤¤ 
pha_seq
¤¤ &
=
¤¤' (
(
¤¤) *
model
¤¤* /
.
¤¤/ 0
pha_seq
¤¤0 7
+
¤¤8 9
$str
¤¤: <
)
¤¤< =
;
¤¤= >
_sessionAuthen
¥¥ 
.
¥¥ 
pha_no
¥¥ %
=
¥¥& '
(
¥¥( )
model
¥¥) .
.
¥¥. /
pha_no
¥¥/ 5
+
¥¥6 7
$str
¥¥8 :
)
¥¥: ;
;
¥¥; <
_sessionAuthen
¦¦ 
.
¦¦ 

pha_status
¦¦ )
=
¦¦* +
(
¦¦, -
model
¦¦- 2
.
¦¦2 3

pha_status
¦¦3 =
+
¦¦> ?
$str
¦¦@ B
)
¦¦B C
;
¦¦C D
_sessionAuthen
§§ 
.
§§ !
responder_user_name
§§ 2
=
§§3 4
(
§§5 6
model
§§6 ;
.
§§; <!
responder_user_name
§§< O
+
§§P Q
$str
§§R T
)
§§T U
;
§§U V
res_page
©© 
.
©© 
page
©© 
=
©© 
model
©©  %
.
©©% &
pha_sub_software
©©& 6
+
©©7 8
$str
©©9 J
;
©©J K
}
ªª 
else
«« 
if
«« 
(
«« 
_sessionAuthen
«« #
.
««# $
pha_type_doc
««$ 0
==
««1 3
$str
««4 :
)
««: ;
{
¬¬ 
_sessionAuthen
­­ 
.
­­ %
controller_action_befor
­­ 6
=
­­7 8
(
­­9 :
$str
­­: B
)
­­B C
;
­­C D
_sessionAuthen
®® 
.
®® 
pha_seq
®® &
=
®®' (
(
®®) *
model
®®* /
.
®®/ 0
pha_seq
®®0 7
+
®®8 9
$str
®®: <
)
®®< =
;
®®= >
res_page
°° 
.
°° 
page
°° 
=
°° 
model
°°  %
.
°°% &
pha_sub_software
°°& 6
+
°°7 8
$str
°°9 A
;
°°A B
}
²² 
return
´´ 
Ok
´´ 
(
´´ 
res_page
´´ 
)
´´ 
;
´´  
}
µµ 	
public
¹¹ 
IActionResult
¹¹ 
Privacy
¹¹ $
(
¹¹$ %
)
¹¹% &
{
ºº 	
return
»» 
View
»» 
(
»» 
)
»» 
;
»» 
}
¼¼ 	
[
¾¾ 	
ResponseCache
¾¾	 
(
¾¾ 
Duration
¾¾ 
=
¾¾  !
$num
¾¾" #
,
¾¾# $
Location
¾¾% -
=
¾¾. /#
ResponseCacheLocation
¾¾0 E
.
¾¾E F
None
¾¾F J
,
¾¾J K
NoStore
¾¾L S
=
¾¾T U
true
¾¾V Z
)
¾¾Z [
]
¾¾[ \
public
¿¿ 
IActionResult
¿¿ 
Error
¿¿ "
(
¿¿" #
)
¿¿# $
{
ÀÀ 	
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
new
ÂÂ 
ErrorViewModel
ÂÂ "
{
ÃÃ 
	RequestId
ÄÄ 
=
ÄÄ 
Activity
ÄÄ  (
.
ÄÄ( )
Current
ÄÄ) 0
?
ÄÄ0 1
.
ÄÄ1 2
Id
ÄÄ2 4
??
ÄÄ5 7
HttpContext
ÄÄ8 C
.
ÄÄC D
TraceIdentifier
ÄÄD S
}
ÅÅ 
)
ÆÆ 
;
ÆÆ 
}
ÇÇ 	
}
ÈÈ 
}ÉÉ ƒP
M/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/MasterController.cs
	namespace

 	
dotnet6_epha_web


 
.

 
Controllers

 &
{ 
public 

class 
MasterController !
:" #

Controller$ .
{ 
private 
readonly 
ILogger  
<  !
MasterController! 1
>1 2
_logger3 :
;: ;
public 
readonly 
IConfiguration &
_IConfiguration' 6
;6 7
public 
readonly 
sessionAuthen %
_sessionAuthen& 4
;4 5
public 
MasterController 
(  
ILogger 
< 
MasterController $
>$ %
logger& ,
,, -
sessionAuthen 
sessionAuthen '
,' (
IConfiguration 
IConfiguration )
) 	
{ 	
_sessionAuthen 
= 
sessionAuthen *
;* +
_logger 
= 
logger 
; 
_IConfiguration 
= 
IConfiguration ,
;, -
} 	
private 
void 
_PageDef 
( 
) 
{ 	
_sessionAuthen 
. 
service_api_url *
=+ ,
_IConfiguration- <
[< =
$str= W
]W X
;X Y
_sessionAuthen   
.   #
controller_action_befor   2
=  3 4
$str  5 C
;  C D
ViewData"" 
["" 
$str"" #
]""# $
=""% &
_sessionAuthen""' 5
.""5 6
user_display""6 B
;""B C
ViewData## 
[## 
$str##  
]##  !
=##" #
_sessionAuthen##$ 2
.##2 3
	user_name##3 <
;##< =
ViewData$$ 
[$$ 
$str$$  
]$$  !
=$$" #
_sessionAuthen$$$ 2
.$$2 3
	role_type$$3 <
;$$< =
ViewData&& 
[&& 
$str&& 
]&& 
=&&  !
_sessionAuthen&&" 0
.&&0 1
pha_seq&&1 8
;&&8 9
ViewData'' 
['' 
$str'' 
]'' 
=''  
_sessionAuthen''! /
.''/ 0
pha_no''0 6
;''6 7
ViewData(( 
[(( 
$str(( !
]((! "
=((# $
_sessionAuthen((% 3
.((3 4

pha_status((4 >
;((> ?
ViewData)) 
[)) 
$str)) #
]))# $
=))% &
_sessionAuthen))' 5
.))5 6
pha_type_doc))6 B
;))B C
ViewData** 
[** 
$str** .
]**. /
=**0 1
_sessionAuthen**2 @
.**@ A#
controller_action_befor**A X
;**X Y
ViewData++ 
[++ 
$str++ &
]++& '
=++( )
_sessionAuthen++* 8
.++8 9
service_api_url++9 H
;++H I
ViewData-- 
[-- 
$str-- '
]--' (
=--) *
$str--+ -
;--- .
_sessionAuthen.. 
... 
service_url_link.. +
=.., -
$str... 0
;..0 1
}// 	
public00 
IActionResult00 
Index00 "
(00" #
)00# $
{11 	
_PageDef22 
(22 
)22 
;22 
return44 
View44 
(44 
)44 
;44 
}55 	
public77 
IActionResult77  
AuthorizationSetting77 1
(771 2
)772 3
{88 	
_PageDef99 
(99 
)99 
;99 
return;; 
View;; 
(;; 
);; 
;;; 
}<< 	
public== 
IActionResult== 

ManageUser== '
(==' (
)==( )
{>> 	
_PageDef?? 
(?? 
)?? 
;?? 
returnAA 
ViewAA 
(AA 
)AA 
;AA 
}BB 	
publicCC 
IActionResultCC 

SystemwideCC '
(CC' (
)CC( )
{DD 	
_PageDefEE 
(EE 
)EE 
;EE 
returnGG 
ViewGG 
(GG 
)GG 
;GG 
}HH 	
publicII 
IActionResultII 
StorageLocationII ,
(II, -
)II- .
{JJ 	
_PageDefKK 
(KK 
)KK 
;KK 
returnMM 
ViewMM 
(MM 
)MM 
;MM 
}NN 	
publicOO 
IActionResultOO 
AreaOO !
(OO! "
)OO" #
{PP 	
_PageDefQQ 
(QQ 
)QQ 
;QQ 
returnSS 
ViewSS 
(SS 
)SS 
;SS 
}TT 	
publicUU 
IActionResultUU 
TocUU  
(UU  !
)UU! "
{VV 	
_PageDefWW 
(WW 
)WW 
;WW 
returnYY 
ViewYY 
(YY 
)YY 
;YY 
}ZZ 	
public[[ 
IActionResult[[ 
BusinessUnit[[ )
([[) *
)[[* +
{\\ 	
_PageDef]] 
(]] 
)]] 
;]] 
return__ 
View__ 
(__ 
)__ 
;__ 
}`` 	
publicaa 
IActionResultaa 
FunctionalLocationaa /
(aa/ 0
)aa0 1
{bb 	
_PageDefcc 
(cc 
)cc 
;cc 
returnee 
Viewee 
(ee 
)ee 
;ee 
}ff 	
publicgg 
IActionResultgg 

GuideWordsgg '
(gg' (
)gg( )
{hh 	
_PageDefii 
(ii 
)ii 
;ii 
returnkk 
Viewkk 
(kk 
)kk 
;kk 
}ll 	
publicmm 
IActionResultmm 
Whatifmm #
(mm# $
)mm$ %
{nn 	
_PageDefoo 
(oo 
)oo 
;oo 
returnqq 
Viewqq 
(qq 
)qq 
;qq 
}rr 	
publicss 
IActionResultss 
Jseass !
(ss! "
)ss" #
{tt 	
_PageDefuu 
(uu 
)uu 
;uu 
returnww 
Viewww 
(ww 
)ww 
;ww 
}xx 	
publiczz 
IActionResultzz 

HazardTypezz '
(zz' (
)zz( )
{{{ 	
_PageDef|| 
(|| 
)|| 
;|| 
return~~ 
View~~ 
(~~ 
)~~ 
;~~ 
} 	
public
€€ 
IActionResult
€€ 
HazardRiskFactors
€€ .
(
€€. /
)
€€/ 0
{
 	
_PageDef
‚‚ 
(
‚‚ 
)
‚‚ 
;
‚‚ 
return
„„ 
View
„„ 
(
„„ 
)
„„ 
;
„„ 
}
…… 	
public
†† 
IActionResult
†† 
WorkerGroupList
†† ,
(
††, -
)
††- .
{
‡‡ 	
_PageDef
ˆˆ 
(
ˆˆ 
)
ˆˆ 
;
ˆˆ 
return
ŠŠ 
View
ŠŠ 
(
ŠŠ 
)
ŠŠ 
;
ŠŠ 
}
‹‹ 	
public
ŒŒ 
IActionResult
ŒŒ 
WorkerGroupSet
ŒŒ +
(
ŒŒ+ ,
)
ŒŒ, -
{
 	
_PageDef
ŽŽ 
(
ŽŽ 
)
ŽŽ 
;
ŽŽ 
return
 
View
 
(
 
)
 
;
 
}
‘‘ 	
public
’’ 
IActionResult
’’ 
FrequencyLevel
’’ +
(
’’+ ,
)
’’, -
{
““ 	
_PageDef
”” 
(
”” 
)
”” 
;
”” 
return
–– 
View
–– 
(
–– 
)
–– 
;
–– 
}
—— 	
public
˜˜ 
IActionResult
˜˜ #
CompareExposureRating
˜˜ 2
(
˜˜2 3
)
˜˜3 4
{
™™ 	
_PageDef
šš 
(
šš 
)
šš 
;
šš 
return
œœ 
View
œœ 
(
œœ 
)
œœ 
;
œœ 
}
 	
public
žž 
IActionResult
žž &
CompareInitialRiskRating
žž 5
(
žž5 6
)
žž6 7
{
ŸŸ 	
_PageDef
   
(
   
)
   
;
   
return
¢¢ 
View
¢¢ 
(
¢¢ 
)
¢¢ 
;
¢¢ 
}
££ 	
public
¦¦ 
IActionResult
¦¦ 
Privacy
¦¦ $
(
¦¦$ %
)
¦¦% &
{
§§ 	
return
¨¨ 
View
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
}
©© 	
[
«« 	
ResponseCache
««	 
(
«« 
Duration
«« 
=
««  !
$num
««" #
,
««# $
Location
««% -
=
««. /#
ResponseCacheLocation
««0 E
.
««E F
None
««F J
,
««J K
NoStore
««L S
=
««T U
true
««V Z
)
««Z [
]
««[ \
public
¬¬ 
IActionResult
¬¬ 
Error
¬¬ "
(
¬¬" #
)
¬¬# $
{
­­ 	
return
®® 
View
®® 
(
®® 
new
®® 
ErrorViewModel
®® *
{
®®+ ,
	RequestId
®®- 6
=
®®7 8
Activity
®®9 A
.
®®A B
Current
®®B I
?
®®I J
.
®®J K
Id
®®K M
??
®®N P
HttpContext
®®Q \
.
®®\ ]
TraceIdentifier
®®] l
}
®®m n
)
®®n o
;
®®o p
}
¯¯ 	
}
°° 
}±± ÕÀ
L/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/LoginController.cs
	namespace 	
dotnet6_epha_web
 
. 
Controllers &
;& '
public 
class 
LoginController 
: 

Controller )
{ 
private 
readonly 
ILogger 
< 
LoginController ,
>, -
_logger. 5
;5 6
public 

readonly 
IConfiguration "
_IConfiguration# 2
;2 3
public 

readonly 
sessionAuthen !
_sessionAuthen" 0
;0 1
public 

string 
	token_doc 
{ 
get 
{ 
return 
_sessionAuthen #
.# $
	token_doc$ -
;- .
}/ 0
set 
{ 
_sessionAuthen 
. 
	token_doc &
=' (
value) .
;. /
}0 1
} 
public 

string 
	user_name 
{ 
get 
{ 
return 
_sessionAuthen #
.# $
	user_name$ -
;- .
}/ 0
set 
{ 
_sessionAuthen 
. 
	user_name &
=' (
value) .
;. /
}0 1
} 
public   

bool   
isLogin   
{!! 
get"" 
{"" 
return"" 
string"" 
."" 
IsNullOrEmpty"" )
("") *
	user_name""* 3
)""3 4
;""4 5
}""6 7
}## 
private%% 
void%% 
destroySession%% 
(%%  
)%%  !
{&& 
if'' 

('' 
isLogin'' 
=='' 
false'' 
)'' 
{(( 	
HttpContext)) 
.)) 
Session)) 
.))  
Clear))  %
())% &
)))& '
;))' (
}** 	
}++ 
private-- 
string-- 
service_url_link-- #
;--# $
private.. 
string.. 
service_api_url.. "
;.." #
private// 
string// 
apiLog// 
;// 
private00 
string00 
	autoLogin00 
;00 
private11 
string11 
pathimg11 
;11 
private22 
string22 
BaseURL22 
{33 
get44 
{44 
return44 
_IConfiguration44 $
[44$ %
$str44% .
]44. /
??440 2
$str443 5
;445 6
}447 8
}55 
private66 
string66 

SignoutURL66 
{77 
get88 
{88 
return88 
_IConfiguration88 $
[88$ %
$str88% 1
]881 2
??883 5
$str886 8
;888 9
}88: ;
}99 
private:: 
string:: 
AuthURL:: 
{;; 
get<< 
{== 	
return>> 
!>> 
string>> 
.>> 
IsNullOrEmpty>> (
(>>( )
_IConfiguration>>) 8
[>>8 9
$str>>9 B
]>>B C
)>>C D
??? 
_IConfiguration?? !
[??! "
$str??" +
]??+ ,
.??, -
ToString??- 5
(??5 6
)??6 7
.??7 8
Replace??8 ?
(??? @
$str??@ P
,??P Q
BaseURL??R Y
+??Z [
$str??\ c
)??c d
:@@ 
$str@@ 
;@@ 
}AA 	
}BB 
privateCC 
stringCC 

loginAzureCC 
{DD 
getFF 
{FF 
returnFF 
$strFF 
;FF 
}FF 
}GG 
privateHH 
staticHH 
stringHH 
DecryptDataWithAesHH ,
(HH, -
stringII 

cipherTextII 
,II 
stringJJ 
	keyBase64JJ 
,JJ 
stringKK 
vectorBase64KK 
)LL 
{MM 
usingNN 
(NN 
AesNN 
aesAlgorithmNN 
=NN  !
AesNN" %
.NN% &
CreateNN& ,
(NN, -
)NN- .
)NN. /
{OO 	
aesAlgorithmPP 
.PP 
KeyPP 
=PP 
ConvertPP &
.PP& '
FromBase64StringPP' 7
(PP7 8
	keyBase64PP8 A
)PPA B
;PPB C
aesAlgorithmQQ 
.QQ 
IVQQ 
=QQ 
ConvertQQ %
.QQ% &
FromBase64StringQQ& 6
(QQ6 7
vectorBase64QQ7 C
)QQC D
;QQD E
ConsoleSS 
.SS 
	WriteLineSS 
(SS 
$"SS  
$strSS  2
{SS2 3
aesAlgorithmSS3 ?
.SS? @
ModeSS@ D
}SSD E
"SSE F
)SSF G
;SSG H
ConsoleTT 
.TT 
	WriteLineTT 
(TT 
$"TT  
$strTT  2
{TT2 3
aesAlgorithmTT3 ?
.TT? @
PaddingTT@ G
}TTG H
"TTH I
)TTI J
;TTJ K
ConsoleUU 
.UU 
	WriteLineUU 
(UU 
$"UU  
$strUU  /
{UU/ 0
aesAlgorithmUU0 <
.UU< =
KeySizeUU= D
}UUD E
"UUE F
)UUF G
;UUG H
ConsoleVV 
.VV 
	WriteLineVV 
(VV 
$"VV  
$strVV  1
{VV1 2
aesAlgorithmVV2 >
.VV> ?
	BlockSizeVV? H
}VVH I
"VVI J
)VVJ K
;VVK L
ICryptoTransformYY 
	decryptorYY &
=YY' (
aesAlgorithmYY) 5
.YY5 6
CreateDecryptorYY6 E
(YYE F
)YYF G
;YYG H
byte[[ 
[[[ 
][[ 
cipher[[ 
=[[ 
Convert[[ #
.[[# $
FromBase64String[[$ 4
([[4 5

cipherText[[5 ?
)[[? @
;[[@ A
using^^ 
(^^ 
MemoryStream^^ 
ms^^  "
=^^# $
new^^% (
MemoryStream^^) 5
(^^5 6
cipher^^6 <
)^^< =
)^^= >
{__ 
using`` 
(`` 
CryptoStream`` #
cs``$ &
=``' (
new``) ,
CryptoStream``- 9
(``9 :
ms``: <
,``< =
	decryptor``> G
,``G H
CryptoStreamMode``I Y
.``Y Z
Read``Z ^
)``^ _
)``_ `
{aa 
usingbb 
(bb 
StreamReaderbb '
srbb( *
=bb+ ,
newbb- 0
StreamReaderbb1 =
(bb= >
csbb> @
)bb@ A
)bbA B
{cc 
returndd 
srdd !
.dd! "
	ReadToEnddd" +
(dd+ ,
)dd, -
;dd- .
}ee 
}ff 
}gg 
}hh 	
}ii 
publicjj 

	DataTablejj 
ConvertJSONresultjj &
(jj& '
Stringjj' -
jsperjj. 3
)jj3 4
{kk 
	DataTablell 
_dtJsonll 
=ll 
(ll 
	DataTablell &
)ll& '
JsonConvertll' 2
.ll2 3
DeserializeObjectll3 D
(llD E
jsperllE J
,llJ K
typeofllL R
(llR S
	DataTablellS \
)ll\ ]
)ll] ^
;ll^ _
trymm 
{nn 	
ifoo 
(oo 
_dtJsonoo 
!=oo 
nulloo 
)oo  
{pp 
ifqq 
(qq 
_dtJsonqq 
.qq 
Rowsqq  
.qq  !
Countqq! &
>qq' (
$numqq) *
)qq* +
{qq, -
ifqq. 0
(qq1 2
_dtJsonqq2 9
.qq9 :
Rowsqq: >
[qq> ?
$numqq? @
]qq@ A
[qqA B
$strqqB S
]qqS T
.qqT U
ToStringqqU ]
(qq] ^
)qq^ _
==qq` b
$strqqc i
)qqi j
{qqk l
_dtJsonqqm t
.qqt u
Rowsqqu y
[qqy z
$numqqz {
]qq{ |
.qq| }
Delete	qq} ƒ
(
qqƒ „
)
qq„ …
;
qq… †
_dtJson
qq‡ Ž
.
qqŽ 
AcceptChanges
qq œ
(
qqœ 
)
qq ž
;
qqž Ÿ
}
qq  ¡
}
qq¢ £
_dtJsonrr 
.rr 
Columnsrr 
.rr  
Removerr  &
(rr& '
$strrr' 8
)rr8 9
;rr9 :
_dtJsonrr; B
.rrB C
AcceptChangesrrC P
(rrP Q
)rrQ R
;rrR S
}ss 
}tt 	
catchuu 
{uu 
}uu 
returnww 
_dtJsonww 
;ww 
}xx 
private|| 
WSSoaps|| 
_WSSoaps|| 
;|| 
public~~ 

LoginController~~ 
(~~ 
ILogger 
< 
LoginController 
>  
logger! '
,' (
IConfiguration
€€ 
IConfiguration
€€ %
,
€€% &
sessionAuthen
 
sessionAuthen
 #
,
# $
WSSoaps
‚‚ 
WSSoaps
‚‚ 
)
ƒƒ 
{
„„ 
_logger
…… 
=
…… 
logger
…… 
;
…… 
_IConfiguration
†† 
=
†† 
IConfiguration
†† (
;
††( )
_IConfiguration
‡‡ 
=
‡‡ 
IConfiguration
‡‡ (
;
‡‡( )
service_url_link
‰‰ 
=
‰‰ 
_IConfiguration
‰‰ *
[
‰‰* +
$str
‰‰+ F
]
‰‰F G
;
‰‰G H
service_api_url
ŠŠ 
=
ŠŠ 
_IConfiguration
ŠŠ )
[
ŠŠ) *
$str
ŠŠ* D
]
ŠŠD E
;
ŠŠE F
apiLog
‹‹ 
=
‹‹ 
_IConfiguration
‹‹  
[
‹‹  !
$str
‹‹! 3
]
‹‹3 4
;
‹‹4 5
_sessionAuthen
 
=
 
sessionAuthen
 &
;
& '
_WSSoaps
ŽŽ 
=
ŽŽ 
WSSoaps
ŽŽ 
;
ŽŽ 
	autoLogin
 
=
 
_IConfiguration
 #
[
# $
$str
$ /
]
/ 0
;
0 1
pathimg
 
=
 
_IConfiguration
 !
[
! "
$str
" +
]
+ ,
;
, -
}
‘‘ 
public
““ 

void
““ 
defineStart
““ 
(
““ 
)
““ 
{
”” 
ViewBag
•• 
.
•• 
perfex
•• 
=
•• 
$str
•• 
;
•• 
ViewBag
–– 
.
–– 
email
–– 
=
–– 
$str
–– 
;
–– 
ViewBag
—— 
.
—— 
pathname
—— 
=
—— 
$str
—— "
;
——" #
ViewBag
˜˜ 
.
˜˜ 

loginAzure
˜˜ 
=
˜˜ 

loginAzure
˜˜ '
;
˜˜' (
ViewBag
™™ 
.
™™ 
	autoLogin
™™ 
=
™™ 
	autoLogin
™™ %
;
™™% &
ViewBag
›› 
.
›› 
endpoint
›› 
=
›› 
service_api_url
›› *
;
››* +
ViewBag
œœ 
.
œœ 
service_url_link
œœ  
=
œœ! "
service_url_link
œœ# 3
;
œœ3 4
}
 
public
ŸŸ 

async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
IActionResult
ŸŸ #
>
ŸŸ# $
Index
ŸŸ% *
(
ŸŸ* +
string
ŸŸ+ 1
keyToken
ŸŸ2 :
=
ŸŸ; <
$str
ŸŸ= ?
)
ŸŸ? @
{
   
defineStart
¡¡ 
(
¡¡ 
)
¡¡ 
;
¡¡ 
return
££ 
View
££ 
(
££ 
)
££ 
;
££ 
}
 
public
ƒƒ 

IActionResult
ƒƒ 
Dummy
ƒƒ 
(
ƒƒ 
)
ƒƒ  
{
„„ 
defineStart
…… 
(
…… 
)
…… 
;
…… 
destroySession
†† 
(
†† 
)
†† 
;
†† 
ViewBag
ˆˆ 
.
ˆˆ 
endpoint
ˆˆ 
=
ˆˆ 
service_api_url
ˆˆ *
;
ˆˆ* +
ViewBag
‰‰ 
.
‰‰ 
apiLog
‰‰ 
=
‰‰ 
apiLog
‰‰ 
;
‰‰  
return
ŠŠ 
View
ŠŠ 
(
ŠŠ 
)
ŠŠ 
;
ŠŠ 
}
‹‹ 
public
 

IActionResult
 
Signout
  
(
  !
)
! "
{
ŽŽ 
destroySession
 
(
 
)
 
;
 
return
’’ 
View
’’ 
(
’’ 
)
’’ 
;
’’ 
}
““ 
public
•• 

IActionResult
•• 
Signup
•• 
(
••  
)
••  !
{
–– 
destroySession
—— 
(
—— 
)
—— 
;
—— 
defineStart
˜˜ 
(
˜˜ 
)
˜˜ 
;
˜˜ 
return
™™ 
View
™™ 
(
™™ 
)
™™ 
;
™™ 
}
šš 
public
œœ 

IActionResult
œœ 
RegisterAccount
œœ (
(
œœ( )
)
œœ) *
{
 
destroySession
žž 
(
žž 
)
žž 
;
žž 

LoginError
   
res
   
=
   
new
   

LoginError
   '
(
  ' (
)
  ( )
;
  ) *
string
¢¢ 
msg
¢¢ 
=
¢¢ 
$str
¢¢ 
;
¢¢ 
string
££ 

user_email
££ 
=
££ 
$str
££ 
;
££ 
string
¤¤ 
accept_status
¤¤ 
=
¤¤ 
$str
¤¤ !
;
¤¤! "
try
¥¥ 
{
¦¦ 	
using
§§ 
(
§§ 
Aes
§§ 
aesAlgorithm
§§ #
=
§§$ %
Aes
§§& )
.
§§) *
Create
§§* 0
(
§§0 1
)
§§1 2
)
§§2 3
{
¨¨ 
var
©© 
location
©© 
=
©© 
new
©© "
Uri
©©# &
(
©©& '
$"
ªª 
{
ªª 
Request
ªª 
.
ªª 
Scheme
ªª %
}
ªª% &
$str
ªª& )
{
ªª) *
Request
ªª* 1
.
ªª1 2
Host
ªª2 6
}
ªª6 7
{
ªª7 8
Request
ªª8 ?
.
ªª? @
Path
ªª@ D
}
ªªD E
{
ªªE F
Request
ªªF M
.
ªªM N
QueryString
ªªN Y
}
ªªY Z
"
ªªZ [
)
«« 
;
«« 
string
¬¬ 
	QueryText
¬¬  
=
¬¬! "
(
¬¬# $
location
¬¬$ ,
.
¬¬, -
Query
¬¬- 2
)
¬¬2 3
.
¬¬3 4
Replace
¬¬4 ;
(
¬¬; <
$str
¬¬< ?
,
¬¬? @
$str
¬¬A C
)
¬¬C D
;
¬¬D E
if
®® 
(
®® 
	QueryText
®® 
!=
®®  
$str
®®! #
)
®®# $
{
¯¯ 
string
°° 

cipherText
°° %
=
°°& '
$str
°°( *
;
°°* +
string
±± 
	keyBase64
±± $
=
±±% &
$str
±±' )
;
±±) *
string
²² 
vectorBase64
²² '
=
²²( )
$str
²²* ,
;
²², -
string
³³ 
[
³³ 
]
³³ 
xSplit
³³ #
=
³³$ %
	QueryText
³³& /
.
³³/ 0
Split
³³0 5
(
³³5 6
$char
³³6 9
)
³³9 :
;
³³: ;
if
µµ 
(
µµ 
xSplit
µµ 
.
µµ 
Length
µµ %
>
µµ& '
$num
µµ( )
)
µµ) *
{
¶¶ 

cipherText
·· "
=
··# $
xSplit
··% +
[
··+ ,
$num
··, -
]
··- .
;
··. /
	keyBase64
¸¸ !
=
¸¸" #
xSplit
¸¸$ *
[
¸¸* +
$num
¸¸+ ,
]
¸¸, -
;
¸¸- .
vectorBase64
¹¹ $
=
¹¹% &
xSplit
¹¹' -
[
¹¹- .
$num
¹¹. /
]
¹¹/ 0
;
¹¹0 1
}
ºº 
string
¼¼ 
token
¼¼  
=
¼¼! " 
DecryptDataWithAes
¼¼# 5
(
¼¼5 6

cipherText
¼¼6 @
,
¼¼@ A
	keyBase64
¼¼B K
,
¼¼K L
vectorBase64
¼¼M Y
)
¼¼Y Z
;
¼¼Z [
if
½½ 
(
½½ 
token
½½ 
!=
½½  
$str
½½! #
)
½½# $
{
¾¾ 

user_email
ÀÀ "
=
ÀÀ# $
(
ÀÀ% &
token
ÀÀ& +
.
ÀÀ+ ,
Split
ÀÀ, 1
(
ÀÀ1 2
$char
ÀÀ2 5
)
ÀÀ5 6
[
ÀÀ6 7
$num
ÀÀ7 8
]
ÀÀ8 9
)
ÀÀ9 :
.
ÀÀ: ;
Split
ÀÀ; @
(
ÀÀ@ A
$char
ÀÀA D
)
ÀÀD E
[
ÀÀE F
$num
ÀÀF G
]
ÀÀG H
;
ÀÀH I
accept_status
ÁÁ %
=
ÁÁ& '
(
ÁÁ( )
token
ÁÁ) .
.
ÁÁ. /
Split
ÁÁ/ 4
(
ÁÁ4 5
$char
ÁÁ5 8
)
ÁÁ8 9
[
ÁÁ9 :
$num
ÁÁ: ;
]
ÁÁ; <
)
ÁÁ< =
.
ÁÁ= >
Split
ÁÁ> C
(
ÁÁC D
$char
ÁÁD G
)
ÁÁG H
[
ÁÁH I
$num
ÁÁI J
]
ÁÁJ K
;
ÁÁK L
}
ÂÂ 
}
ÃÃ 
}
ÄÄ 
}
ÅÅ 	
catch
ÆÆ 
(
ÆÆ 
System
ÆÆ 
.
ÆÆ 
	Exception
ÆÆ 
)
ÆÆ  
{
ÇÇ 	
throw
ÈÈ 
;
ÈÈ 
}
ÉÉ 	
if
ËË 

(
ËË 

user_email
ËË 
!=
ËË 
$str
ËË 
&
ËË 
accept_status
ËË ,
!=
ËË- /
$str
ËË0 2
)
ËË2 3
{
ÌÌ 	
try
ÍÍ 
{
ÎÎ "
Post_RegisterAccount
ÏÏ $
(
ÏÏ$ %

user_email
ÏÏ% /
,
ÏÏ/ 0
accept_status
ÏÏ1 >
)
ÏÏ> ?
;
ÏÏ? @
res
ÐÐ 
.
ÐÐ 
Message
ÐÐ 
=
ÐÐ 
$str
ÐÐ $
;
ÐÐ$ %
}
ÑÑ 
catch
ÒÒ 
(
ÒÒ 
	Exception
ÒÒ 
ex
ÒÒ 
)
ÒÒ  
{
ÒÒ! "
res
ÒÒ# &
.
ÒÒ& '
Message
ÒÒ' .
=
ÒÒ/ 0
ex
ÒÒ1 3
.
ÒÒ3 4
Message
ÒÒ4 ;
.
ÒÒ; <
ToString
ÒÒ< D
(
ÒÒD E
)
ÒÒE F
;
ÒÒF G
}
ÒÒH I
}
ÓÓ 	
return
ÕÕ 
Ok
ÕÕ 
(
ÕÕ 
res
ÕÕ 
)
ÕÕ 
;
ÕÕ 
}
ÖÖ 
[
×× 
HttpPost
×× 
]
×× 
public
ØØ 

async
ØØ 
Task
ØØ 
<
ØØ 
IActionResult
ØØ #
>
ØØ# $"
Post_RegisterAccount
ØØ% 9
(
ØØ9 :
string
ØØ: @

user_email
ØØA K
,
ØØK L
string
ØØM S
accept_status
ØØT a
)
ØØa b
{
ÙÙ 
string
ÚÚ 
ret
ÚÚ 
=
ÚÚ 
await
ÚÚ 
_WSSoaps
ÚÚ #
.
ÚÚ# $#
Post_Register_Account
ÚÚ$ 9
(
ÚÚ9 :

user_email
ÚÚ: D
.
ÚÚD E
ToString
ÚÚE M
(
ÚÚM N
)
ÚÚN O
,
ÚÚO P
accept_status
ÚÚQ ^
.
ÚÚ^ _
ToString
ÚÚ_ g
(
ÚÚg h
)
ÚÚh i
)
ÚÚi j
;
ÚÚj k
return
ÛÛ 
View
ÛÛ 
(
ÛÛ 
)
ÛÛ 
;
ÛÛ 
}
ÜÜ 
[
ÞÞ 
HttpPost
ÞÞ 
]
ÞÞ 
public
ßß 

async
ßß 
Task
ßß 
<
ßß 
IActionResult
ßß #
>
ßß# $
Authentication
ßß% 3
(
ßß3 4
[
ßß4 5
FromBody
ßß5 =
]
ßß= > 
LoginFromBodyModel
ßß? Q
model
ßßR W
)
ßßW X
{
àà 
string
áá 
msg
áá 
=
áá 
$str
áá 
;
áá 
string
ãã 
	user_name
ãã 
=
ãã 
model
ãã  
.
ãã  !
	user_name
ãã! *
.
ãã* +
Trim
ãã+ /
(
ãã/ 0
)
ãã0 1
;
ãã1 2
string
ää 
	pass_word
ää 
=
ää 
model
ää  
.
ää  !
	pass_word
ää! *
.
ää* +
Trim
ää+ /
(
ää/ 0
)
ää0 1
;
ää1 2
string
åå 
email
åå 
=
åå 
model
åå 
.
åå 
	user_name
åå &
.
åå& '
Trim
åå' +
(
åå+ ,
)
åå, -
;
åå- .
string
ææ 
	role_type
ææ 
=
ææ 
$str
ææ 
;
ææ 
string
çç 
user_display
çç 
=
çç 
$str
çç  
;
çç  !
string
èè 
user_img
èè 
=
èè 
$str
èè 
;
èè 
string
éé 
	page_name
éé 
=
éé 
$str
éé (
;
éé( )
if
íí 

(
íí 
true
íí 
)
íí 
{
îî 	
if
ïï 
(
ïï 
	pass_word
ïï 
==
ïï 
$str
ïï $
)
ïï$ %
{
ðð 
	role_type
ññ 
=
ññ 
	pass_word
ññ %
;
ññ% &
}
òò 
else
óó 
if
óó 
(
óó 
	pass_word
óó 
==
óó !
$str
óó" -
)
óó- .
{
ôô 
	role_type
õõ 
=
õõ 
	pass_word
õõ %
;
õõ% &
}
öö 
else
÷÷ 
if
÷÷ 
(
÷÷ 
	pass_word
÷÷ 
==
÷÷ !
$str
÷÷" ,
)
÷÷, -
{
øø 
	role_type
ùù 
=
ùù 
	pass_word
ùù %
;
ùù% &
}
úú 
else
ûû 
if
ûû 
(
ûû 
	pass_word
ûû 
==
ûû !
$str
ûû" *
)
ûû* +
{
üü 
	role_type
ýý 
=
ýý 
	pass_word
ýý %
;
ýý% &
}
þþ 
else
ÿÿ 
{
€€ 
	role_type
 
=
 
$str
 &
;
& '
}
‚‚ 
if
…… 
(
…… 
user_display
…… 
==
…… 
$str
……  "
)
……" #
{
……$ %
user_display
……& 2
=
……3 4
email
……5 :
+
……; <
$str
……= @
+
……A B
	role_type
……C L
+
……M N
$str
……O R
;
……R S
}
……T U
}
†† 	
string
ˆˆ 
jsper
ˆˆ 
=
ˆˆ 
await
ˆˆ 
_WSSoaps
ˆˆ %
.
ˆˆ% &&
post_check_authorization
ˆˆ& >
(
ˆˆ> ?
model
ˆˆ? D
.
ˆˆD E
	user_name
ˆˆE N
.
ˆˆN O
Trim
ˆˆO S
(
ˆˆS T
)
ˆˆT U
.
ˆˆU V
ToLower
ˆˆV ]
(
ˆˆ] ^
)
ˆˆ^ _
,
ˆˆ_ `
model
ˆˆa f
.
ˆˆf g
	pass_word
ˆˆg p
.
ˆˆp q
Trim
ˆˆq u
(
ˆˆu v
)
ˆˆv w
.
ˆˆw x
ToLower
ˆˆx 
(ˆˆ €
)ˆˆ€ 
)ˆˆ ‚
;ˆˆ‚ ƒ
	DataTable
ŠŠ 
dt
ŠŠ 
=
ŠŠ 
new
ŠŠ 
	DataTable
ŠŠ $
(
ŠŠ$ %
)
ŠŠ% &
;
ŠŠ& '
dt
‹‹ 

=
‹‹ 
ConvertJSONresult
‹‹ 
(
‹‹ 
jsper
‹‹ $
)
‹‹$ %
;
‹‹% &
if
ŒŒ 

(
ŒŒ 
dt
ŒŒ 
.
ŒŒ 
Rows
ŒŒ 
.
ŒŒ 
Count
ŒŒ 
==
ŒŒ 
$num
ŒŒ 
)
ŒŒ 
{
 	
	role_type
ŽŽ 
=
ŽŽ 
$str
ŽŽ 
;
ŽŽ 
goto
 
Next_Line_Data
 
;
  
}
 	
for
’’ 
(
’’ 
int
’’ 
i
’’ 
=
’’ 
$num
’’ 
;
’’ 
i
’’ 
<
’’ 
dt
’’ 
.
’’ 
Rows
’’ #
.
’’# $
Count
’’$ )
;
’’) *
i
’’+ ,
++
’’, .
)
’’. /
{
““ 	
	role_type
”” 
=
”” 
(
”” 
dt
”” 
.
”” 
Rows
””  
[
””  !
i
””! "
]
””" #
[
””# $
$str
””$ /
]
””/ 0
+
””1 2
$str
””3 5
)
””5 6
;
””6 7
	user_name
–– 
=
–– 
(
–– 
dt
–– 
.
–– 
Rows
––  
[
––  !
i
––! "
]
––" #
[
––# $
$str
––$ /
]
––/ 0
+
––1 2
$str
––3 5
)
––5 6
;
––6 7
user_display
—— 
=
—— 
(
—— 
dt
—— 
.
—— 
Rows
—— #
[
——# $
i
——$ %
]
——% &
[
——& '
$str
——' 9
]
——9 :
+
——; <
$str
——= ?
)
——? @
;
——@ A
user_img
˜˜ 
=
˜˜ 
(
˜˜ 
dt
˜˜ 
.
˜˜ 
Rows
˜˜ 
[
˜˜  
i
˜˜  !
]
˜˜! "
[
˜˜" #
$str
˜˜# -
]
˜˜- .
+
˜˜/ 0
$str
˜˜1 3
)
˜˜3 4
;
˜˜4 5
if
šš 
(
šš 
(
šš 
dt
šš 
.
šš 
Rows
šš 
[
šš 
i
šš 
]
šš 
[
šš 
$str
šš '
]
šš' (
+
šš) *
$str
šš+ -
)
šš- .
==
šš/ 1
$str
šš2 9
)
šš9 :
{
šš; <
break
šš= B
;
ššB C
}
ššD E
}
›› 	
_sessionAuthen
žž 
.
žž 
	role_type
žž  
=
žž! "
	role_type
žž# ,
;
žž, -
_sessionAuthen
ŸŸ 
.
ŸŸ 
	user_name
ŸŸ  
=
ŸŸ! "
	user_name
ŸŸ# ,
;
ŸŸ, -
_sessionAuthen
   
.
   
user_display
   #
=
  $ %
user_display
  & 2
;
  2 3
_sessionAuthen
¡¡ 
.
¡¡ 
user_img
¡¡ 
=
¡¡  !
(
¡¡" #
user_img
¡¡# +
==
¡¡, .
$str
¡¡/ 1
?
¡¡2 3
Url
¡¡4 7
.
¡¡7 8
Content
¡¡8 ?
(
¡¡? @
$str
¡¡@ D
)
¡¡D E
+
¡¡F G
$str
¡¡H b
:
¡¡c d
user_img
¡¡e m
)
¡¡m n
;
¡¡n o
ViewBag
££ 
.
££ 
	user_name
££ 
=
££ 
_sessionAuthen
££ *
.
££* +
	user_name
££+ 4
;
££4 5
ViewData
¤¤ 
[
¤¤ 
$str
¤¤ 
]
¤¤  
=
¤¤! "
_sessionAuthen
¤¤# 1
.
¤¤1 2
user_display
¤¤2 >
;
¤¤> ?
ViewData
¥¥ 
[
¥¥ 
$str
¥¥ 
]
¥¥ 
=
¥¥ 
	user_name
¥¥  )
;
¥¥) *
if
§§ 

(
§§ 
_sessionAuthen
§§ 
.
§§ 
timeoutSession
§§ )
==
§§* ,
$str
§§- /
)
§§/ 0
{
¨¨ 	
string
©© 
now
©© 
=
©© 
DateTime
©© !
.
©©! "
Now
©©" %
.
©©% &

AddMinutes
©©& 0
(
©©0 1
$num
©©1 3
)
©©3 4
.
©©4 5
ToString
©©5 =
(
©©= >
)
©©> ?
;
©©? @
_sessionAuthen
ªª 
.
ªª 
timeoutSession
ªª )
=
ªª* +
now
ªª, /
.
ªª/ 0
ToString
ªª0 8
(
ªª8 9
)
ªª9 :
;
ªª: ;
}
«« 	
Next_Line_Data
­­ 
:
­­ 
;
­­ 
LoginViewModel
®® 
res
®® 
=
®® 
new
®®  
LoginViewModel
®®! /
(
®®/ 0
)
®®0 1
{
®®2 3
	user_name
®®4 =
=
®®> ?
	user_name
®®@ I
,
®®I J
	role_type
®®K T
=
®®U V
	role_type
®®W `
,
®®` a
page
®®b f
=
®®g h
	page_name
®®i r
,
®®r s
msg
®®t w
=
®®x y
msg
®®z }
}
®®~ 
;®® €
return
¯¯ 
Ok
¯¯ 
(
¯¯ 
res
¯¯ 
)
¯¯ 
;
¯¯ 
}
°° 
public
²² 

async
²² 
Task
²² 
<
²² 
string
²² 
>
²² 

CheckLogin
²² (
(
²²( )
string
²²) /
retjson
²²0 7
)
²²7 8
{
³³ 
string
´´ 

first_page
´´ 
=
´´ 
$str
´´ )
;
´´) *
try
µµ 
{
¶¶ 	
	DataTable
·· 
dt
·· 
=
·· 
(
·· 
	DataTable
·· %
)
··% &
JsonConvert
··& 1
.
··1 2
DeserializeObject
··2 C
(
··C D
retjson
··D K
,
··K L
(
··M N
typeof
··N T
(
··T U
	DataTable
··U ^
)
··^ _
)
··_ `
)
··` a
;
··a b
if
¸¸ 
(
¸¸ 
dt
¸¸ 
.
¸¸ 
Rows
¸¸ 
.
¸¸ 
Count
¸¸ 
>
¸¸ 
$num
¸¸  !
)
¸¸! "
{
¹¹ 

first_page
ºº 
=
ºº 
$str
ºº *
;
ºº* +
_sessionAuthen
¼¼ 
.
¼¼ 
	user_name
¼¼ (
=
¼¼) *
(
¼¼+ ,
dt
¼¼, .
.
¼¼. /
Rows
¼¼/ 3
[
¼¼3 4
$num
¼¼4 5
]
¼¼5 6
[
¼¼6 7
$str
¼¼7 B
]
¼¼B C
+
¼¼D E
$str
¼¼F H
)
¼¼H I
.
¼¼I J
ToString
¼¼J R
(
¼¼R S
)
¼¼S T
;
¼¼T U
_sessionAuthen
½½ 
.
½½ 
user_display
½½ +
=
½½, -
(
½½. /
dt
½½/ 1
.
½½1 2
Rows
½½2 6
[
½½6 7
$num
½½7 8
]
½½8 9
[
½½9 :
$str
½½: H
]
½½H I
+
½½J K
$str
½½L N
)
½½N O
.
½½O P
ToString
½½P X
(
½½X Y
)
½½Y Z
;
½½Z [
_sessionAuthen
¾¾ 
.
¾¾ 
user_img
¾¾ '
=
¾¾( )
(
¾¾* +
dt
¾¾+ -
.
¾¾- .
Rows
¾¾. 2
[
¾¾2 3
$num
¾¾3 4
]
¾¾4 5
[
¾¾5 6
$str
¾¾6 @
]
¾¾@ A
+
¾¾B C
$str
¾¾D F
)
¾¾F G
.
¾¾G H
ToString
¾¾H P
(
¾¾P Q
)
¾¾Q R
;
¾¾R S
_sessionAuthen
¿¿ 
.
¿¿ 
	role_type
¿¿ (
=
¿¿) *
(
¿¿+ ,
dt
¿¿, .
.
¿¿. /
Rows
¿¿/ 3
[
¿¿3 4
$num
¿¿4 5
]
¿¿5 6
[
¿¿6 7
$str
¿¿7 B
]
¿¿B C
+
¿¿D E
$str
¿¿F H
)
¿¿H I
.
¿¿I J
ToString
¿¿J R
(
¿¿R S
)
¿¿S T
.
¿¿T U
ToLower
¿¿U \
(
¿¿\ ]
)
¿¿] ^
;
¿¿^ _
if
ÁÁ 
(
ÁÁ 
_sessionAuthen
ÁÁ "
.
ÁÁ" #
user_img
ÁÁ# +
.
ÁÁ+ ,
ToString
ÁÁ, 4
(
ÁÁ4 5
)
ÁÁ5 6
==
ÁÁ7 9
$str
ÁÁ: <
)
ÁÁ< =
{
ÂÂ 
_sessionAuthen
ÃÃ "
.
ÃÃ" #
user_img
ÃÃ# +
=
ÃÃ, -
$str
ÃÃ. I
;
ÃÃI J
}
ÄÄ 
else
ÅÅ 
{
ÆÆ 
var
ÇÇ 
empId
ÇÇ 
=
ÇÇ 
(
ÇÇ  !
dt
ÇÇ! #
.
ÇÇ# $
Rows
ÇÇ$ (
[
ÇÇ( )
$num
ÇÇ) *
]
ÇÇ* +
[
ÇÇ+ ,
$str
ÇÇ, 4
]
ÇÇ4 5
+
ÇÇ6 7
$str
ÇÇ8 :
)
ÇÇ: ;
.
ÇÇ; <
ToString
ÇÇ< D
(
ÇÇD E
)
ÇÇE F
.
ÇÇF G
ToLower
ÇÇG N
(
ÇÇN O
)
ÇÇO P
;
ÇÇP Q
_sessionAuthen
ÈÈ "
.
ÈÈ" #
user_img
ÈÈ# +
=
ÈÈ, -
_sessionAuthen
ÈÈ. <
.
ÈÈ< =
user_img
ÈÈ= E
.
ÉÉ 
ToString
ÉÉ !
(
ÉÉ! "
)
ÉÉ" #
.
ÊÊ 
Replace
ÊÊ  
(
ÊÊ  !
$str
ÊÊ! .
,
ÊÊ. /
$str
ÊÊ0 N
)
ÊÊN O
;
ÊÊO P
_sessionAuthen
ËË "
.
ËË" #
user_img
ËË# +
=
ËË, -
$"
ËË. 0
{
ËË0 1
pathimg
ËË1 8
}
ËË8 9
{
ËË9 :
empId
ËË: ?
}
ËË? @
$str
ËË@ D
"
ËËD E
;
ËËE F
}
ÌÌ 
if
ÎÎ 
(
ÎÎ 
dt
ÎÎ 
.
ÎÎ 
Rows
ÎÎ 
.
ÎÎ 
Count
ÎÎ !
==
ÎÎ" $
$num
ÎÎ% &
)
ÎÎ& '
{
ÏÏ 
if
ÐÐ 
(
ÐÐ 
(
ÐÐ 
dt
ÐÐ 
.
ÐÐ 
Rows
ÐÐ  
[
ÐÐ  !
$num
ÐÐ! "
]
ÐÐ" #
[
ÐÐ# $
$str
ÐÐ$ /
]
ÐÐ/ 0
+
ÐÐ1 2
$str
ÐÐ3 5
)
ÐÐ5 6
.
ÐÐ6 7
ToString
ÐÐ7 ?
(
ÐÐ? @
)
ÐÐ@ A
.
ÐÐA B
ToLower
ÐÐB I
(
ÐÐI J
)
ÐÐJ K
==
ÐÐL N
$str
ÐÐO V
)
ÐÐV W
{
ÑÑ 
string
ÒÒ 
dt_role
ÒÒ &
=
ÒÒ' (
await
ÒÒ) .
_WSSoaps
ÒÒ/ 7
.
ÒÒ7 8%
Post_get_emp_data_login
ÒÒ8 O
(
ÒÒO P
	user_name
ÒÒP Y
.
ÒÒY Z
ToString
ÒÒZ b
(
ÒÒb c
)
ÒÒc d
)
ÒÒd e
;
ÒÒe f
if
ÓÓ 
(
ÓÓ 
dt_role
ÓÓ #
!=
ÓÓ$ &
$str
ÓÓ' )
)
ÓÓ) *
{
ÔÔ 

first_page
ÕÕ &
=
ÕÕ' (
$str
ÕÕ) >
;
ÕÕ> ?
}
ÖÖ 
}
×× 
else
ØØ 
if
ØØ 
(
ØØ 
(
ØØ 
dt
ØØ  
.
ØØ  !
Rows
ØØ! %
[
ØØ% &
$num
ØØ& '
]
ØØ' (
[
ØØ( )
$str
ØØ) 4
]
ØØ4 5
+
ØØ6 7
$str
ØØ8 :
)
ØØ: ;
.
ØØ; <
ToString
ØØ< D
(
ØØD E
)
ØØE F
.
ØØF G
ToLower
ØØG N
(
ØØN O
)
ØØO P
!=
ØØQ S
$str
ØØT V
)
ØØV W
{
ÙÙ 
string
ÚÚ 
dt_role
ÚÚ &
=
ÚÚ' (
await
ÚÚ) .
_WSSoaps
ÚÚ/ 7
.
ÚÚ7 8%
Post_get_emp_data_login
ÚÚ8 O
(
ÚÚO P
	user_name
ÛÛ %
.
ÛÛ% &
ToString
ÛÛ& .
(
ÛÛ. /
)
ÛÛ/ 0
)
ÜÜ 
;
ÜÜ 
if
ÝÝ 
(
ÝÝ 
dt_role
ÝÝ #
!=
ÝÝ$ &
$str
ÝÝ' )
)
ÝÝ) *
{
ÞÞ 

first_page
ßß &
=
ßß' (
$str
ßß) >
;
ßß> ?
}
àà 
}
áá 
else
ââ 
{
ãã 
throw
åå 
new
åå !
	Exception
åå" +
(
åå+ ,
$str
åå, K
)
ååK L
;
ååL M
}
ææ 
}
çç 
else
èè 
if
èè 
(
èè 
dt
èè 
.
èè 
Rows
èè  
.
èè  !
Count
èè! &
>
èè' (
$num
èè) *
)
èè* +
{
éé 
if
ëë 
(
ëë 
(
ëë 
dt
ëë 
.
ëë 
Rows
ëë  
[
ëë  !
$num
ëë! "
]
ëë" #
[
ëë# $
$str
ëë$ /
]
ëë/ 0
+
ëë1 2
$str
ëë3 5
)
ëë5 6
.
ëë6 7
ToString
ëë7 ?
(
ëë? @
)
ëë@ A
.
ëëA B
ToLower
ëëB I
(
ëëI J
)
ëëJ K
==
ëëL N
$str
ëëO V
)
ëëV W
{
ìì 
_sessionAuthen
íí &
.
íí& '
	user_name
íí' 0
=
íí1 2
$str
íí3 :
;
íí: ;
_sessionAuthen
îî &
.
îî& '
	role_type
îî' 0
=
îî1 2
$str
îî3 :
;
îî: ;
string
ðð 
dt_role
ðð &
=
ðð' (
await
ðð) .
_WSSoaps
ðð/ 7
.
ðð7 8%
Post_get_emp_data_login
ðð8 O
(
ððO P
	user_name
ññ %
.
ññ% &
ToString
ññ& .
(
ññ. /
)
ññ/ 0
)
òò 
;
òò 
if
óó 
(
óó 
dt_role
óó #
!=
óó$ &
$str
óó' )
)
óó) *
{
ôô 

first_page
õõ &
=
õõ' (
$str
õõ) =
;
õõ= >
}
öö 
}
úú 
else
ûû 
if
ûû 
(
ûû 
(
ûû 
dt
ûû  
.
ûû  !
Rows
ûû! %
[
ûû% &
$num
ûû& '
]
ûû' (
[
ûû( )
$str
ûû) 4
]
ûû4 5
+
ûû6 7
$str
ûû8 :
)
ûû: ;
.
ûû; <
ToString
ûû< D
(
ûûD E
)
ûûE F
.
ûûF G
ToLower
ûûG N
(
ûûN O
)
ûûO P
!=
ûûQ S
$str
ûûT V
)
ûûV W
{
üü 
string
ýý 
dt_role
ýý &
=
ýý' (
await
ýý) .
_WSSoaps
ýý/ 7
.
ýý7 8%
Post_get_emp_data_login
ýý8 O
(
ýýO P
	user_name
þþ %
.
þþ% &
ToString
þþ& .
(
þþ. /
)
þþ/ 0
)
ÿÿ 
;
ÿÿ 
Console
€€ 
.
€€  
	WriteLine
€€  )
(
€€) *
$str
 P
,
P Q
dt_role
‚‚ #
,
‚‚# $
	user_name
ƒƒ %
)
„„ 
;
„„ 
if
…… 
(
…… 
dt_role
…… #
!=
……$ &
$str
……' )
)
……) *
{
†† 

first_page
‡‡ &
=
‡‡' (
$str
‡‡) >
;
‡‡> ?
}
ˆˆ 
}
‰‰ 
}
ŠŠ 
}
‹‹ 
else
ŒŒ 
{
 
throw
ŽŽ 
new
ŽŽ 
	Exception
ŽŽ #
(
ŽŽ# $
$str
ŽŽ$ H
)
ŽŽH I
;
ŽŽI J
}
 
}
 	
catch
‘‘ 
(
‘‘ 
	Exception
‘‘ 
err
‘‘ 
)
‘‘ 
{
’’ 	
Console
““ 
.
““ 
	WriteLine
““ 
(
““ 
err
““ !
.
““! "
Message
““" )
.
““) *
ToString
““* 2
(
““2 3
)
““3 4
)
““4 5
;
““5 6
throw
•• 
new
•• 
	Exception
•• 
(
••  
$str
••  D
)
••D E
;
••E F
}
–– 	
if
—— 

(
—— 
string
—— 
.
—— 
IsNullOrEmpty
——  
(
——  !

first_page
——! +
)
——+ ,
)
——, -
throw
˜˜ 
new
˜˜ 
	Exception
˜˜ 
(
˜˜  
$str
˜˜  D
)
˜˜D E
;
˜˜E F
return
šš 

first_page
šš 
;
šš 
}
›› 
[
 
ResponseCache
 
(
 
Duration
 
=
 
$num
 
,
  
Location
! )
=
* +#
ResponseCacheLocation
, A
.
A B
None
B F
,
F G
NoStore
H O
=
P Q
true
R V
)
V W
]
W X
public
žž 

IActionResult
žž 
Error
žž 
(
žž 
)
žž  
{
ŸŸ 
return
   
View
   
(
   
new
¡¡ 
ErrorViewModel
¡¡ 
{
¡¡  
	RequestId
¡¡! *
=
¡¡+ ,
Activity
¡¡- 5
.
¡¡5 6
Current
¡¡6 =
?
¡¡= >
.
¡¡> ?
Id
¡¡? A
??
¡¡B D
HttpContext
¡¡E P
.
¡¡P Q
TraceIdentifier
¡¡Q `
}
¡¡a b
)
¢¢ 	
;
¢¢	 

}
££ 
}¤¤ ½Š
K/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/JseaController.cs
	namespace 	
dotnet6_epha_web
 
. 
Controllers &
{ 
public 

class 
JseaController 
:  !

Controller" ,
{ 
private 
static 
string 
DecryptDataWithAes 0
(0 1
string 

cipherText 
, 
string 
	keyBase64 
, 
string 
vectorBase64 
) 	
{ 	
using 
( 
Aes 
aesAlgorithm #
=$ %
Aes& )
.) *
Create* 0
(0 1
)1 2
)2 3
{ 
aesAlgorithm 
. 
Key  
=! "
Convert# *
.* +
FromBase64String+ ;
(; <
	keyBase64< E
)E F
;F G
aesAlgorithm 
. 
IV 
=  !
Convert" )
.) *
FromBase64String* :
(: ;
vectorBase64; G
)G H
;H I
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
ModeD H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
PaddingD K
}K L
"L M
)M N
;N O
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 3
{3 4
aesAlgorithm4 @
.@ A
KeySizeA H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 5
{5 6
aesAlgorithm6 B
.B C
	BlockSizeC L
}L M
"M N
)N O
;O P
ICryptoTransform!!  
	decryptor!!! *
=!!+ ,
aesAlgorithm!!- 9
.!!9 :
CreateDecryptor!!: I
(!!I J
)!!J K
;!!K L
byte## 
[## 
]## 
cipher## 
=## 
Convert##  '
.##' (
FromBase64String##( 8
(##8 9

cipherText##9 C
)##C D
;##D E
using&& 
(&& 
MemoryStream&& #
ms&&$ &
=&&' (
new&&) ,
MemoryStream&&- 9
(&&9 :
cipher&&: @
)&&@ A
)&&A B
{'' 
using(( 
((( 
CryptoStream(( '
cs((( *
=((+ ,
new((- 0
CryptoStream((1 =
(((= >
ms((> @
,((@ A
	decryptor((B K
,((K L
CryptoStreamMode((M ]
.((] ^
Read((^ b
)((b c
)((c d
{)) 
using** 
(** 
StreamReader** +
sr**, .
=**/ 0
new**1 4
StreamReader**5 A
(**A B
cs**B D
)**D E
)**E F
{++ 
return,, "
sr,,# %
.,,% &
	ReadToEnd,,& /
(,,/ 0
),,0 1
;,,1 2
}-- 
}.. 
}// 
}00 
}11 	
private33 
void33 
Check_QueryString33 &
(33& '
)33' (
{44 	
try;; 
{<< 
using== 
(== 
Aes== 
aesAlgorithm== '
===( )
Aes==* -
.==- .
Create==. 4
(==4 5
)==5 6
)==6 7
{>> 
try?? 
{@@ 
varAA 
locationAA $
=AA% &
newAA' *
UriAA+ .
(AA. /
$"AA/ 1
{AA1 2
RequestAA2 9
.AA9 :
SchemeAA: @
}AA@ A
$strAAA D
{AAD E
RequestAAE L
.AAL M
HostAAM Q
}AAQ R
{AAR S
RequestAAS Z
.AAZ [
PathAA[ _
}AA_ `
{AA` a
RequestAAa h
.AAh i
QueryStringAAi t
}AAt u
"AAu v
)AAv w
;AAw x
stringDD 
	QueryTextDD (
=DD) *
(DD+ ,
locationDD, 4
.DD4 5
QueryDD5 :
)DD: ;
.DD; <
ReplaceDD< C
(DDC D
$strDDD G
,DDG H
$strDDI K
)DDK L
;DDL M
ifFF 
(FF 
	QueryTextFF %
==FF& (
$strFF) +
&&FF, .
_sessionAuthenFF/ =
.FF= >
	role_typeFF> G
!=FFH J
nullFFK O
)FFO P
{GG 
ifHH 
(HH  
_sessionAuthenHH  .
.HH. /
service_url_linkHH/ ?
!=HH@ B
$strHHC E
)HHE F
{II 
	QueryTextJJ  )
=JJ* +
_sessionAuthenJJ, :
.JJ: ;
service_url_linkJJ; K
;JJK L
}KK 
}LL 
ifMM 
(MM 
	QueryTextMM %
!=MM& (
$strMM) +
)MM+ ,
{NN 
stringOO "

cipherTextOO# -
=OO. /
$strOO0 2
;OO2 3
stringPP "
	keyBase64PP# ,
=PP- .
$strPP/ 1
;PP1 2
stringQQ "
vectorBase64QQ# /
=QQ0 1
$strQQ2 4
;QQ4 5
stringRR "
[RR" #
]RR# $
xSplitRR% +
=RR, -
	QueryTextRR. 7
.RR7 8
SplitRR8 =
(RR= >
$charRR> A
)RRA B
;RRB C
ifTT 
(TT  
xSplitTT  &
.TT& '
LengthTT' -
>TT. /
$numTT0 1
)TT1 2
{UU 
ifVV  "
(VV# $
xSplitVV$ *
[VV* +
$numVV+ ,
]VV, -
.VV- .
ToStringVV. 6
(VV6 7
)VV7 8
==VV9 ;
$strVV< D
)VVD E
{WW  !
_sessionAuthenXX$ 2
.XX2 3
pha_seqXX3 :
=XX; <
$strXX= ?
;XX? @
_sessionAuthenYY$ 2
.YY2 3
pha_noYY3 9
=YY: ;
$strYY< >
;YY> ?
_sessionAuthenZZ$ 2
.ZZ2 3

pha_statusZZ3 =
=ZZ> ?
$strZZ@ G
;ZZG H
_sessionAuthen[[$ 2
.[[2 3
pha_type_doc[[3 ?
=[[@ A
$str[[B J
;[[J K
return\\$ *
;\\* +
}]]  !

cipherText__  *
=__+ ,
xSplit__- 3
[__3 4
$num__4 5
]__5 6
;__6 7
	keyBase64``  )
=``* +
xSplit``, 2
[``2 3
$num``3 4
]``4 5
;``5 6
vectorBase64aa  ,
=aa- .
xSplitaa/ 5
[aa5 6
$numaa6 7
]aa7 8
;aa8 9
}bb 
stringdd "
tokendd# (
=dd) *
DecryptDataWithAesdd+ =
(dd= >

cipherTextdd> H
,ddH I
	keyBase64ddJ S
,ddS T
vectorBase64ddU a
)dda b
;ddb c
ifee 
(ee  
tokenee  %
!=ee& (
$stree) +
)ee+ ,
{ff 
trygg  #
{hh  !
_sessionAuthenii$ 2
.ii2 3
service_url_linkii3 C
=iiD E
	QueryTextiiF O
;iiO P
_sessionAuthenjj$ 2
.jj2 3
pha_seqjj3 :
=jj; <
(jj= >
tokenjj> C
.jjC D
SplitjjD I
(jjI J
$charjjJ M
)jjM N
[jjN O
$numjjO P
]jjP Q
)jjQ R
.jjR S
SplitjjS X
(jjX Y
$charjjY \
)jj\ ]
[jj] ^
$numjj^ _
]jj_ `
;jj` a
_sessionAuthenkk$ 2
.kk2 3
pha_nokk3 9
=kk: ;
(kk< =
tokenkk= B
.kkB C
SplitkkC H
(kkH I
$charkkI L
)kkL M
[kkM N
$numkkN O
]kkO P
)kkP Q
.kkQ R
SplitkkR W
(kkW X
$charkkX [
)kk[ \
[kk\ ]
$numkk] ^
]kk^ _
;kk_ `
stringnn$ *
stepnn+ /
=nn0 1
(nn2 3
tokennn3 8
.nn8 9
Splitnn9 >
(nn> ?
$charnn? B
)nnB C
[nnC D
$numnnD E
]nnE F
)nnF G
.nnG H
SplitnnH M
(nnM N
$charnnN Q
)nnQ R
[nnR S
$numnnS T
]nnT U
;nnU V
ifoo$ &
(oo' (
stepoo( ,
==oo- /
$stroo0 3
)oo3 4
{oo5 6
_sessionAuthenoo7 E
.ooE F
pha_type_docooF R
=ooS T
$strooU \
;oo\ ]
}oo^ _
elsepp$ (
ifpp) +
(pp, -
steppp- 1
==pp2 4
$strpp5 8
)pp8 9
{pp: ;
_sessionAuthenpp< J
.ppJ K
pha_type_docppK W
=ppX Y
$strppZ c
;ppc d
}ppe f
elseqq$ (
ifqq) +
(qq, -
stepqq- 1
==qq2 4
$strqq5 8
)qq8 9
{qq: ;
_sessionAuthenqq< J
.qqJ K
pha_type_docqqK W
=qqX Y
$strqqZ d
;qqd e
}qqf g
elserr$ (
ifrr) +
(rr, -
steprr- 1
==rr2 4
$strrr5 8
)rr8 9
{ss$ %
stringtt( .
approver_typett/ <
=tt= >
(tt? @
tokentt@ E
.ttE F
SplitttF K
(ttK L
$charttL O
)ttO P
[ttP Q
$numttQ R
]ttR S
)ttS T
.ttT U
SplitttU Z
(ttZ [
$chartt[ ^
)tt^ _
[tt_ `
$numtt` a
]tta b
;ttb c
ifuu( *
(uu+ ,
approver_typeuu, 9
==uu: <
$struu= F
)uuF G
{uuH I
_sessionAuthenuuJ X
.uuX Y
pha_type_docuuY e
=uuf g
$struuh q
;uuq r
}uus t
elsevv( ,
ifvv- /
(vv0 1
approver_typevv1 >
==vv? A
$strvvB J
)vvJ K
{vvL M
_sessionAuthenvvN \
.vv\ ]
pha_type_docvv] i
=vvj k
$strvvl t
;vvt u
}vvv w
elseww( ,
ifww- /
(ww0 1
approver_typeww1 >
==ww? A
$strwwB U
)wwU V
{wwW X
_sessionAuthenwwY g
.wwg h
pha_type_docwwh t
=wwu v
$str	www Š
;
wwŠ ‹
}
wwŒ 
}xx$ %
elseyy$ (
ifyy) +
(yy, -
stepyy- 1
==yy2 4
$stryy5 8
)yy8 9
{yy: ;
_sessionAuthenyy< J
.yyJ K
pha_type_docyyK W
=yyX Y
$stryyZ k
;yyk l
}yym n
elsezz$ (
{zz) *
_sessionAuthenzz+ 9
.zz9 :
pha_type_doczz: F
=zzG H
$strzzI K
;zzK L
}zzM N
}{{  !
catch||  %
{||& '
}||( )
}}} 
}~~ 
} 
catch
€€ 
{
€€ 
}
€€ 
}
 
}
‚‚ 
catch
ƒƒ 
(
ƒƒ 
System
ƒƒ 
.
ƒƒ 
	Exception
ƒƒ #
)
ƒƒ# $
{
„„ 
throw
…… 
;
…… 
}
†† 
}
‡‡ 	
private
ˆˆ 
readonly
ˆˆ 
ILogger
ˆˆ  
<
ˆˆ  !
JseaController
ˆˆ! /
>
ˆˆ/ 0
_logger
ˆˆ1 8
;
ˆˆ8 9
public
‰‰ 
readonly
‰‰ 
IConfiguration
‰‰ &
_IConfiguration
‰‰' 6
;
‰‰6 7
public
ŠŠ 
readonly
ŠŠ 
sessionAuthen
ŠŠ %
_sessionAuthen
ŠŠ& 4
;
ŠŠ4 5
public
ŒŒ 
JseaController
ŒŒ 
(
ŒŒ 
ILogger
 
<
 
JseaController
 "
>
" #
logger
$ *
,
* +
sessionAuthen
ŽŽ 
sessionAuthen
ŽŽ '
,
ŽŽ' (
IConfiguration
 
IConfiguration
 )
)
 	
{
‘‘ 	
_sessionAuthen
’’ 
=
’’ 
sessionAuthen
’’ *
;
’’* +
_logger
““ 
=
““ 
logger
““ 
;
““ 
_IConfiguration
”” 
=
”” 
IConfiguration
”” ,
;
””, -
}
•• 	
public
˜˜ 
IActionResult
˜˜ 
Index
˜˜ "
(
˜˜" #
)
˜˜# $
{
™™ 	
Check_QueryString
šš 
(
šš 
)
šš 
;
šš  
if
œœ 
(
œœ 
_sessionAuthen
œœ 
.
œœ 
	role_type
œœ (
==
œœ) +
$str
œœ, .
||
œœ/ 1
_sessionAuthen
œœ2 @
.
œœ@ A
	role_type
œœA J
==
œœK M
null
œœN R
)
œœR S
{
 
return
žž 
RedirectToAction
žž '
(
žž' (
$str
žž( /
,
žž/ 0
$str
žž1 8
)
žž8 9
;
žž9 :
}
ŸŸ 
_sessionAuthen
¡¡ 
.
¡¡ 
service_api_url
¡¡ *
=
¡¡+ ,
_IConfiguration
¡¡- <
[
¡¡< =
$str
¡¡= W
]
¡¡W X
;
¡¡X Y
if
££ 
(
££ 
_sessionAuthen
££ 
.
££ %
controller_action_befor
££ 6
==
££7 9
$str
££: <
)
££< =
{
¤¤ 
_sessionAuthen
¥¥ 
.
¥¥ %
controller_action_befor
¥¥ 6
=
¥¥7 8
$str
¥¥9 H
;
¥¥H I
}
¦¦ 
else
§§ 
{
¨¨ 
_sessionAuthen
©© 
.
©© %
controller_action_befor
©© 6
=
©©7 8
$str
©©9 F
;
©©F G
}
ªª 
ViewData
«« 
[
«« 
$str
«« #
]
««# $
=
««% &
_sessionAuthen
««' 5
.
««5 6
user_display
««6 B
;
««B C
ViewData
¬¬ 
[
¬¬ 
$str
¬¬  
]
¬¬  !
=
¬¬" #
_sessionAuthen
¬¬$ 2
.
¬¬2 3
	user_name
¬¬3 <
;
¬¬< =
ViewData
­­ 
[
­­ 
$str
­­  
]
­­  !
=
­­" #
_sessionAuthen
­­$ 2
.
­­2 3
	role_type
­­3 <
;
­­< =
ViewData
¯¯ 
[
¯¯ 
$str
¯¯ 
]
¯¯ 
=
¯¯  !
_sessionAuthen
¯¯" 0
.
¯¯0 1
pha_seq
¯¯1 8
;
¯¯8 9
ViewData
°° 
[
°° 
$str
°° 
]
°° 
=
°°  
_sessionAuthen
°°! /
.
°°/ 0
pha_no
°°0 6
;
°°6 7
ViewData
±± 
[
±± 
$str
±± !
]
±±! "
=
±±# $
_sessionAuthen
±±% 3
.
±±3 4

pha_status
±±4 >
;
±±> ?
ViewData
²² 
[
²² 
$str
²² #
]
²²# $
=
²²% &
_sessionAuthen
²²' 5
.
²²5 6
pha_type_doc
²²6 B
;
²²B C
ViewData
³³ 
[
³³ 
$str
³³ .
]
³³. /
=
³³0 1
_sessionAuthen
³³2 @
.
³³@ A%
controller_action_befor
³³A X
;
³³X Y
ViewData
´´ 
[
´´ 
$str
´´ &
]
´´& '
=
´´( )
_sessionAuthen
´´* 8
.
´´8 9
service_api_url
´´9 H
;
´´H I
ViewData
¶¶ 
[
¶¶ 
$str
¶¶ '
]
¶¶' (
=
¶¶) *
$str
¶¶+ -
;
¶¶- .
_sessionAuthen
·· 
.
·· 
service_url_link
·· +
=
··, -
$str
··. 0
;
··0 1
if
¹¹ 
(
¹¹ 
(
¹¹ 
ViewData
¹¹ 
[
¹¹ 
$str
¹¹ (
]
¹¹( )
+
¹¹* +
$str
¹¹, .
)
¹¹. /
.
¹¹/ 0
ToString
¹¹0 8
(
¹¹8 9
)
¹¹9 :
==
¹¹; =
$str
¹¹> F
)
¹¹F G
{
ºº 
}
»» 
else
¼¼ 
if
¼¼ 
(
¼¼ 
(
¼¼ 
ViewData
¼¼ 
[
¼¼ 
$str
¼¼ -
]
¼¼- .
+
¼¼/ 0
$str
¼¼1 3
)
¼¼3 4
.
¼¼4 5
ToString
¼¼5 =
(
¼¼= >
)
¼¼> ?
==
¼¼@ B
$str
¼¼C K
)
¼¼K L
{
½½ 
}
¾¾ 
else
¿¿ 
if
¿¿ 
(
¿¿ 
(
¿¿ 
ViewData
¿¿ 
[
¿¿ 
$str
¿¿ -
]
¿¿- .
+
¿¿/ 0
$str
¿¿1 3
)
¿¿3 4
.
¿¿4 5
ToString
¿¿5 =
(
¿¿= >
)
¿¿> ?
==
¿¿@ B
$str
¿¿C M
)
¿¿M N
{
ÀÀ 
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
$str
ÁÁ &
,
ÁÁ& '
$str
ÁÁ( .
)
ÁÁ. /
;
ÁÁ/ 0
}
ÂÂ 
else
ÃÃ 
if
ÃÃ 
(
ÃÃ 
(
ÃÃ 
ViewData
ÃÃ 
[
ÃÃ 
$str
ÃÃ -
]
ÃÃ- .
+
ÃÃ/ 0
$str
ÃÃ1 3
)
ÃÃ3 4
.
ÃÃ4 5
ToString
ÃÃ5 =
(
ÃÃ= >
)
ÃÃ> ?
==
ÃÃ@ B
$str
ÃÃC L
)
ÃÃL M
{
ÄÄ 
return
ÆÆ 
View
ÆÆ 
(
ÆÆ 
$str
ÆÆ %
,
ÆÆ% &
$str
ÆÆ' -
)
ÆÆ- .
;
ÆÆ. /
}
ÇÇ 
else
ÈÈ 
if
ÈÈ 
(
ÈÈ 
(
ÈÈ 
ViewData
ÈÈ 
[
ÈÈ 
$str
ÈÈ -
]
ÈÈ- .
+
ÈÈ/ 0
$str
ÈÈ1 3
)
ÈÈ3 4
.
ÈÈ4 5
ToString
ÈÈ5 =
(
ÈÈ= >
)
ÈÈ> ?
==
ÈÈ@ B
$str
ÈÈC V
)
ÈÈV W
{
ÉÉ 
return
ËË 
View
ËË 
(
ËË 
$str
ËË %
,
ËË% &
$str
ËË' -
)
ËË- .
;
ËË. /
}
ÌÌ 
else
ÍÍ 
if
ÍÍ 
(
ÍÍ 
(
ÍÍ 
ViewData
ÍÍ 
[
ÍÍ 
$str
ÍÍ -
]
ÍÍ- .
+
ÍÍ/ 0
$str
ÍÍ1 3
)
ÍÍ3 4
.
ÍÍ4 5
ToString
ÍÍ5 =
(
ÍÍ= >
)
ÍÍ> ?
==
ÍÍ@ B
$str
ÍÍC K
)
ÍÍK L
{
ÎÎ 
}
ÐÐ 
return
ÒÒ 
View
ÒÒ 
(
ÒÒ 
)
ÒÒ 
;
ÒÒ 
}
ÓÓ 	
public
ÕÕ 
IActionResult
ÕÕ 
Followup
ÕÕ %
(
ÕÕ% &
)
ÕÕ& '
{
ÖÖ 	
if
×× 
(
×× 
_sessionAuthen
×× 
.
×× 
	role_type
×× (
==
××) +
$str
××, .
||
××/ 1
_sessionAuthen
××2 @
.
××@ A
	role_type
××A J
==
××K M
null
××N R
)
××R S
{
ØØ 
return
ÙÙ 
RedirectToAction
ÙÙ '
(
ÙÙ' (
$str
ÙÙ( /
,
ÙÙ/ 0
$str
ÙÙ1 8
)
ÙÙ8 9
;
ÙÙ9 :
}
ÚÚ 
_sessionAuthen
ÜÜ 
.
ÜÜ 
service_api_url
ÜÜ *
=
ÜÜ+ ,
_IConfiguration
ÜÜ- <
[
ÜÜ< =
$str
ÜÜ= W
]
ÜÜW X
;
ÜÜX Y
_sessionAuthen
ÝÝ 
.
ÝÝ %
controller_action_befor
ÝÝ 2
=
ÝÝ3 4
$str
ÝÝ5 B
;
ÝÝB C
ViewData
ßß 
[
ßß 
$str
ßß #
]
ßß# $
=
ßß% &
_sessionAuthen
ßß' 5
.
ßß5 6
user_display
ßß6 B
;
ßßB C
ViewData
àà 
[
àà 
$str
àà  
]
àà  !
=
àà" #
_sessionAuthen
àà$ 2
.
àà2 3
	user_name
àà3 <
;
àà< =
ViewData
áá 
[
áá 
$str
áá  
]
áá  !
=
áá" #
_sessionAuthen
áá$ 2
.
áá2 3
	role_type
áá3 <
;
áá< =
ViewData
ââ 
[
ââ 
$str
ââ .
]
ââ. /
=
ââ0 1
_sessionAuthen
ââ2 @
.
ââ@ A%
controller_action_befor
ââA X
;
ââX Y
ViewData
ãã 
[
ãã 
$str
ãã &
]
ãã& '
=
ãã( )
_sessionAuthen
ãã* 8
.
ãã8 9
service_api_url
ãã9 H
;
ããH I
ViewData
ææ 
[
ææ 
$str
ææ 
]
ææ 
=
ææ  !
_sessionAuthen
ææ" 0
.
ææ0 1
pha_seq
ææ1 8
;
ææ8 9
return
èè 
View
èè 
(
èè 
)
èè 
;
èè 
}
éé 	
public
ëë 
IActionResult
ëë 
Search
ëë #
(
ëë# $
)
ëë$ %
{
ìì 	
if
íí 
(
íí 
_sessionAuthen
íí 
.
íí 
	role_type
íí (
==
íí) +
$str
íí, .
||
íí/ 1
_sessionAuthen
íí2 @
.
íí@ A
	role_type
ííA J
==
ííK M
null
ííN R
)
ííR S
{
îî 
return
ïï 
RedirectToAction
ïï '
(
ïï' (
$str
ïï( /
,
ïï/ 0
$str
ïï1 8
)
ïï8 9
;
ïï9 :
}
ðð 
_sessionAuthen
òò 
.
òò 
service_api_url
òò *
=
òò+ ,
_IConfiguration
òò- <
[
òò< =
$str
òò= W
]
òòW X
;
òòX Y
_sessionAuthen
óó 
.
óó %
controller_action_befor
óó 2
=
óó3 4
$str
óó5 B
;
óóB C
ViewData
÷÷ 
[
÷÷ 
$str
÷÷ #
]
÷÷# $
=
÷÷% &
_sessionAuthen
÷÷' 5
.
÷÷5 6
user_display
÷÷6 B
;
÷÷B C
ViewData
øø 
[
øø 
$str
øø  
]
øø  !
=
øø" #
_sessionAuthen
øø$ 2
.
øø2 3
	user_name
øø3 <
;
øø< =
ViewData
ùù 
[
ùù 
$str
ùù  
]
ùù  !
=
ùù" #
_sessionAuthen
ùù$ 2
.
ùù2 3
	role_type
ùù3 <
;
ùù< =
ViewData
úú 
[
úú 
$str
úú .
]
úú. /
=
úú0 1
_sessionAuthen
úú2 @
.
úú@ A%
controller_action_befor
úúA X
;
úúX Y
ViewData
ûû 
[
ûû 
$str
ûû &
]
ûû& '
=
ûû( )
_sessionAuthen
ûû* 8
.
ûû8 9
service_api_url
ûû9 H
;
ûûH I
return
ýý 
View
ýý 
(
ýý 
)
ýý 
;
ýý 
}
þþ 	
[
ÿÿ 	
HttpPost
ÿÿ	 
]
ÿÿ 
public
€€ 
async
€€ 
Task
€€ 
<
€€ 
IActionResult
€€ '
>
€€' (
set_session_doc
€€) 8
(
€€8 9
[
€€9 :
FromBody
€€: B
]
€€B C&
LoadSessionDataViewModel
€€D \
model
€€] b
)
€€b c
{
 	
_sessionAuthen
‚‚ 
.
‚‚ 
service_api_url
‚‚ *
=
‚‚+ ,
_IConfiguration
‚‚- <
[
‚‚< =
$str
‚‚= W
]
‚‚W X
;
‚‚X Y
_sessionAuthen
ƒƒ 
.
ƒƒ %
controller_action_befor
ƒƒ 2
=
ƒƒ3 4
model
ƒƒ5 :
.
ƒƒ: ;%
controller_action_befor
ƒƒ; R
;
ƒƒR S
_sessionAuthen
„„ 
.
„„ 
pha_seq
„„ "
=
„„# $
model
„„% *
.
„„* +
pha_seq
„„+ 2
;
„„2 3
_sessionAuthen
…… 
.
…… 
pha_no
…… !
=
……" #
model
……$ )
.
……) *
pha_no
……* 0
;
……0 1
_sessionAuthen
†† 
.
†† 

pha_status
†† %
=
††& '
model
††( -
.
††- .

pha_status
††. 8
;
††8 9
_sessionAuthen
‡‡ 
.
‡‡ 
pha_type_doc
‡‡ '
=
‡‡( )
model
‡‡* /
.
‡‡/ 0
pha_type_doc
‡‡0 <
;
‡‡< =
ViewData
ŠŠ 
[
ŠŠ 
$str
ŠŠ #
]
ŠŠ# $
=
ŠŠ% &
_sessionAuthen
ŠŠ' 5
.
ŠŠ5 6
user_display
ŠŠ6 B
;
ŠŠB C
ViewData
‹‹ 
[
‹‹ 
$str
‹‹  
]
‹‹  !
=
‹‹" #
_sessionAuthen
‹‹$ 2
.
‹‹2 3
	user_name
‹‹3 <
;
‹‹< =
ViewData
ŒŒ 
[
ŒŒ 
$str
ŒŒ  
]
ŒŒ  !
=
ŒŒ" #
_sessionAuthen
ŒŒ$ 2
.
ŒŒ2 3
	role_type
ŒŒ3 <
;
ŒŒ< =
ViewData
ŽŽ 
[
ŽŽ 
$str
ŽŽ 
]
ŽŽ 
=
ŽŽ  !
_sessionAuthen
ŽŽ" 0
.
ŽŽ0 1
pha_seq
ŽŽ1 8
;
ŽŽ8 9
ViewData
 
[
 
$str
 
]
 
=
  
_sessionAuthen
! /
.
/ 0
pha_no
0 6
;
6 7
ViewData
 
[
 
$str
 !
]
! "
=
# $
_sessionAuthen
% 3
.
3 4

pha_status
4 >
;
> ?
ViewData
‘‘ 
[
‘‘ 
$str
‘‘ #
]
‘‘# $
=
‘‘% &
_sessionAuthen
‘‘' 5
.
‘‘5 6
pha_type_doc
‘‘6 B
;
‘‘B C
ViewData
’’ 
[
’’ 
$str
’’ .
]
’’. /
=
’’0 1
_sessionAuthen
’’2 @
.
’’@ A%
controller_action_befor
’’A X
;
’’X Y
ViewData
““ 
[
““ 
$str
““ &
]
““& '
=
““( )
_sessionAuthen
““* 8
.
““8 9
service_api_url
““9 H
;
““H I
LoginViewModel
–– 
res_page
–– #
=
––$ %
new
––& )
LoginViewModel
––* 8
(
––8 9
)
––9 :
;
––: ;
res_page
—— 
.
—— 
msg
—— 
=
—— 
$str
—— 
;
—— 
return
˜˜ 
Ok
˜˜ 
(
˜˜ 
res_page
˜˜ 
)
˜˜ 
;
˜˜  
}
™™ 	
[
œœ 	
HttpPost
œœ	 
]
œœ 
public
 
async
 
Task
 
<
 
IActionResult
 '
>
' ( 
follow_back_search
) ;
(
; <&
LoadSessionDataViewModel
< T
model
U Z
)
Z [
{
žž 	
_sessionAuthen
ŸŸ 
.
ŸŸ 
pha_seq
ŸŸ "
=
ŸŸ# $
$str
ŸŸ% '
;
ŸŸ' (
_sessionAuthen
   
.
   
pha_type_doc
   '
=
  ( )
$str
  * 2
;
  2 3
_sessionAuthen
¡¡ 
.
¡¡ 
	role_type
¡¡ $
=
¡¡% &
_sessionAuthen
¡¡' 5
.
¡¡5 6
	role_type
¡¡6 ?
;
¡¡? @
LoginViewModel
££ 
res_page
££ #
=
££$ %
new
££& )
LoginViewModel
££* 8
(
££8 9
)
££9 :
;
££: ;
res_page
¤¤ 
.
¤¤ 
seq
¤¤ 
=
¤¤ 
_sessionAuthen
¤¤ )
.
¤¤) *
pha_seq
¤¤* 1
;
¤¤1 2
return
¦¦ 
Ok
¦¦ 
(
¦¦ 
res_page
¦¦ 
)
¦¦ 
;
¦¦  
}
§§ 	
[
©© 	
HttpPost
©©	 
]
©© 
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' (
case_new_document
ªª) :
(
ªª: ;
[
ªª; <
FromBody
ªª< D
]
ªªD E&
LoadSessionDataViewModel
ªªF ^
model
ªª_ d
)
ªªd e
{
«« 	
_sessionAuthen
¬¬ 
.
¬¬ 
pha_seq
¬¬ "
=
¬¬# $
model
¬¬% *
.
¬¬* +
pha_seq
¬¬+ 2
;
¬¬2 3
_sessionAuthen
­­ 
.
­­ 
pha_type_doc
­­ '
=
­­( )
model
­­* /
.
­­/ 0
pha_type_doc
­­0 <
;
­­< =
_sessionAuthen
®® 
.
®® 
	role_type
®® $
=
®®% &
_sessionAuthen
®®' 5
.
®®5 6
	role_type
®®6 ?
;
®®? @
LoginViewModel
°° 
res_page
°° #
=
°°$ %
new
°°& )
LoginViewModel
°°* 8
(
°°8 9
)
°°9 :
;
°°: ;
res_page
±± 
.
±± 
seq
±± 
=
±± 
_sessionAuthen
±± )
.
±±) *
pha_seq
±±* 1
;
±±1 2
return
³³ 
Ok
³³ 
(
³³ 
res_page
³³ 
)
³³ 
;
³³  
}
´´ 	
[
¶¶ 	
HttpPost
¶¶	 
]
¶¶ 
public
·· 
async
·· 
Task
·· 
<
·· 
IActionResult
·· '
>
··' (
	next_page
··) 2
(
··2 3
[
··3 4
FromBody
··4 <
]
··< =&
LoadSessionDataViewModel
··> V
model
··W \
)
··\ ]
{
¸¸ 	
_sessionAuthen
¹¹ 
.
¹¹ 
pha_seq
¹¹ "
=
¹¹# $
(
¹¹% &
model
¹¹& +
.
¹¹+ ,
pha_seq
¹¹, 3
+
¹¹4 5
$str
¹¹6 8
)
¹¹8 9
;
¹¹9 :
_sessionAuthen
ºº 
.
ºº 
pha_type_doc
ºº '
=
ºº( )
(
ºº* +
model
ºº+ 0
.
ºº0 1
pha_type_doc
ºº1 =
+
ºº> ?
$str
ºº@ B
)
ººB C
;
ººC D
_sessionAuthen
»» 
.
»» 
	role_type
»» $
=
»»% &
_sessionAuthen
»»' 5
.
»»5 6
	role_type
»»6 ?
;
»»? @
LoginViewModel
½½ 
res_page
½½ #
=
½½$ %
new
½½& )
LoginViewModel
½½* 8
(
½½8 9
)
½½9 :
;
½½: ;
if
¾¾ 
(
¾¾ 
_sessionAuthen
¾¾ 
.
¾¾ 
pha_type_doc
¾¾ +
==
¾¾, .
$str
¾¾/ 5
)
¾¾5 6
{
¿¿ 
res_page
ÀÀ 
.
ÀÀ 
page
ÀÀ 
=
ÀÀ 
model
ÀÀ  %
.
ÀÀ% &%
controller_action_befor
ÀÀ& =
;
ÀÀ= >
}
ÁÁ 
else
ÂÂ 
if
ÂÂ 
(
ÂÂ 
_sessionAuthen
ÂÂ #
.
ÂÂ# $
pha_type_doc
ÂÂ$ 0
==
ÂÂ1 3
$str
ÂÂ4 <
)
ÂÂ< =
{
ÃÃ 
_sessionAuthen
ÄÄ 
.
ÄÄ 
pha_seq
ÄÄ &
=
ÄÄ' (
$str
ÄÄ) +
;
ÄÄ+ ,
_sessionAuthen
ÅÅ 
.
ÅÅ 
pha_no
ÅÅ %
=
ÅÅ& '
$str
ÅÅ( *
;
ÅÅ* +
_sessionAuthen
ÆÆ 
.
ÆÆ 

pha_status
ÆÆ )
=
ÆÆ* +
$str
ÆÆ, 0
;
ÆÆ0 1
_sessionAuthen
ÇÇ 
.
ÇÇ %
controller_action_befor
ÇÇ 6
=
ÇÇ7 8
(
ÇÇ9 :
model
ÇÇ: ?
.
ÇÇ? @
pha_sub_software
ÇÇ@ P
+
ÇÇQ R
$str
ÇÇS U
)
ÇÇU V
;
ÇÇV W
res_page
ÉÉ 
.
ÉÉ 
page
ÉÉ 
=
ÉÉ 
model
ÉÉ  %
.
ÉÉ% &
pha_sub_software
ÉÉ& 6
+
ÉÉ7 8
$str
ÉÉ9 A
;
ÉÉA B
}
ÊÊ 
else
ËË 
{
ÌÌ 
if
ÏÏ 
(
ÏÏ 
model
ÏÏ 
.
ÏÏ 

pha_status
ÏÏ $
==
ÏÏ% '
$str
ÏÏ( ,
||
ÏÏ- /
model
ÏÏ0 5
.
ÏÏ5 6

pha_status
ÏÏ6 @
==
ÏÏA C
$str
ÏÏD H
)
ÏÏH I
{
ÐÐ 
res_page
ÑÑ 
.
ÑÑ 
page
ÑÑ !
=
ÑÑ" #
model
ÑÑ$ )
.
ÑÑ) *
pha_sub_software
ÑÑ* :
+
ÑÑ; <
$str
ÑÑ= H
;
ÑÑH I
}
ÒÒ 
else
ÓÓ 
{
ÔÔ 
res_page
ÕÕ 
.
ÕÕ 
page
ÕÕ !
=
ÕÕ" #
model
ÕÕ$ )
.
ÕÕ) *
pha_sub_software
ÕÕ* :
+
ÕÕ; <
$str
ÕÕ= E
;
ÕÕE F
}
ÖÖ 
}
×× 
return
ÙÙ 
Ok
ÙÙ 
(
ÙÙ 
res_page
ÙÙ 
)
ÙÙ 
;
ÙÙ  
}
ÚÚ 	
public
ÝÝ 
IActionResult
ÝÝ 
Privacy
ÝÝ $
(
ÝÝ$ %
)
ÝÝ% &
{
ÞÞ 	
return
ßß 
View
ßß 
(
ßß 
)
ßß 
;
ßß 
}
àà 	
[
ââ 	
ResponseCache
ââ	 
(
ââ 
Duration
ââ 
=
ââ  !
$num
ââ" #
,
ââ# $
Location
ââ% -
=
ââ. /#
ResponseCacheLocation
ââ0 E
.
ââE F
None
ââF J
,
ââJ K
NoStore
ââL S
=
ââT U
true
ââV Z
)
ââZ [
]
ââ[ \
public
ãã 
IActionResult
ãã 
Error
ãã "
(
ãã" #
)
ãã# $
{
ää 	
return
åå 
View
åå 
(
åå 
new
ææ 
ErrorViewModel
ææ "
{
çç 
	RequestId
èè 
=
èè 
Activity
èè  (
.
èè( )
Current
èè) 0
?
èè0 1
.
èè1 2
Id
èè2 4
??
èè5 7
HttpContext
èè8 C
.
èèC D
TraceIdentifier
èèD S
}
éé 
)
êê 
;
êê 
}
ëë 	
}
ìì 
}íí €÷
J/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/HRAController.cs
	namespace 	
dotnet6_epha_web
 
. 
Controllers &
{ 
public 

class 
HRAController 
:  

Controller! +
{ 
private 
static 
string 
DecryptDataWithAes 0
(0 1
string 

cipherText 
, 
string 
	keyBase64 
, 
string 
vectorBase64 
) 	
{ 	
using 
( 
Aes 
aesAlgorithm #
=$ %
Aes& )
.) *
Create* 0
(0 1
)1 2
)2 3
{ 
aesAlgorithm 
. 
Key  
=! "
Convert# *
.* +
FromBase64String+ ;
(; <
	keyBase64< E
)E F
;F G
aesAlgorithm 
. 
IV 
=  !
Convert" )
.) *
FromBase64String* :
(: ;
vectorBase64; G
)G H
;H I
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
ModeD H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
PaddingD K
}K L
"L M
)M N
;N O
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 3
{3 4
aesAlgorithm4 @
.@ A
KeySizeA H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 5
{5 6
aesAlgorithm6 B
.B C
	BlockSizeC L
}L M
"M N
)N O
;O P
ICryptoTransform!!  
	decryptor!!! *
=!!+ ,
aesAlgorithm!!- 9
.!!9 :
CreateDecryptor!!: I
(!!I J
)!!J K
;!!K L
byte## 
[## 
]## 
cipher## 
=## 
Convert##  '
.##' (
FromBase64String##( 8
(##8 9

cipherText##9 C
)##C D
;##D E
using&& 
(&& 
MemoryStream&& #
ms&&$ &
=&&' (
new&&) ,
MemoryStream&&- 9
(&&9 :
cipher&&: @
)&&@ A
)&&A B
{'' 
using(( 
((( 
CryptoStream(( '
cs((( *
=((+ ,
new((- 0
CryptoStream((1 =
(((= >
ms((> @
,((@ A
	decryptor((B K
,((K L
CryptoStreamMode((M ]
.((] ^
Read((^ b
)((b c
)((c d
{)) 
using** 
(** 
StreamReader** +
sr**, .
=**/ 0
new**1 4
StreamReader**5 A
(**A B
cs**B D
)**D E
)**E F
{++ 
return,, "
sr,,# %
.,,% &
	ReadToEnd,,& /
(,,/ 0
),,0 1
;,,1 2
}-- 
}.. 
}// 
}00 
}11 	
private33 
void33 
Check_QueryString33 &
(33& '
)33' (
{44 	
try;; 
{<< 
using>> 
(>> 
Aes>> 
aesAlgorithm>> '
=>>( )
Aes>>* -
.>>- .
Create>>. 4
(>>4 5
)>>5 6
)>>6 7
{?? 
try@@ 
{AA 
varBB 
locationBB $
=BB% &
newBB' *
UriBB+ .
(BB. /
$"BB/ 1
{BB1 2
RequestBB2 9
.BB9 :
SchemeBB: @
}BB@ A
$strBBA D
{BBD E
RequestBBE L
.BBL M
HostBBM Q
}BBQ R
{BBR S
RequestBBS Z
.BBZ [
PathBB[ _
}BB_ `
{BB` a
RequestBBa h
.BBh i
QueryStringBBi t
}BBt u
"BBu v
)BBv w
;BBw x
stringEE 
	QueryTextEE (
=EE) *
(EE+ ,
locationEE, 4
.EE4 5
QueryEE5 :
)EE: ;
.EE; <
ReplaceEE< C
(EEC D
$strEED G
,EEG H
$strEEI K
)EEK L
;EEL M
ifGG 
(GG 
	QueryTextGG %
==GG& (
$strGG) +
&&GG, .
_sessionAuthenGG/ =
.GG= >
	role_typeGG> G
!=GGH J
nullGGK O
)GGO P
{HH 
ifII 
(II  
_sessionAuthenII  .
.II. /
service_url_linkII/ ?
!=II@ B
$strIIC E
)IIE F
{JJ 
	QueryTextKK  )
=KK* +
_sessionAuthenKK, :
.KK: ;
service_url_linkKK; K
;KKK L
}LL 
}MM 
ifNN 
(NN 
	QueryTextNN %
!=NN& (
$strNN) +
)NN+ ,
{OO 
stringPP "

cipherTextPP# -
=PP. /
$strPP0 2
;PP2 3
stringQQ "
	keyBase64QQ# ,
=QQ- .
$strQQ/ 1
;QQ1 2
stringRR "
vectorBase64RR# /
=RR0 1
$strRR2 4
;RR4 5
stringSS "
[SS" #
]SS# $
xSplitSS% +
=SS, -
	QueryTextSS. 7
.SS7 8
SplitSS8 =
(SS= >
$charSS> A
)SSA B
;SSB C
ifUU 
(UU  
xSplitUU  &
.UU& '
LengthUU' -
>UU. /
$numUU0 1
)UU1 2
{VV 
ifWW  "
(WW# $
xSplitWW$ *
[WW* +
$numWW+ ,
]WW, -
.WW- .
ToStringWW. 6
(WW6 7
)WW7 8
==WW9 ;
$strWW< D
)WWD E
{XX  !
_sessionAuthenYY$ 2
.YY2 3
pha_seqYY3 :
=YY; <
$strYY= ?
;YY? @
_sessionAuthenZZ$ 2
.ZZ2 3
pha_noZZ3 9
=ZZ: ;
$strZZ< >
;ZZ> ?
_sessionAuthen[[$ 2
.[[2 3

pha_status[[3 =
=[[> ?
$str[[@ G
;[[G H
_sessionAuthen\\$ 2
.\\2 3
pha_type_doc\\3 ?
=\\@ A
$str\\B J
;\\J K
return]]$ *
;]]* +
}^^  !

cipherText``  *
=``+ ,
xSplit``- 3
[``3 4
$num``4 5
]``5 6
;``6 7
	keyBase64aa  )
=aa* +
xSplitaa, 2
[aa2 3
$numaa3 4
]aa4 5
;aa5 6
vectorBase64bb  ,
=bb- .
xSplitbb/ 5
[bb5 6
$numbb6 7
]bb7 8
;bb8 9
}cc 
stringee "
tokenee# (
=ee) *
DecryptDataWithAesee+ =
(ee= >

cipherTextee> H
,eeH I
	keyBase64eeJ S
,eeS T
vectorBase64eeU a
)eea b
;eeb c
ifff 
(ff  
tokenff  %
!=ff& (
$strff) +
)ff+ ,
{gg 
tryhh  #
{ii  !
_sessionAuthenjj$ 2
.jj2 3
service_url_linkjj3 C
=jjD E
	QueryTextjjF O
;jjO P
_sessionAuthenkk$ 2
.kk2 3
pha_seqkk3 :
=kk; <
(kk= >
tokenkk> C
.kkC D
SplitkkD I
(kkI J
$charkkJ M
)kkM N
[kkN O
$numkkO P
]kkP Q
)kkQ R
.kkR S
SplitkkS X
(kkX Y
$charkkY \
)kk\ ]
[kk] ^
$numkk^ _
]kk_ `
;kk` a
_sessionAuthenll$ 2
.ll2 3
pha_noll3 9
=ll: ;
(ll< =
tokenll= B
.llB C
SplitllC H
(llH I
$charllI L
)llL M
[llM N
$numllN O
]llO P
)llP Q
.llQ R
SplitllR W
(llW X
$charllX [
)ll[ \
[ll\ ]
$numll] ^
]ll^ _
;ll_ `
stringoo$ *
stepoo+ /
=oo0 1
(oo2 3
tokenoo3 8
.oo8 9
Splitoo9 >
(oo> ?
$charoo? B
)ooB C
[ooC D
$numooD E
]ooE F
)ooF G
.ooG H
SplitooH M
(ooM N
$charooN Q
)ooQ R
[ooR S
$numooS T
]ooT U
;ooU V
ifpp$ &
(pp' (
steppp( ,
==pp- /
$strpp0 3
)pp3 4
{pp5 6
_sessionAuthenpp7 E
.ppE F
pha_type_docppF R
=ppS T
$strppU \
;pp\ ]
}pp^ _
elseqq$ (
ifqq) +
(qq, -
stepqq- 1
==qq2 4
$strqq5 8
)qq8 9
{qq: ;
_sessionAuthenqq< J
.qqJ K
pha_type_docqqK W
=qqX Y
$strqqZ c
;qqc d
}qqe f
elserr$ (
ifrr) +
(rr, -
steprr- 1
==rr2 4
$strrr5 8
)rr8 9
{rr: ;
_sessionAuthenrr< J
.rrJ K
pha_type_docrrK W
=rrX Y
$strrrZ d
;rrd e
}rrf g
elsess$ (
ifss) +
(ss, -
stepss- 1
==ss2 4
$strss5 8
)ss8 9
{tt$ %
stringuu( .
approver_typeuu/ <
=uu= >
(uu? @
tokenuu@ E
.uuE F
SplituuF K
(uuK L
$charuuL O
)uuO P
[uuP Q
$numuuQ R
]uuR S
)uuS T
.uuT U
SplituuU Z
(uuZ [
$charuu[ ^
)uu^ _
[uu_ `
$numuu` a
]uua b
;uub c
ifvv( *
(vv+ ,
approver_typevv, 9
==vv: <
$strvv= F
)vvF G
{vvH I
_sessionAuthenvvJ X
.vvX Y
pha_type_docvvY e
=vvf g
$strvvh q
;vvq r
}vvs t
elseww( ,
ifww- /
(ww0 1
approver_typeww1 >
==ww? A
$strwwB J
)wwJ K
{wwL M
_sessionAuthenwwN \
.ww\ ]
pha_type_docww] i
=wwj k
$strwwl t
;wwt u
}wwv w
elsexx( ,
ifxx- /
(xx0 1
approver_typexx1 >
==xx? A
$strxxB U
)xxU V
{xxW X
_sessionAuthenxxY g
.xxg h
pha_type_docxxh t
=xxu v
$str	xxw Š
;
xxŠ ‹
}
xxŒ 
}yy$ %
elsezz$ (
ifzz) +
(zz, -
stepzz- 1
==zz2 4
$strzz5 8
)zz8 9
{zz: ;
_sessionAuthenzz< J
.zzJ K
pha_type_doczzK W
=zzX Y
$strzzZ k
;zzk l
}zzm n
else{{$ (
{{{) *
_sessionAuthen{{+ 9
.{{9 :
pha_type_doc{{: F
={{G H
$str{{I K
;{{K L
}{{M N
}||  !
catch}}  %
{}}& '
}}}( )
}~~ 
} 
}
€€ 
catch
 
{
 
}
 
}
‚‚ 
}
ƒƒ 
catch
„„ 
(
„„ 
System
„„ 
.
„„ 
	Exception
„„ #
)
„„# $
{
…… 
throw
†† 
;
†† 
}
‡‡ 
}
ˆˆ 	
private
ŠŠ 
readonly
ŠŠ 
ILogger
ŠŠ  
<
ŠŠ  !
HazopController
ŠŠ! 0
>
ŠŠ0 1
_logger
ŠŠ2 9
;
ŠŠ9 :
public
‹‹ 
readonly
‹‹ 
IConfiguration
‹‹ &
_IConfiguration
‹‹' 6
;
‹‹6 7
public
ŒŒ 
readonly
ŒŒ 
sessionAuthen
ŒŒ %
_sessionAuthen
ŒŒ& 4
;
ŒŒ4 5
public
ŽŽ 
HRAController
ŽŽ 
(
ŽŽ 
ILogger
ŽŽ $
<
ŽŽ$ %
HazopController
ŽŽ% 4
>
ŽŽ4 5
logger
ŽŽ6 <
,
ŽŽ< =
sessionAuthen
 
sessionAuthen
 '
,
' (
IConfiguration
 
IConfiguration
 )
)
‘‘ 	
{
’’ 	
_sessionAuthen
““ 
=
““ 
sessionAuthen
““ *
;
““* +
_logger
”” 
=
”” 
logger
”” 
;
”” 
_IConfiguration
•• 
=
•• 
IConfiguration
•• ,
;
••, -
}
–– 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
IActionResult
˜˜ '
>
˜˜' (
	next_page
˜˜) 2
(
˜˜2 3
[
˜˜3 4
FromBody
˜˜4 <
]
˜˜< =&
LoadSessionDataViewModel
˜˜> V
model
˜˜W \
)
˜˜\ ]
{
™™ 	
if
šš 
(
šš 
!
šš 

ModelState
šš 
.
šš 
IsValid
šš %
)
šš% &
{
›› 
return
œœ 
View
œœ 
(
œœ  
model
œœ  %
)
œœ% &
;
œœ& '
}
 
_sessionAuthen
ŸŸ 
.
ŸŸ 
pha_type_doc
ŸŸ '
=
ŸŸ( )
(
ŸŸ* +
model
ŸŸ+ 0
.
ŸŸ0 1
pha_type_doc
ŸŸ1 =
+
ŸŸ> ?
$str
ŸŸ@ B
)
ŸŸB C
;
ŸŸC D
_sessionAuthen
   
.
   
	role_type
   $
=
  % &
_sessionAuthen
  ' 5
.
  5 6
	role_type
  6 ?
;
  ? @
LoginViewModel
¢¢ 
res_page
¢¢ #
=
¢¢$ %
new
¢¢& )
LoginViewModel
¢¢* 8
(
¢¢8 9
)
¢¢9 :
;
¢¢: ;
if
££ 
(
££ 
_sessionAuthen
££ 
.
££ 
pha_type_doc
££ +
==
££, .
$str
££/ 5
)
££5 6
{
¤¤ 
res_page
¥¥ 
.
¥¥ 
page
¥¥ 
=
¥¥ 
model
¥¥  %
.
¥¥% &%
controller_action_befor
¥¥& =
;
¥¥= >
}
¦¦ 
else
§§ 
if
§§ 
(
§§ 
_sessionAuthen
§§ #
.
§§# $
pha_type_doc
§§$ 0
==
§§1 3
$str
§§4 <
)
§§< =
{
¨¨ 
_sessionAuthen
©© 
.
©© 
pha_seq
©© &
=
©©' (
$str
©©) +
;
©©+ ,
_sessionAuthen
ªª 
.
ªª 
pha_no
ªª %
=
ªª& '
$str
ªª( *
;
ªª* +
_sessionAuthen
«« 
.
«« 

pha_status
«« )
=
««* +
$str
««, 0
;
««0 1
_sessionAuthen
¬¬ 
.
¬¬ %
controller_action_befor
¬¬ 6
=
¬¬7 8
(
¬¬9 :
model
¬¬: ?
.
¬¬? @
pha_sub_software
¬¬@ P
+
¬¬Q R
$str
¬¬S U
)
¬¬U V
;
¬¬V W
res_page
®® 
.
®® 
page
®® 
=
®® 
model
®®  %
.
®®% &
pha_sub_software
®®& 6
+
®®7 8
$str
®®9 A
;
®®A B
}
¯¯ 
else
°° 
if
°° 
(
°° 
_sessionAuthen
°° #
.
°°# $
pha_type_doc
°°$ 0
==
°°1 3
$str
°°4 D
)
°°D E
{
±± 
_sessionAuthen
²² 
.
²² %
controller_action_befor
²² 6
=
²²7 8
(
²²9 :
model
²²: ?
.
²²? @
pha_sub_software
²²@ P
+
²²Q R
$str
²²S U
)
²²U V
;
²²V W
_sessionAuthen
³³ 
.
³³ 
pha_seq
³³ &
=
³³' (
(
³³) *
model
³³* /
.
³³/ 0
pha_seq
³³0 7
+
³³8 9
$str
³³: <
)
³³< =
;
³³= >
_sessionAuthen
´´ 
.
´´ 
pha_no
´´ %
=
´´& '
(
´´( )
model
´´) .
.
´´. /
pha_no
´´/ 5
+
´´6 7
$str
´´8 :
)
´´: ;
;
´´; <
_sessionAuthen
µµ 
.
µµ 

pha_status
µµ )
=
µµ* +
(
µµ, -
model
µµ- 2
.
µµ2 3

pha_status
µµ3 =
+
µµ> ?
$str
µµ@ B
)
µµB C
;
µµC D
_sessionAuthen
¶¶ 
.
¶¶ !
responder_user_name
¶¶ 2
=
¶¶3 4
(
¶¶5 6
model
¶¶6 ;
.
¶¶; <!
responder_user_name
¶¶< O
+
¶¶P Q
$str
¶¶R T
)
¶¶T U
;
¶¶U V
res_page
¸¸ 
.
¸¸ 
page
¸¸ 
=
¸¸ 
model
¸¸  %
.
¸¸% &
pha_sub_software
¸¸& 6
+
¸¸7 8
$str
¸¸9 J
;
¸¸J K
}
¹¹ 
else
ºº 
if
ºº 
(
ºº 
_sessionAuthen
ºº #
.
ºº# $
pha_type_doc
ºº$ 0
==
ºº1 3
$str
ºº4 :
)
ºº: ;
{
»» 
_sessionAuthen
¼¼ 
.
¼¼ %
controller_action_befor
¼¼ 6
=
¼¼7 8
(
¼¼9 :
$str
¼¼: ?
)
¼¼? @
;
¼¼@ A
_sessionAuthen
½½ 
.
½½ 
pha_seq
½½ &
=
½½' (
(
½½) *
model
½½* /
.
½½/ 0
pha_seq
½½0 7
+
½½8 9
$str
½½: <
)
½½< =
;
½½= >
res_page
¿¿ 
.
¿¿ 
page
¿¿ 
=
¿¿ 
model
¿¿  %
.
¿¿% &
pha_sub_software
¿¿& 6
+
¿¿7 8
$str
¿¿9 A
;
¿¿A B
}
ÀÀ 
else
ÁÁ 
if
ÁÁ 
(
ÁÁ 
_sessionAuthen
ÁÁ #
.
ÁÁ# $
pha_type_doc
ÁÁ$ 0
==
ÁÁ1 3
$str
ÁÁ4 =
)
ÁÁ= >
{
ÂÂ 
_sessionAuthen
ÃÃ 
.
ÃÃ %
controller_action_befor
ÃÃ 6
=
ÃÃ7 8
(
ÃÃ9 :
$str
ÃÃ: J
)
ÃÃJ K
;
ÃÃK L
_sessionAuthen
ÄÄ 
.
ÄÄ 
pha_seq
ÄÄ &
=
ÄÄ' (
(
ÄÄ) *
model
ÄÄ* /
.
ÄÄ/ 0
pha_seq
ÄÄ0 7
+
ÄÄ8 9
$str
ÄÄ: <
)
ÄÄ< =
;
ÄÄ= >
res_page
ÆÆ 
.
ÆÆ 
page
ÆÆ 
=
ÆÆ 
model
ÆÆ  %
.
ÆÆ% &
pha_sub_software
ÆÆ& 6
+
ÆÆ7 8
$str
ÆÆ9 A
;
ÆÆA B
}
ÇÇ 
return
ÉÉ 
Ok
ÉÉ 
(
ÉÉ 
res_page
ÉÉ 
)
ÉÉ 
;
ÉÉ  
}
ÊÊ 	
public
ÌÌ 
IActionResult
ÌÌ 
Index
ÌÌ "
(
ÌÌ" #
)
ÌÌ# $
{
ÍÍ 	
Check_QueryString
ÎÎ 
(
ÎÎ 
)
ÎÎ 
;
ÎÎ  
if
ÐÐ 
(
ÐÐ 
_sessionAuthen
ÐÐ 
.
ÐÐ 
	role_type
ÐÐ (
==
ÐÐ) +
$str
ÐÐ, .
||
ÐÐ/ 1
_sessionAuthen
ÐÐ2 @
.
ÐÐ@ A
	role_type
ÐÐA J
==
ÐÐK M
null
ÐÐN R
)
ÐÐR S
{
ÑÑ 
return
ÒÒ 
RedirectToAction
ÒÒ '
(
ÒÒ' (
$str
ÒÒ( /
,
ÒÒ/ 0
$str
ÒÒ1 8
)
ÒÒ8 9
;
ÒÒ9 :
}
ÓÓ 
_sessionAuthen
ÕÕ 
.
ÕÕ 
service_api_url
ÕÕ *
=
ÕÕ+ ,
_IConfiguration
ÕÕ- <
[
ÕÕ< =
$str
ÕÕ= W
]
ÕÕW X
;
ÕÕX Y
if
×× 
(
×× 
_sessionAuthen
×× 
.
×× %
controller_action_befor
×× 6
==
××7 9
$str
××: <
)
××< =
{
ØØ 
_sessionAuthen
ÙÙ 
.
ÙÙ %
controller_action_befor
ÙÙ 6
=
ÙÙ7 8
$str
ÙÙ9 I
;
ÙÙI J
}
ÚÚ 
else
ÛÛ 
if
ÛÛ 
(
ÛÛ 
_sessionAuthen
ÛÛ #
.
ÛÛ# $%
controller_action_befor
ÛÛ$ ;
==
ÛÛ< >
$str
ÛÛ? O
)
ÛÛO P
{
ÜÜ 
_sessionAuthen
ÝÝ 
.
ÝÝ %
controller_action_befor
ÝÝ 6
=
ÝÝ7 8
$str
ÝÝ9 O
;
ÝÝO P
}
ÞÞ 
else
ßß 
{
àà 
_sessionAuthen
áá 
.
áá %
controller_action_befor
áá 6
=
áá7 8
$str
áá9 G
;
ááG H
}
ââ 
string
ää 
vendor
ää 
=
ää 
_sessionAuthen
ää *
.
ää* +
vendor
ää+ 1
;
ää1 2
ViewData
çç 
[
çç 
$str
çç #
]
çç# $
=
çç% &
_sessionAuthen
çç' 5
.
çç5 6
user_display
çç6 B
;
ççB C
ViewData
èè 
[
èè 
$str
èè  
]
èè  !
=
èè" #
_sessionAuthen
èè$ 2
.
èè2 3
	user_name
èè3 <
;
èè< =
ViewData
éé 
[
éé 
$str
éé  
]
éé  !
=
éé" #
_sessionAuthen
éé$ 2
.
éé2 3
	role_type
éé3 <
;
éé< =
ViewData
ëë 
[
ëë 
$str
ëë 
]
ëë 
=
ëë  !
_sessionAuthen
ëë" 0
.
ëë0 1
pha_seq
ëë1 8
;
ëë8 9
ViewData
ìì 
[
ìì 
$str
ìì 
]
ìì 
=
ìì  
_sessionAuthen
ìì! /
.
ìì/ 0
pha_no
ìì0 6
;
ìì6 7
ViewData
íí 
[
íí 
$str
íí !
]
íí! "
=
íí# $
_sessionAuthen
íí% 3
.
íí3 4

pha_status
íí4 >
;
íí> ?
ViewData
îî 
[
îî 
$str
îî #
]
îî# $
=
îî% &
_sessionAuthen
îî' 5
.
îî5 6
pha_type_doc
îî6 B
;
îîB C
ViewData
ïï 
[
ïï 
$str
ïï .
]
ïï. /
=
ïï0 1
_sessionAuthen
ïï2 @
.
ïï@ A%
controller_action_befor
ïïA X
;
ïïX Y
ViewData
ðð 
[
ðð 
$str
ðð &
]
ðð& '
=
ðð( )
_sessionAuthen
ðð* 8
.
ðð8 9
service_api_url
ðð9 H
;
ððH I
ViewData
òò 
[
òò 
$str
òò '
]
òò' (
=
òò) *
$str
òò+ -
;
òò- .
_sessionAuthen
óó 
.
óó 
service_url_link
óó +
=
óó, -
$str
óó. 0
;
óó0 1
if
õõ 
(
õõ 
(
õõ 
ViewData
õõ 
[
õõ 
$str
õõ (
]
õõ( )
+
õõ* +
$str
õõ, .
)
õõ. /
.
õõ/ 0
ToString
õõ0 8
(
õõ8 9
)
õõ9 :
==
õõ; =
$str
õõ> F
)
õõF G
{
öö 
}
øø 
else
ùù 
if
ùù 
(
ùù 
(
ùù 
ViewData
ùù 
[
ùù 
$str
ùù -
]
ùù- .
+
ùù/ 0
$str
ùù1 3
)
ùù3 4
.
ùù4 5
ToString
ùù5 =
(
ùù= >
)
ùù> ?
==
ùù@ B
$str
ùùC K
)
ùùK L
{
úú 
}
üü 
else
ýý 
if
ýý 
(
ýý 
(
ýý 
ViewData
ýý 
[
ýý 
$str
ýý -
]
ýý- .
+
ýý/ 0
$str
ýý1 3
)
ýý3 4
.
ýý4 5
ToString
ýý5 =
(
ýý= >
)
ýý> ?
==
ýý@ B
$str
ýýC M
)
ýýM N
{
þþ 
return
ÿÿ 
View
ÿÿ 
(
ÿÿ 
$str
ÿÿ &
,
ÿÿ& '
$str
ÿÿ( -
)
ÿÿ- .
;
ÿÿ. /
}
€€ 
else
 
if
 
(
 
(
 
ViewData
 
[
 
$str
 -
]
- .
+
/ 0
$str
1 3
)
3 4
.
4 5
ToString
5 =
(
= >
)
> ?
==
@ B
$str
C S
)
S T
{
‚‚ 
ViewData
ƒƒ 
[
ƒƒ 
$str
ƒƒ .
]
ƒƒ. /
=
ƒƒ0 1
_sessionAuthen
ƒƒ2 @
.
ƒƒ@ A!
responder_user_name
ƒƒA T
;
ƒƒT U
return
…… 
View
…… 
(
…… 
$str
…… ,
,
……, -
$str
……. 3
)
……3 4
;
……4 5
}
†† 
else
‡‡ 
if
‡‡ 
(
‡‡ 
(
‡‡ 
ViewData
‡‡ 
[
‡‡ 
$str
‡‡ -
]
‡‡- .
+
‡‡/ 0
$str
‡‡1 3
)
‡‡3 4
.
‡‡4 5
ToString
‡‡5 =
(
‡‡= >
)
‡‡> ?
==
‡‡@ B
$str
‡‡C L
)
‡‡L M
{
ˆˆ 
return
‰‰ 
View
‰‰ 
(
‰‰ 
$str
‰‰ %
,
‰‰% &
$str
‰‰' ,
)
‰‰, -
;
‰‰- .
}
ŠŠ 
else
‹‹ 
if
‹‹ 
(
‹‹ 
(
‹‹ 
ViewData
‹‹ 
[
‹‹ 
$str
‹‹ -
]
‹‹- .
+
‹‹/ 0
$str
‹‹1 3
)
‹‹3 4
.
‹‹4 5
ToString
‹‹5 =
(
‹‹= >
)
‹‹> ?
==
‹‹@ B
$str
‹‹C V
)
‹‹V W
{
ŒŒ 
return
 
View
 
(
 
$str
 %
,
% &
$str
' ,
)
, -
;
- .
}
ŽŽ 
else
 
if
 
(
 
(
 
ViewData
 
[
 
$str
 -
]
- .
+
/ 0
$str
1 3
)
3 4
.
4 5
ToString
5 =
(
= >
)
> ?
==
@ B
$str
C K
)
K L
{
 
}
’’ 
else
““ 
if
““ 
(
““ 
(
““ 
ViewData
““ 
[
““ 
$str
““ -
]
““- .
+
““/ 0
$str
““1 3
)
““3 4
.
““4 5
ToString
““5 =
(
““= >
)
““> ?
==
““@ B
$str
““C L
)
““L M
{
”” 
return
•• 
View
•• 
(
•• 
$str
•• #
,
••# $
$str
••% *
)
••* +
;
••+ ,
}
–– 
return
˜˜ 
View
˜˜ 
(
˜˜ 
)
˜˜ 
;
˜˜ 
}
™™ 	
[
›› 	
HttpPost
››	 
]
›› 
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' (
set_session_doc
œœ) 8
(
œœ8 9
[
œœ9 :
FromBody
œœ: B
]
œœB C&
LoadSessionDataViewModel
œœD \
model
œœ] b
)
œœb c
{
 	
_sessionAuthen
žž 
.
žž 
service_api_url
žž *
=
žž+ ,
_IConfiguration
žž- <
[
žž< =
$str
žž= W
]
žžW X
;
žžX Y
_sessionAuthen
ŸŸ 
.
ŸŸ %
controller_action_befor
ŸŸ 2
=
ŸŸ3 4
model
ŸŸ5 :
.
ŸŸ: ;%
controller_action_befor
ŸŸ; R
;
ŸŸR S
_sessionAuthen
   
.
   
pha_seq
   "
=
  # $
model
  % *
.
  * +
pha_seq
  + 2
;
  2 3
_sessionAuthen
¡¡ 
.
¡¡ 
pha_no
¡¡ !
=
¡¡" #
model
¡¡$ )
.
¡¡) *
pha_no
¡¡* 0
;
¡¡0 1
_sessionAuthen
¢¢ 
.
¢¢ 

pha_status
¢¢ %
=
¢¢& '
model
¢¢( -
.
¢¢- .

pha_status
¢¢. 8
;
¢¢8 9
_sessionAuthen
££ 
.
££ 
pha_type_doc
££ '
=
££( )
model
££* /
.
££/ 0
pha_type_doc
££0 <
;
££< =
ViewData
¦¦ 
[
¦¦ 
$str
¦¦ #
]
¦¦# $
=
¦¦% &
_sessionAuthen
¦¦' 5
.
¦¦5 6
user_display
¦¦6 B
;
¦¦B C
ViewData
§§ 
[
§§ 
$str
§§  
]
§§  !
=
§§" #
_sessionAuthen
§§$ 2
.
§§2 3
	user_name
§§3 <
;
§§< =
ViewData
¨¨ 
[
¨¨ 
$str
¨¨  
]
¨¨  !
=
¨¨" #
_sessionAuthen
¨¨$ 2
.
¨¨2 3
	role_type
¨¨3 <
;
¨¨< =
ViewData
ªª 
[
ªª 
$str
ªª 
]
ªª 
=
ªª  !
_sessionAuthen
ªª" 0
.
ªª0 1
pha_seq
ªª1 8
;
ªª8 9
ViewData
«« 
[
«« 
$str
«« 
]
«« 
=
««  
_sessionAuthen
««! /
.
««/ 0
pha_no
««0 6
;
««6 7
ViewData
¬¬ 
[
¬¬ 
$str
¬¬ !
]
¬¬! "
=
¬¬# $
_sessionAuthen
¬¬% 3
.
¬¬3 4

pha_status
¬¬4 >
;
¬¬> ?
ViewData
­­ 
[
­­ 
$str
­­ #
]
­­# $
=
­­% &
_sessionAuthen
­­' 5
.
­­5 6
pha_type_doc
­­6 B
;
­­B C
ViewData
®® 
[
®® 
$str
®® .
]
®®. /
=
®®0 1
_sessionAuthen
®®2 @
.
®®@ A%
controller_action_befor
®®A X
;
®®X Y
ViewData
¯¯ 
[
¯¯ 
$str
¯¯ &
]
¯¯& '
=
¯¯( )
_sessionAuthen
¯¯* 8
.
¯¯8 9
service_api_url
¯¯9 H
;
¯¯H I
LoginViewModel
²² 
res_page
²² #
=
²²$ %
new
²²& )
LoginViewModel
²²* 8
(
²²8 9
)
²²9 :
;
²²: ;
res_page
³³ 
.
³³ 
msg
³³ 
=
³³ 
$str
³³ 
;
³³ 
return
´´ 
Ok
´´ 
(
´´ 
res_page
´´ 
)
´´ 
;
´´  
}
µµ 	
[
¸¸ 	
HttpPost
¸¸	 
]
¸¸ 
public
¹¹ 
IActionResult
¹¹ 
Privacy
¹¹ $
(
¹¹$ %
)
¹¹% &
{
ºº 	
return
»» 
View
»» 
(
»» 
)
»» 
;
»» 
}
¼¼ 	
[
¾¾ 	
ResponseCache
¾¾	 
(
¾¾ 
Duration
¾¾ 
=
¾¾  !
$num
¾¾" #
,
¾¾# $
Location
¾¾% -
=
¾¾. /#
ResponseCacheLocation
¾¾0 E
.
¾¾E F
None
¾¾F J
,
¾¾J K
NoStore
¾¾L S
=
¾¾T U
true
¾¾V Z
)
¾¾Z [
]
¾¾[ \
public
¿¿ 
IActionResult
¿¿ 
Error
¿¿ "
(
¿¿" #
)
¿¿# $
{
ÀÀ 	
return
ÁÁ 
View
ÁÁ 
(
ÁÁ 
new
ÂÂ 
ErrorViewModel
ÂÂ "
{
ÃÃ 
	RequestId
ÄÄ 
=
ÄÄ 
Activity
ÄÄ  (
.
ÄÄ( )
Current
ÄÄ) 0
?
ÄÄ0 1
.
ÄÄ1 2
Id
ÄÄ2 4
??
ÄÄ5 7
HttpContext
ÄÄ8 C
.
ÄÄC D
TraceIdentifier
ÄÄD S
}
ÅÅ 
)
ÆÆ 
;
ÆÆ 
}
ÇÇ 	
}
ÈÈ 
}ÉÉ øc
K/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/HomeController.cs
	namespace

 	
dotnet6_epha_web


 
.

 
Controllers

 &
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
private 
readonly 
ILogger  
<  !
HomeController! /
>/ 0
_logger1 8
;8 9
public 
readonly 
IConfiguration &
_IConfiguration' 6
;6 7
public 
readonly 
sessionAuthen %
_sessionAuthen& 4
;4 5
public 
HomeController 
( 
ILogger %
<% &
HomeController& 4
>4 5
logger6 <
,< =
sessionAuthen 
sessionAuthen '
,' (
IConfiguration 
IConfiguration )
) 	
{ 	
_sessionAuthen 
= 
sessionAuthen *
;* +
_logger 
= 
logger 
; 
_IConfiguration 
= 
IConfiguration ,
;, -
_sessionAuthen 
. 
service_api_url *
=+ ,
_IConfiguration- <
[< =
$str= W
]W X
;X Y
} 	
public   
async   
Task   
<   
IActionResult   '
>  ' (
Index  ) .
(  . /
string  / 5
keyToken  6 >
=  ? @
$str  A C
)  C D
{!! 	
if"" 
("" 
_sessionAuthen"" 
."" 
	role_type"" (
=="") +
$str"", .
||""/ 1
_sessionAuthen""2 @
.""@ A
	role_type""A J
==""K M
null""N R
)""R S
{## 
return$$ 
RedirectToAction$$ '
($$' (
$str$$( /
,$$/ 0
$str$$1 8
)$$8 9
;$$9 :
}%% 
_sessionAuthen'' 
.'' 
pha_seq'' "
=''# $
$str''% '
;''' (
_sessionAuthen(( 
.(( 
pha_no(( !
=((" #
$str(($ &
;((& '
_sessionAuthen)) 
.)) 

pha_status)) %
=))& '
$str))( *
;))* +
_sessionAuthen** 
.** 
pha_type_doc** '
=**( )
$str*** ,
;**, -
_sessionAuthen++ 
.++ #
controller_action_befor++ 2
=++3 4
$str++5 7
;++7 8
ViewData-- 
[-- 
$str-- #
]--# $
=--% &
_sessionAuthen--' 5
.--5 6
user_display--6 B
;--B C
ViewData.. 
[.. 
$str..  
]..  !
=.." #
_sessionAuthen..$ 2
...2 3
	user_name..3 <
;..< =
ViewData// 
[// 
$str//  
]//  !
=//" #
_sessionAuthen//$ 2
.//2 3
	role_type//3 <
;//< =
return11 
View11 
(11 
)11 
;11 
}22 	
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
Portal44) /
(44/ 0
)440 1
{55 	
_sessionAuthen66 
.66 
pha_seq66 "
=66# $
$str66% '
;66' (
_sessionAuthen77 
.77 
pha_no77 !
=77" #
$str77$ &
;77& '
_sessionAuthen88 
.88 

pha_status88 %
=88& '
$str88( *
;88* +
_sessionAuthen99 
.99 
pha_type_doc99 '
=99( )
$str99* ,
;99, -
_sessionAuthen:: 
.:: #
controller_action_befor:: 2
=::3 4
$str::5 7
;::7 8
if== 
(== 
_sessionAuthen== 
.== 
	role_type== (
====) +
$str==, .
||==/ 1
_sessionAuthen==2 @
.==@ A
	role_type==A J
====K M
null==N R
)==R S
{>> 
return?? 
RedirectToAction?? '
(??' (
$str??( /
,??/ 0
$str??1 8
)??8 9
;??9 :
}@@ 
ViewDataBB 
[BB 
$strBB #
]BB# $
=BB% &
_sessionAuthenBB' 5
.BB5 6
user_displayBB6 B
;BBB C
ViewDataCC 
[CC 
$strCC  
]CC  !
=CC" #
_sessionAuthenCC$ 2
.CC2 3
	user_nameCC3 <
;CC< =
ViewDataDD 
[DD 
$strDD  
]DD  !
=DD" #
_sessionAuthenDD$ 2
.DD2 3
	role_typeDD3 <
;DD< =
ViewDataEE 
[EE 
$strEE 
]EE 
=EE  
_sessionAuthenEE! /
.EE/ 0
pha_noEE0 6
;EE6 7
ViewDataFF 
[FF 
$strFF !
]FF! "
=FF# $
_sessionAuthenFF% 3
.FF3 4

pha_statusFF4 >
;FF> ?
ViewDataGG 
[GG 
$strGG .
]GG. /
=GG0 1
$strGG2 ?
;GG? @
ViewDataHH 
[HH 
$strHH &
]HH& '
=HH( )
_sessionAuthenHH* 8
.HH8 9
service_api_urlHH9 H
;HHH I
returnJJ 
ViewJJ 
(JJ 
)JJ 
;JJ 
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
	HomeTasksMM) 2
(MM2 3
)MM3 4
{NN 	
ifOO 
(OO 
_sessionAuthenOO 
.OO 
	role_typeOO (
==OO) +
$strOO, .
||OO/ 1
_sessionAuthenOO2 @
.OO@ A
	role_typeOOA J
==OOK M
nullOON R
)OOR S
{PP 
returnQQ 
RedirectToActionQQ '
(QQ' (
$strQQ( /
,QQ/ 0
$strQQ1 8
)QQ8 9
;QQ9 :
}RR 
ViewDataSS 
[SS 
$strSS #
]SS# $
=SS% &
_sessionAuthenSS' 5
.SS5 6
user_displaySS6 B
;SSB C
ViewDataTT 
[TT 
$strTT  
]TT  !
=TT" #
_sessionAuthenTT$ 2
.TT2 3
	user_nameTT3 <
;TT< =
ViewDataUU 
[UU 
$strUU  
]UU  !
=UU" #
_sessionAuthenUU$ 2
.UU2 3
	role_typeUU3 <
;UU< =
ViewDataWW 
[WW 
$strWW 
]WW 
=WW  !
nullWW" &
;WW& '
ViewDataXX 
[XX 
$strXX 
]XX 
=XX  
nullXX! %
;XX% &
ViewDataYY 
[YY 
$strYY !
]YY! "
=YY# $
nullYY% )
;YY) *
ViewDataZZ 
[ZZ 
$strZZ #
]ZZ# $
=ZZ% &
nullZZ' +
;ZZ+ ,
ViewData[[ 
[[[ 
$str[[ .
][[. /
=[[0 1
$str[[2 ?
;[[? @
ViewData\\ 
[\\ 
$str\\ &
]\\& '
=\\( )
_sessionAuthen\\* 8
.\\8 9
service_api_url\\9 H
;\\H I
return__ 
View__ 
(__ 
)__ 
;__ 
}`` 	
[aa 	
HttpPostaa	 
]aa 
publicbb 
asyncbb 
Taskbb 
<bb 
IActionResultbb '
>bb' (
	next_pagebb) 2
(bb2 3
[bb3 4
FromBodybb4 <
]bb< =$
LoadSessionDataViewModelbb> V
modelbbW \
)bb\ ]
{cc 	
_sessionAuthendd 
.dd 
pha_type_docdd '
=dd( )
(dd* +
modeldd+ 0
.dd0 1
pha_type_docdd1 =
+dd> ?
$strdd@ B
)ddB C
;ddC D
_sessionAuthenee 
.ee 
	role_typeee $
=ee% &
_sessionAuthenee' 5
.ee5 6
	role_typeee6 ?
;ee? @
LoginViewModelgg 
res_pagegg #
=gg$ %
newgg& )
LoginViewModelgg* 8
(gg8 9
)gg9 :
;gg: ;
ifhh 
(hh 
_sessionAuthenhh 
.hh 
pha_type_dochh +
==hh, .
$strhh/ 5
)hh5 6
{ii 
res_pagejj 
.jj 
pagejj 
=jj 
modeljj  %
.jj% &#
controller_action_beforjj& =
;jj= >
}kk 
elsell 
ifll 
(ll 
_sessionAuthenll #
.ll# $
pha_type_docll$ 0
==ll1 3
$strll4 >
||mm 
_sessionAuthenmm !
.mm! "
pha_type_docmm" .
==mm/ 1
$strmm2 C
)mmC D
{nn 
_sessionAuthenoo 
.oo #
controller_action_beforoo 6
=oo7 8
(oo9 :
modeloo: ?
.oo? @
pha_sub_softwareoo@ P
+ooQ R
$strooS U
)ooU V
;ooV W
_sessionAuthenpp 
.pp #
controller_action_beforpp 6
=pp7 8
(pp9 :
modelpp: ?
.pp? @#
controller_action_beforpp@ W
+ppX Y
$strppZ \
)pp\ ]
;pp] ^
_sessionAuthenqq 
.qq 
pha_seqqq &
=qq' (
(qq) *
modelqq* /
.qq/ 0
pha_seqqq0 7
+qq8 9
$strqq: <
)qq< =
;qq= >
_sessionAuthenss 
.ss 
responder_user_namess 2
=ss3 4
(ss5 6
modelss6 ;
.ss; <
responder_user_namess< O
+ssP Q
$strssR T
)ssT U
;ssU V
res_pageww 
.ww 
pageww 
=ww 
(ww  !
modelww! &
.ww& '
pha_sub_softwareww' 7
==ww8 :
$strww; A
?wwB C
modelwwD I
.wwI J
pha_sub_softwarewwJ Z
:ww[ \
$strww] d
)wwd e
+wwf g
$strwwh z
;wwz {
_sessionAuthenxx 
.xx 
pha_sub_softwarexx /
=xx0 1
(xx2 3
modelxx3 8
.xx8 9
pha_sub_softwarexx9 I
+xxJ K
$strxxL N
)xxN O
;xxO P
}yy 
elsezz 
{{{ 
_sessionAuthen|| 
.|| #
controller_action_befor|| 6
=||7 8
(||9 :
model||: ?
.||? @
pha_sub_software||@ P
+||Q R
$str||S U
)||U V
;||V W
_sessionAuthen}} 
.}} 
pha_seq}} &
=}}' (
(}}) *
model}}* /
.}}/ 0
pha_seq}}0 7
+}}8 9
$str}}: <
)}}< =
;}}= >
res_page 
. 
page 
= 
model  %
.% &
pha_sub_software& 6
+7 8
$str9 A
;A B
}
€€ 
return
‚‚ 
Ok
‚‚ 
(
‚‚ 
res_page
‚‚ 
)
‚‚ 
;
‚‚  
}
ƒƒ 	
public
ˆˆ 
IActionResult
ˆˆ 
Privacy
ˆˆ $
(
ˆˆ$ %
)
ˆˆ% &
{
‰‰ 	
return
ŠŠ 
View
ŠŠ 
(
ŠŠ 
)
ŠŠ 
;
ŠŠ 
}
‹‹ 	
[
 	
ResponseCache
	 
(
 
Duration
 
=
  !
$num
" #
,
# $
Location
% -
=
. /#
ResponseCacheLocation
0 E
.
E F
None
F J
,
J K
NoStore
L S
=
T U
true
V Z
)
Z [
]
[ \
public
ŽŽ 
IActionResult
ŽŽ 
Error
ŽŽ "
(
ŽŽ" #
)
ŽŽ# $
{
 	
return
 
View
 
(
 
new
‘‘ 
ErrorViewModel
‘‘ "
{
’’ 
	RequestId
““ 
=
““ 
Activity
““  (
.
““( )
Current
““) 0
?
““0 1
.
““1 2
Id
““2 4
??
““5 7
HttpContext
““8 C
.
““C D
TraceIdentifier
““D S
}
”” 
)
•• 
;
•• 
}
–– 	
}
—— 
}˜˜ Îì
L/Users/dave/developer/dotnet/dotnet6-epha-web/Controllers/HazopController.cs
	namespace 	
dotnet6_epha_web
 
. 
Controllers &
{ 
public 

class 
HazopController  
:! "

Controller# -
{ 
private 
static 
string 
DecryptDataWithAes 0
(0 1
string 

cipherText 
, 
string 
	keyBase64 
, 
string 
vectorBase64 
) 	
{ 	
using 
( 
Aes 
aesAlgorithm #
=$ %
Aes& )
.) *
Create* 0
(0 1
)1 2
)2 3
{ 
aesAlgorithm 
. 
Key  
=! "
Convert# *
.* +
FromBase64String+ ;
(; <
	keyBase64< E
)E F
;F G
aesAlgorithm 
. 
IV 
=  !
Convert" )
.) *
FromBase64String* :
(: ;
vectorBase64; G
)G H
;H I
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
ModeD H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 6
{6 7
aesAlgorithm7 C
.C D
PaddingD K
}K L
"L M
)M N
;N O
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 3
{3 4
aesAlgorithm4 @
.@ A
KeySizeA H
}H I
"I J
)J K
;K L
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 5
{5 6
aesAlgorithm6 B
.B C
	BlockSizeC L
}L M
"M N
)N O
;O P
ICryptoTransform!!  
	decryptor!!! *
=!!+ ,
aesAlgorithm!!- 9
.!!9 :
CreateDecryptor!!: I
(!!I J
)!!J K
;!!K L
byte## 
[## 
]## 
cipher## 
=## 
Convert##  '
.##' (
FromBase64String##( 8
(##8 9

cipherText##9 C
)##C D
;##D E
using&& 
(&& 
MemoryStream&& #
ms&&$ &
=&&' (
new&&) ,
MemoryStream&&- 9
(&&9 :
cipher&&: @
)&&@ A
)&&A B
{'' 
using(( 
((( 
CryptoStream(( '
cs((( *
=((+ ,
new((- 0
CryptoStream((1 =
(((= >
ms((> @
,((@ A
	decryptor((B K
,((K L
CryptoStreamMode((M ]
.((] ^
Read((^ b
)((b c
)((c d
{)) 
using** 
(** 
StreamReader** +
sr**, .
=**/ 0
new**1 4
StreamReader**5 A
(**A B
cs**B D
)**D E
)**E F
{++ 
return,, "
sr,,# %
.,,% &
	ReadToEnd,,& /
(,,/ 0
),,0 1
;,,1 2
}-- 
}.. 
}// 
}00 
}11 	
private33 
void33 
Check_QueryString33 &
(33& '
)33' (
{44 	
try;; 
{<< 
using>> 
(>> 
Aes>> 
aesAlgorithm>> '
=>>( )
Aes>>* -
.>>- .
Create>>. 4
(>>4 5
)>>5 6
)>>6 7
{?? 
try@@ 
{AA 
varBB 
locationBB $
=BB% &
newBB' *
UriBB+ .
(BB. /
$"BB/ 1
{BB1 2
RequestBB2 9
.BB9 :
SchemeBB: @
}BB@ A
$strBBA D
{BBD E
RequestBBE L
.BBL M
HostBBM Q
}BBQ R
{BBR S
RequestBBS Z
.BBZ [
PathBB[ _
}BB_ `
{BB` a
RequestBBa h
.BBh i
QueryStringBBi t
}BBt u
"BBu v
)BBv w
;BBw x
stringEE 
	QueryTextEE (
=EE) *
(EE+ ,
locationEE, 4
.EE4 5
QueryEE5 :
)EE: ;
.EE; <
ReplaceEE< C
(EEC D
$strEED G
,EEG H
$strEEI K
)EEK L
;EEL M
ifGG 
(GG 
	QueryTextGG %
==GG& (
$strGG) +
&&GG, .
_sessionAuthenGG/ =
.GG= >
	role_typeGG> G
!=GGH J
nullGGK O
)GGO P
{HH 
ifII 
(II  
_sessionAuthenII  .
.II. /
service_url_linkII/ ?
!=II@ B
$strIIC E
)IIE F
{JJ 
	QueryTextKK  )
=KK* +
_sessionAuthenKK, :
.KK: ;
service_url_linkKK; K
;KKK L
}LL 
}MM 
ifNN 
(NN 
	QueryTextNN %
!=NN& (
$strNN) +
)NN+ ,
{OO 
stringPP "

cipherTextPP# -
=PP. /
$strPP0 2
;PP2 3
stringQQ "
	keyBase64QQ# ,
=QQ- .
$strQQ/ 1
;QQ1 2
stringRR "
vectorBase64RR# /
=RR0 1
$strRR2 4
;RR4 5
stringSS "
[SS" #
]SS# $
xSplitSS% +
=SS, -
	QueryTextSS. 7
.SS7 8
SplitSS8 =
(SS= >
$charSS> A
)SSA B
;SSB C
ifUU 
(UU  
xSplitUU  &
.UU& '
LengthUU' -
>UU. /
$numUU0 1
)UU1 2
{VV 
ifWW  "
(WW# $
xSplitWW$ *
[WW* +
$numWW+ ,
]WW, -
.WW- .
ToStringWW. 6
(WW6 7
)WW7 8
==WW9 ;
$strWW< D
)WWD E
{XX  !
_sessionAuthenYY$ 2
.YY2 3
pha_seqYY3 :
=YY; <
$strYY= ?
;YY? @
_sessionAuthenZZ$ 2
.ZZ2 3
pha_noZZ3 9
=ZZ: ;
$strZZ< >
;ZZ> ?
_sessionAuthen[[$ 2
.[[2 3

pha_status[[3 =
=[[> ?
$str[[@ G
;[[G H
_sessionAuthen\\$ 2
.\\2 3
pha_type_doc\\3 ?
=\\@ A
$str\\B J
;\\J K
return]]$ *
;]]* +
}^^  !

cipherText``  *
=``+ ,
xSplit``- 3
[``3 4
$num``4 5
]``5 6
;``6 7
	keyBase64aa  )
=aa* +
xSplitaa, 2
[aa2 3
$numaa3 4
]aa4 5
;aa5 6
vectorBase64bb  ,
=bb- .
xSplitbb/ 5
[bb5 6
$numbb6 7
]bb7 8
;bb8 9
}cc 
stringee "
tokenee# (
=ee) *
DecryptDataWithAesee+ =
(ee= >

cipherTextee> H
,eeH I
	keyBase64eeJ S
,eeS T
vectorBase64eeU a
)eea b
;eeb c
ifff 
(ff  
tokenff  %
!=ff& (
$strff) +
)ff+ ,
{gg 
tryhh  #
{ii  !
_sessionAuthenjj$ 2
.jj2 3
service_url_linkjj3 C
=jjD E
	QueryTextjjF O
;jjO P
_sessionAuthenkk$ 2
.kk2 3
pha_seqkk3 :
=kk; <
(kk= >
tokenkk> C
.kkC D
SplitkkD I
(kkI J
$charkkJ M
)kkM N
[kkN O
$numkkO P
]kkP Q
)kkQ R
.kkR S
SplitkkS X
(kkX Y
$charkkY \
)kk\ ]
[kk] ^
$numkk^ _
]kk_ `
;kk` a
_sessionAuthenll$ 2
.ll2 3
pha_noll3 9
=ll: ;
(ll< =
tokenll= B
.llB C
SplitllC H
(llH I
$charllI L
)llL M
[llM N
$numllN O
]llO P
)llP Q
.llQ R
SplitllR W
(llW X
$charllX [
)ll[ \
[ll\ ]
$numll] ^
]ll^ _
;ll_ `
stringoo$ *
stepoo+ /
=oo0 1
(oo2 3
tokenoo3 8
.oo8 9
Splitoo9 >
(oo> ?
$charoo? B
)ooB C
[ooC D
$numooD E
]ooE F
)ooF G
.ooG H
SplitooH M
(ooM N
$charooN Q
)ooQ R
[ooR S
$numooS T
]ooT U
;ooU V
ifpp$ &
(pp' (
steppp( ,
==pp- /
$strpp0 3
)pp3 4
{pp5 6
_sessionAuthenpp7 E
.ppE F
pha_type_docppF R
=ppS T
$strppU \
;pp\ ]
}pp^ _
elseqq$ (
ifqq) +
(qq, -
stepqq- 1
==qq2 4
$strqq5 8
)qq8 9
{qq: ;
_sessionAuthenqq< J
.qqJ K
pha_type_docqqK W
=qqX Y
$strqqZ c
;qqc d
}qqe f
elserr$ (
ifrr) +
(rr, -
steprr- 1
==rr2 4
$strrr5 8
)rr8 9
{rr: ;
_sessionAuthenrr< J
.rrJ K
pha_type_docrrK W
=rrX Y
$strrrZ d
;rrd e
}rrf g
elsess$ (
ifss) +
(ss, -
stepss- 1
==ss2 4
$strss5 8
)ss8 9
{tt$ %
stringuu( .
approver_typeuu/ <
=uu= >
(uu? @
tokenuu@ E
.uuE F
SplituuF K
(uuK L
$charuuL O
)uuO P
[uuP Q
$numuuQ R
]uuR S
)uuS T
.uuT U
SplituuU Z
(uuZ [
$charuu[ ^
)uu^ _
[uu_ `
$numuu` a
]uua b
;uub c
ifvv( *
(vv+ ,
approver_typevv, 9
==vv: <
$strvv= F
)vvF G
{vvH I
_sessionAuthenvvJ X
.vvX Y
pha_type_docvvY e
=vvf g
$strvvh q
;vvq r
}vvs t
elseww( ,
ifww- /
(ww0 1
approver_typeww1 >
==ww? A
$strwwB J
)wwJ K
{wwL M
_sessionAuthenwwN \
.ww\ ]
pha_type_docww] i
=wwj k
$strwwl t
;wwt u
}wwv w
elsexx( ,
ifxx- /
(xx0 1
approver_typexx1 >
==xx? A
$strxxB U
)xxU V
{xxW X
_sessionAuthenxxY g
.xxg h
pha_type_docxxh t
=xxu v
$str	xxw Š
;
xxŠ ‹
}
xxŒ 
}yy$ %
elsezz$ (
ifzz) +
(zz, -
stepzz- 1
==zz2 4
$strzz5 8
)zz8 9
{zz: ;
_sessionAuthenzz< J
.zzJ K
pha_type_doczzK W
=zzX Y
$strzzZ k
;zzk l
}zzm n
else{{$ (
{{{) *
_sessionAuthen{{+ 9
.{{9 :
pha_type_doc{{: F
={{G H
$str{{I K
;{{K L
}{{M N
}||  !
catch}}  %
{}}& '
}}}( )
}~~ 
} 
}
€€ 
catch
 
{
 
}
 
}
‚‚ 
}
ƒƒ 
catch
„„ 
(
„„ 
System
„„ 
.
„„ 
	Exception
„„ #
)
„„# $
{
…… 
throw
†† 
;
†† 
}
‡‡ 
}
ˆˆ 	
private
ŠŠ 
readonly
ŠŠ 
ILogger
ŠŠ  
<
ŠŠ  !
HazopController
ŠŠ! 0
>
ŠŠ0 1
_logger
ŠŠ2 9
;
ŠŠ9 :
public
‹‹ 
readonly
‹‹ 
IConfiguration
‹‹ &
_IConfiguration
‹‹' 6
;
‹‹6 7
public
ŒŒ 
readonly
ŒŒ 
sessionAuthen
ŒŒ %
_sessionAuthen
ŒŒ& 4
;
ŒŒ4 5
public
ŽŽ 
HazopController
ŽŽ 
(
ŽŽ 
ILogger
ŽŽ &
<
ŽŽ& '
HazopController
ŽŽ' 6
>
ŽŽ6 7
logger
ŽŽ8 >
,
ŽŽ> ?
sessionAuthen
 
sessionAuthen
 '
,
' (
IConfiguration
 
IConfiguration
 )
)
‘‘ 	
{
’’ 	
_sessionAuthen
““ 
=
““ 
sessionAuthen
““ *
;
““* +
_logger
”” 
=
”” 
logger
”” 
;
”” 
_IConfiguration
•• 
=
•• 
IConfiguration
•• ,
;
••, -
}
–– 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
IActionResult
˜˜ '
>
˜˜' (
	next_page
˜˜) 2
(
˜˜2 3
[
˜˜3 4
FromBody
˜˜4 <
]
˜˜< =&
LoadSessionDataViewModel
˜˜> V
model
˜˜W \
)
˜˜\ ]
{
™™ 	
_sessionAuthen
šš 
.
šš 
pha_type_doc
šš '
=
šš( )
(
šš* +
model
šš+ 0
.
šš0 1
pha_type_doc
šš1 =
+
šš> ?
$str
šš@ B
)
ššB C
;
ššC D
_sessionAuthen
›› 
.
›› 
	role_type
›› $
=
››% &
_sessionAuthen
››' 5
.
››5 6
	role_type
››6 ?
;
››? @
LoginViewModel
 
res_page
 #
=
$ %
new
& )
LoginViewModel
* 8
(
8 9
)
9 :
;
: ;
if
žž 
(
žž 
_sessionAuthen
žž 
.
žž 
pha_type_doc
žž +
==
žž, .
$str
žž/ 5
)
žž5 6
{
ŸŸ 
res_page
   
.
   
page
   
=
   
model
    %
.
  % &%
controller_action_befor
  & =
;
  = >
}
¡¡ 
else
¢¢ 
if
¢¢ 
(
¢¢ 
_sessionAuthen
¢¢ #
.
¢¢# $
pha_type_doc
¢¢$ 0
==
¢¢1 3
$str
¢¢4 <
)
¢¢< =
{
££ 
_sessionAuthen
¤¤ 
.
¤¤ 
pha_seq
¤¤ &
=
¤¤' (
$str
¤¤) +
;
¤¤+ ,
_sessionAuthen
¥¥ 
.
¥¥ 
pha_no
¥¥ %
=
¥¥& '
$str
¥¥( *
;
¥¥* +
_sessionAuthen
¦¦ 
.
¦¦ 

pha_status
¦¦ )
=
¦¦* +
$str
¦¦, 0
;
¦¦0 1
_sessionAuthen
§§ 
.
§§ %
controller_action_befor
§§ 6
=
§§7 8
(
§§9 :
model
§§: ?
.
§§? @
pha_sub_software
§§@ P
+
§§Q R
$str
§§S U
)
§§U V
;
§§V W
res_page
©© 
.
©© 
page
©© 
=
©© 
model
©©  %
.
©©% &
pha_sub_software
©©& 6
+
©©7 8
$str
©©9 A
;
©©A B
}
ªª 
else
«« 
if
«« 
(
«« 
_sessionAuthen
«« #
.
««# $
pha_type_doc
««$ 0
==
««1 3
$str
««4 D
)
««D E
{
¬¬ 
_sessionAuthen
­­ 
.
­­ %
controller_action_befor
­­ 6
=
­­7 8
(
­­9 :
model
­­: ?
.
­­? @
pha_sub_software
­­@ P
+
­­Q R
$str
­­S U
)
­­U V
;
­­V W
_sessionAuthen
®® 
.
®® 
pha_sub_software
®® /
=
®®0 1
(
®®2 3
model
®®3 8
.
®®8 9
pha_sub_software
®®9 I
+
®®J K
$str
®®L N
)
®®N O
;
®®O P
_sessionAuthen
¯¯ 
.
¯¯ 
pha_seq
¯¯ &
=
¯¯' (
(
¯¯) *
model
¯¯* /
.
¯¯/ 0
pha_seq
¯¯0 7
+
¯¯8 9
$str
¯¯: <
)
¯¯< =
;
¯¯= >
_sessionAuthen
°° 
.
°° 
pha_no
°° %
=
°°& '
(
°°( )
model
°°) .
.
°°. /
pha_no
°°/ 5
+
°°6 7
$str
°°8 :
)
°°: ;
;
°°; <
_sessionAuthen
±± 
.
±± 

pha_status
±± )
=
±±* +
(
±±, -
model
±±- 2
.
±±2 3

pha_status
±±3 =
+
±±> ?
$str
±±@ B
)
±±B C
;
±±C D
_sessionAuthen
²² 
.
²² !
responder_user_name
²² 2
=
²²3 4
(
²²5 6
model
²²6 ;
.
²²; <!
responder_user_name
²²< O
+
²²P Q
$str
²²R T
)
²²T U
;
²²U V
res_page
´´ 
.
´´ 
page
´´ 
=
´´ 
model
´´  %
.
´´% &
pha_sub_software
´´& 6
+
´´7 8
$str
´´9 J
;
´´J K
}
µµ 
else
¶¶ 
if
¶¶ 
(
¶¶ 
_sessionAuthen
¶¶ #
.
¶¶# $
pha_type_doc
¶¶$ 0
==
¶¶1 3
$str
¶¶4 :
)
¶¶: ;
{
·· 
_sessionAuthen
ÁÁ 
.
ÁÁ %
controller_action_befor
ÁÁ 6
=
ÁÁ7 8
(
ÁÁ9 :
$str
ÁÁ: A
)
ÁÁA B
;
ÁÁB C
_sessionAuthen
ÂÂ 
.
ÂÂ 
pha_seq
ÂÂ &
=
ÂÂ' (
(
ÂÂ) *
model
ÂÂ* /
.
ÂÂ/ 0
pha_seq
ÂÂ0 7
+
ÂÂ8 9
$str
ÂÂ: <
)
ÂÂ< =
;
ÂÂ= >
res_page
ÄÄ 
.
ÄÄ 
page
ÄÄ 
=
ÄÄ 
model
ÄÄ  %
.
ÄÄ% &
pha_sub_software
ÄÄ& 6
+
ÄÄ7 8
$str
ÄÄ9 A
;
ÄÄA B
}
ÆÆ 
else
ÇÇ 
if
ÇÇ 
(
ÇÇ 
_sessionAuthen
ÇÇ #
.
ÇÇ# $
pha_type_doc
ÇÇ$ 0
==
ÇÇ1 3
$str
ÇÇ4 =
)
ÇÇ= >
{
ÈÈ 
_sessionAuthen
ÉÉ 
.
ÉÉ %
controller_action_befor
ÉÉ 6
=
ÉÉ7 8
(
ÉÉ9 :
$str
ÉÉ: J
)
ÉÉJ K
;
ÉÉK L
_sessionAuthen
ÊÊ 
.
ÊÊ 
pha_seq
ÊÊ &
=
ÊÊ' (
(
ÊÊ) *
model
ÊÊ* /
.
ÊÊ/ 0
pha_seq
ÊÊ0 7
+
ÊÊ8 9
$str
ÊÊ: <
)
ÊÊ< =
;
ÊÊ= >
res_page
ÌÌ 
.
ÌÌ 
page
ÌÌ 
=
ÌÌ 
model
ÌÌ  %
.
ÌÌ% &
pha_sub_software
ÌÌ& 6
+
ÌÌ7 8
$str
ÌÌ9 A
;
ÌÌA B
}
ÍÍ 
return
ÏÏ 
Ok
ÏÏ 
(
ÏÏ 
res_page
ÏÏ 
)
ÏÏ 
;
ÏÏ  
}
ÐÐ 	
public
ÒÒ 
IActionResult
ÒÒ 
Index
ÒÒ "
(
ÒÒ" #
)
ÒÒ# $
{
ÓÓ 	
Check_QueryString
ÔÔ 
(
ÔÔ 
)
ÔÔ 
;
ÔÔ  
if
ÖÖ 
(
ÖÖ 
_sessionAuthen
ÖÖ 
.
ÖÖ 
	role_type
ÖÖ (
==
ÖÖ) +
$str
ÖÖ, .
||
ÖÖ/ 1
_sessionAuthen
ÖÖ2 @
.
ÖÖ@ A
	role_type
ÖÖA J
==
ÖÖK M
null
ÖÖN R
)
ÖÖR S
{
×× 
return
ØØ 
RedirectToAction
ØØ '
(
ØØ' (
$str
ØØ( /
,
ØØ/ 0
$str
ØØ1 8
)
ØØ8 9
;
ØØ9 :
}
ÙÙ 
_sessionAuthen
ÛÛ 
.
ÛÛ 
service_api_url
ÛÛ *
=
ÛÛ+ ,
_IConfiguration
ÛÛ- <
[
ÛÛ< =
$str
ÛÛ= W
]
ÛÛW X
;
ÛÛX Y
if
ÝÝ 
(
ÝÝ 
_sessionAuthen
ÝÝ 
.
ÝÝ %
controller_action_befor
ÝÝ 6
==
ÝÝ7 9
$str
ÝÝ: <
)
ÝÝ< =
{
ÞÞ 
_sessionAuthen
ßß 
.
ßß %
controller_action_befor
ßß 6
=
ßß7 8
$str
ßß9 I
;
ßßI J
}
àà 
else
áá 
if
áá 
(
áá 
_sessionAuthen
áá #
.
áá# $%
controller_action_befor
áá$ ;
==
áá< >
$str
áá? O
)
ááO P
{
ââ 
_sessionAuthen
ãã 
.
ãã %
controller_action_befor
ãã 6
=
ãã7 8
$str
ãã9 O
;
ããO P
}
ää 
else
åå 
{
ææ 
_sessionAuthen
çç 
.
çç %
controller_action_befor
çç 6
=
çç7 8
$str
çç9 G
;
ççG H
}
èè 
string
êê 
vendor
êê 
=
êê 
_sessionAuthen
êê *
.
êê* +
vendor
êê+ 1
;
êê1 2
ViewData
íí 
[
íí 
$str
íí #
]
íí# $
=
íí% &
_sessionAuthen
íí' 5
.
íí5 6
user_display
íí6 B
;
ííB C
ViewData
îî 
[
îî 
$str
îî  
]
îî  !
=
îî" #
_sessionAuthen
îî$ 2
.
îî2 3
	user_name
îî3 <
;
îî< =
ViewData
ïï 
[
ïï 
$str
ïï  
]
ïï  !
=
ïï" #
_sessionAuthen
ïï$ 2
.
ïï2 3
	role_type
ïï3 <
;
ïï< =
ViewData
ññ 
[
ññ 
$str
ññ 
]
ññ 
=
ññ  !
_sessionAuthen
ññ" 0
.
ññ0 1
pha_seq
ññ1 8
;
ññ8 9
ViewData
òò 
[
òò 
$str
òò 
]
òò 
=
òò  
_sessionAuthen
òò! /
.
òò/ 0
pha_no
òò0 6
;
òò6 7
ViewData
óó 
[
óó 
$str
óó !
]
óó! "
=
óó# $
_sessionAuthen
óó% 3
.
óó3 4

pha_status
óó4 >
;
óó> ?
ViewData
ôô 
[
ôô 
$str
ôô #
]
ôô# $
=
ôô% &
_sessionAuthen
ôô' 5
.
ôô5 6
pha_type_doc
ôô6 B
;
ôôB C
ViewData
õõ 
[
õõ 
$str
õõ .
]
õõ. /
=
õõ0 1
_sessionAuthen
õõ2 @
.
õõ@ A%
controller_action_befor
õõA X
;
õõX Y
ViewData
öö 
[
öö 
$str
öö &
]
öö& '
=
öö( )
_sessionAuthen
öö* 8
.
öö8 9
service_api_url
öö9 H
;
ööH I
ViewData
øø 
[
øø 
$str
øø '
]
øø' (
=
øø) *
$str
øø+ -
;
øø- .
_sessionAuthen
ùù 
.
ùù 
service_url_link
ùù +
=
ùù, -
$str
ùù. 0
;
ùù0 1
if
ûû 
(
ûû 
(
ûû 
ViewData
ûû 
[
ûû 
$str
ûû (
]
ûû( )
+
ûû* +
$str
ûû, .
)
ûû. /
.
ûû/ 0
ToString
ûû0 8
(
ûû8 9
)
ûû9 :
==
ûû; =
$str
ûû> F
)
ûûF G
{
üü 
}
þþ 
else
ÿÿ 
if
ÿÿ 
(
ÿÿ 
(
ÿÿ 
ViewData
ÿÿ 
[
ÿÿ 
$str
ÿÿ -
]
ÿÿ- .
+
ÿÿ/ 0
$str
ÿÿ1 3
)
ÿÿ3 4
.
ÿÿ4 5
ToString
ÿÿ5 =
(
ÿÿ= >
)
ÿÿ> ?
==
ÿÿ@ B
$str
ÿÿC K
)
ÿÿK L
{
€€ 
}
‚‚ 
else
ƒƒ 
if
ƒƒ 
(
ƒƒ 
(
ƒƒ 
ViewData
ƒƒ 
[
ƒƒ 
$str
ƒƒ -
]
ƒƒ- .
+
ƒƒ/ 0
$str
ƒƒ1 3
)
ƒƒ3 4
.
ƒƒ4 5
ToString
ƒƒ5 =
(
ƒƒ= >
)
ƒƒ> ?
==
ƒƒ@ B
$str
ƒƒC M
)
ƒƒM N
{
„„ 
return
…… 
View
…… 
(
…… 
$str
…… &
,
……& '
$str
……( /
)
……/ 0
;
……0 1
}
†† 
else
‡‡ 
if
‡‡ 
(
‡‡ 
(
‡‡ 
ViewData
‡‡ 
[
‡‡ 
$str
‡‡ -
]
‡‡- .
+
‡‡/ 0
$str
‡‡1 3
)
‡‡3 4
.
‡‡4 5
ToString
‡‡5 =
(
‡‡= >
)
‡‡> ?
==
‡‡@ B
$str
‡‡C S
)
‡‡S T
{
ˆˆ 
ViewData
‰‰ 
[
‰‰ 
$str
‰‰ .
]
‰‰. /
=
‰‰0 1
_sessionAuthen
‰‰2 @
.
‰‰@ A!
responder_user_name
‰‰A T
;
‰‰T U
return
‹‹ 
View
‹‹ 
(
‹‹ 
$str
‹‹ ,
,
‹‹, -
$str
‹‹. 5
)
‹‹5 6
;
‹‹6 7
}
ŒŒ 
else
 
if
 
(
 
(
 
ViewData
 
[
 
$str
 -
]
- .
+
/ 0
$str
1 3
)
3 4
.
4 5
ToString
5 =
(
= >
)
> ?
==
@ B
$str
C L
)
L M
{
ŽŽ 
return
 
View
 
(
 
$str
 %
,
% &
$str
' .
)
. /
;
/ 0
}
‘‘ 
else
’’ 
if
’’ 
(
’’ 
(
’’ 
ViewData
’’ 
[
’’ 
$str
’’ -
]
’’- .
+
’’/ 0
$str
’’1 3
)
’’3 4
.
’’4 5
ToString
’’5 =
(
’’= >
)
’’> ?
==
’’@ B
$str
’’C V
)
’’V W
{
““ 
return
•• 
View
•• 
(
•• 
$str
•• %
,
••% &
$str
••' .
)
••. /
;
••/ 0
}
–– 
else
—— 
if
—— 
(
—— 
(
—— 
ViewData
—— 
[
—— 
$str
—— -
]
——- .
+
——/ 0
$str
——1 3
)
——3 4
.
——4 5
ToString
——5 =
(
——= >
)
——> ?
==
——@ B
$str
——C K
)
——K L
{
˜˜ 
}
šš 
else
›› 
if
›› 
(
›› 
(
›› 
ViewData
›› 
[
›› 
$str
›› -
]
››- .
+
››/ 0
$str
››1 3
)
››3 4
.
››4 5
ToString
››5 =
(
››= >
)
››> ?
==
››@ B
$str
››C L
)
››L M
{
œœ 
return
 
View
 
(
 
$str
 #
,
# $
$str
% ,
)
, -
;
- .
}
žž 
return
   
View
   
(
   
)
   
;
   
}
¡¡ 	
public
££ 
IActionResult
££ 
Followup
££ %
(
££% &
)
££& '
{
¤¤ 	
if
¥¥ 
(
¥¥ 
_sessionAuthen
¥¥ 
.
¥¥ 
	role_type
¥¥ (
==
¥¥) +
$str
¥¥, .
||
¥¥/ 1
_sessionAuthen
¥¥2 @
.
¥¥@ A
	role_type
¥¥A J
==
¥¥K M
null
¥¥N R
)
¥¥R S
{
¦¦ 
return
§§ 
RedirectToAction
§§ '
(
§§' (
$str
§§( /
,
§§/ 0
$str
§§1 8
)
§§8 9
;
§§9 :
}
¨¨ 
_sessionAuthen
ªª 
.
ªª 
service_api_url
ªª *
=
ªª+ ,
_IConfiguration
ªª- <
[
ªª< =
$str
ªª= W
]
ªªW X
;
ªªX Y
if
«« 
(
«« 
(
«« 
_sessionAuthen
«« 
.
««  %
controller_action_befor
««  7
+
««8 9
$str
««: <
)
««< =
.
««= >
ToString
««> F
(
««F G
)
««G H
==
««I K
null
««L P
)
««P Q
{
¬¬ 
_sessionAuthen
­­ 
.
­­ %
controller_action_befor
­­ 6
=
­­7 8
$str
­­9 F
;
­­F G
}
®® 
ViewData
°° 
[
°° 
$str
°° #
]
°°# $
=
°°% &
_sessionAuthen
°°' 5
.
°°5 6
user_display
°°6 B
;
°°B C
ViewData
±± 
[
±± 
$str
±±  
]
±±  !
=
±±" #
_sessionAuthen
±±$ 2
.
±±2 3
	user_name
±±3 <
;
±±< =
ViewData
²² 
[
²² 
$str
²²  
]
²²  !
=
²²" #
_sessionAuthen
²²$ 2
.
²²2 3
	role_type
²²3 <
;
²²< =
ViewData
³³ 
[
³³ 
$str
³³ .
]
³³. /
=
³³0 1
_sessionAuthen
³³2 @
.
³³@ A%
controller_action_befor
³³A X
;
³³X Y
ViewData
´´ 
[
´´ 
$str
´´ &
]
´´& '
=
´´( )
_sessionAuthen
´´* 8
.
´´8 9
service_api_url
´´9 H
;
´´H I
ViewData
·· 
[
·· 
$str
·· 
]
·· 
=
··  !
_sessionAuthen
··" 0
.
··0 1
pha_seq
··1 8
;
··8 9
return
¹¹ 
View
¹¹ 
(
¹¹ 
)
¹¹ 
;
¹¹ 
}
ºº 	
public
»» 
IActionResult
»» 
FollowupUpdate
»» +
(
»»+ ,
)
»», -
{
¼¼ 	
if
¾¾ 
(
¾¾ 
_sessionAuthen
¾¾ 
.
¾¾ 
	role_type
¾¾ (
==
¾¾) +
$str
¾¾, .
||
¾¾/ 1
_sessionAuthen
¾¾2 @
.
¾¾@ A
	role_type
¾¾A J
==
¾¾K M
null
¾¾N R
)
¾¾R S
{
¿¿ 
return
ÀÀ 
RedirectToAction
ÀÀ '
(
ÀÀ' (
$str
ÀÀ( /
,
ÀÀ/ 0
$str
ÀÀ1 8
)
ÀÀ8 9
;
ÀÀ9 :
}
ÁÁ 
_sessionAuthen
ÃÃ 
.
ÃÃ 
service_api_url
ÃÃ *
=
ÃÃ+ ,
_IConfiguration
ÃÃ- <
[
ÃÃ< =
$str
ÃÃ= W
]
ÃÃW X
;
ÃÃX Y
if
ÄÄ 
(
ÄÄ 
(
ÄÄ 
_sessionAuthen
ÄÄ 
.
ÄÄ  %
controller_action_befor
ÄÄ  7
+
ÄÄ8 9
$str
ÄÄ: <
)
ÄÄ< =
.
ÄÄ= >
ToString
ÄÄ> F
(
ÄÄF G
)
ÄÄG H
==
ÄÄI K
null
ÄÄL P
)
ÄÄP Q
{
ÅÅ 
_sessionAuthen
ÆÆ 
.
ÆÆ %
controller_action_befor
ÆÆ 6
=
ÆÆ7 8
$str
ÆÆ9 F
;
ÆÆF G
}
ÇÇ 
ViewData
ÉÉ 
[
ÉÉ 
$str
ÉÉ #
]
ÉÉ# $
=
ÉÉ% &
_sessionAuthen
ÉÉ' 5
.
ÉÉ5 6
user_display
ÉÉ6 B
;
ÉÉB C
ViewData
ÊÊ 
[
ÊÊ 
$str
ÊÊ  
]
ÊÊ  !
=
ÊÊ" #
_sessionAuthen
ÊÊ$ 2
.
ÊÊ2 3
	user_name
ÊÊ3 <
;
ÊÊ< =
ViewData
ËË 
[
ËË 
$str
ËË  
]
ËË  !
=
ËË" #
_sessionAuthen
ËË$ 2
.
ËË2 3
	role_type
ËË3 <
;
ËË< =
ViewData
ÌÌ 
[
ÌÌ 
$str
ÌÌ .
]
ÌÌ. /
=
ÌÌ0 1
_sessionAuthen
ÌÌ2 @
.
ÌÌ@ A%
controller_action_befor
ÌÌA X
;
ÌÌX Y
ViewData
ÍÍ 
[
ÍÍ 
$str
ÍÍ &
]
ÍÍ& '
=
ÍÍ( )
_sessionAuthen
ÍÍ* 8
.
ÍÍ8 9
service_api_url
ÍÍ9 H
;
ÍÍH I
ViewData
ÐÐ 
[
ÐÐ 
$str
ÐÐ '
]
ÐÐ' (
=
ÐÐ) *
_sessionAuthen
ÐÐ+ 9
.
ÐÐ9 :
pha_sub_software
ÐÐ: J
;
ÐÐJ K
ViewData
ÑÑ 
[
ÑÑ 
$str
ÑÑ 
]
ÑÑ 
=
ÑÑ  !
_sessionAuthen
ÑÑ" 0
.
ÑÑ0 1
pha_seq
ÑÑ1 8
;
ÑÑ8 9
ViewData
ÒÒ 
[
ÒÒ 
$str
ÒÒ 
]
ÒÒ 
=
ÒÒ  
_sessionAuthen
ÒÒ! /
.
ÒÒ/ 0
pha_no
ÒÒ0 6
;
ÒÒ6 7
ViewData
ÓÓ 
[
ÓÓ 
$str
ÓÓ !
]
ÓÓ! "
=
ÓÓ# $
_sessionAuthen
ÓÓ% 3
.
ÓÓ3 4

pha_status
ÓÓ4 >
;
ÓÓ> ?
ViewData
ÔÔ 
[
ÔÔ 
$str
ÔÔ *
]
ÔÔ* +
=
ÔÔ, -
_sessionAuthen
ÔÔ. <
.
ÔÔ< =!
responder_user_name
ÔÔ= P
;
ÔÔP Q
return
ÖÖ 
View
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
}
×× 	
public
ÙÙ 
IActionResult
ÙÙ 
Search
ÙÙ #
(
ÙÙ# $
)
ÙÙ$ %
{
ÚÚ 	
if
ÛÛ 
(
ÛÛ 
_sessionAuthen
ÛÛ 
.
ÛÛ 
	role_type
ÛÛ (
==
ÛÛ) +
$str
ÛÛ, .
||
ÛÛ/ 1
_sessionAuthen
ÛÛ2 @
.
ÛÛ@ A
	role_type
ÛÛA J
==
ÛÛK M
null
ÛÛN R
)
ÛÛR S
{
ÜÜ 
return
ÝÝ 
RedirectToAction
ÝÝ '
(
ÝÝ' (
$str
ÝÝ( /
,
ÝÝ/ 0
$str
ÝÝ1 8
)
ÝÝ8 9
;
ÝÝ9 :
}
ÞÞ 
_sessionAuthen
àà 
.
àà 
service_api_url
àà *
=
àà+ ,
_IConfiguration
àà- <
[
àà< =
$str
àà= W
]
ààW X
;
ààX Y
_sessionAuthen
áá 
.
áá %
controller_action_befor
áá 2
=
áá3 4
$str
áá5 B
;
ááB C
ViewData
åå 
[
åå 
$str
åå #
]
åå# $
=
åå% &
_sessionAuthen
åå' 5
.
åå5 6
user_display
åå6 B
;
ååB C
ViewData
ææ 
[
ææ 
$str
ææ  
]
ææ  !
=
ææ" #
_sessionAuthen
ææ$ 2
.
ææ2 3
	user_name
ææ3 <
;
ææ< =
ViewData
çç 
[
çç 
$str
çç  
]
çç  !
=
çç" #
_sessionAuthen
çç$ 2
.
çç2 3
	role_type
çç3 <
;
çç< =
ViewData
èè 
[
èè 
$str
èè .
]
èè. /
=
èè0 1
_sessionAuthen
èè2 @
.
èè@ A%
controller_action_befor
èèA X
;
èèX Y
ViewData
éé 
[
éé 
$str
éé &
]
éé& '
=
éé( )
_sessionAuthen
éé* 8
.
éé8 9
service_api_url
éé9 H
;
ééH I
return
ëë 
View
ëë 
(
ëë 
)
ëë 
;
ëë 
}
ìì 	
public
îî 
IActionResult
îî 
Approve
îî $
(
îî$ %
)
îî% &
{
ïï 	
if
ðð 
(
ðð 
_sessionAuthen
ðð 
.
ðð 
	role_type
ðð (
==
ðð) +
$str
ðð, .
||
ðð/ 1
_sessionAuthen
ðð2 @
.
ðð@ A
	role_type
ððA J
==
ððK M
null
ððN R
)
ððR S
{
ññ 
return
òò 
RedirectToAction
òò '
(
òò' (
$str
òò( /
,
òò/ 0
$str
òò1 8
)
òò8 9
;
òò9 :
}
óó 
_sessionAuthen
õõ 
.
õõ 
service_api_url
õõ *
=
õõ+ ,
_IConfiguration
õõ- <
[
õõ< =
$str
õõ= W
]
õõW X
;
õõX Y
_sessionAuthen
öö 
.
öö %
controller_action_befor
öö 2
=
öö3 4
$str
öö5 B
;
ööB C
ViewData
øø 
[
øø 
$str
øø #
]
øø# $
=
øø% &
_sessionAuthen
øø' 5
.
øø5 6
user_display
øø6 B
;
øøB C
ViewData
ùù 
[
ùù 
$str
ùù  
]
ùù  !
=
ùù" #
_sessionAuthen
ùù$ 2
.
ùù2 3
	user_name
ùù3 <
;
ùù< =
ViewData
úú 
[
úú 
$str
úú  
]
úú  !
=
úú" #
_sessionAuthen
úú$ 2
.
úú2 3
	role_type
úú3 <
;
úú< =
ViewData
ûû 
[
ûû 
$str
ûû .
]
ûû. /
=
ûû0 1
_sessionAuthen
ûû2 @
.
ûû@ A%
controller_action_befor
ûûA X
;
ûûX Y
ViewData
üü 
[
üü 
$str
üü &
]
üü& '
=
üü( )
_sessionAuthen
üü* 8
.
üü8 9
service_api_url
üü9 H
;
üüH I
ViewData
þþ 
[
þþ 
$str
þþ 
]
þþ 
=
þþ  !
_sessionAuthen
þþ" 0
.
þþ0 1
pha_seq
þþ1 8
;
þþ8 9
ViewData
ÿÿ 
[
ÿÿ 
$str
ÿÿ #
]
ÿÿ# $
=
ÿÿ% &
_sessionAuthen
ÿÿ' 5
.
ÿÿ5 6
pha_type_doc
ÿÿ6 B
;
ÿÿB C
return
 
View
 
(
 
)
 
;
 
}
‚‚ 	
public
…… 
IActionResult
…… 
Notification
…… )
(
……) *
)
……* +
{
†† 	
if
‡‡ 
(
‡‡ 
_sessionAuthen
‡‡ 
.
‡‡ 
	role_type
‡‡ (
==
‡‡) +
$str
‡‡, .
||
‡‡/ 1
_sessionAuthen
‡‡2 @
.
‡‡@ A
	role_type
‡‡A J
==
‡‡K M
null
‡‡N R
)
‡‡R S
{
ˆˆ 
return
‰‰ 
RedirectToAction
‰‰ '
(
‰‰' (
$str
‰‰( /
,
‰‰/ 0
$str
‰‰1 8
)
‰‰8 9
;
‰‰9 :
}
ŠŠ 
_sessionAuthen
ŒŒ 
.
ŒŒ 
service_api_url
ŒŒ *
=
ŒŒ+ ,
_IConfiguration
ŒŒ- <
[
ŒŒ< =
$str
ŒŒ= W
]
ŒŒW X
;
ŒŒX Y
_sessionAuthen
 
.
 %
controller_action_befor
 2
=
3 4
$str
5 B
;
B C
ViewData
 
[
 
$str
 #
]
# $
=
% &
_sessionAuthen
' 5
.
5 6
user_display
6 B
;
B C
ViewData
 
[
 
$str
  
]
  !
=
" #
_sessionAuthen
$ 2
.
2 3
	user_name
3 <
;
< =
ViewData
‘‘ 
[
‘‘ 
$str
‘‘  
]
‘‘  !
=
‘‘" #
_sessionAuthen
‘‘$ 2
.
‘‘2 3
	role_type
‘‘3 <
;
‘‘< =
ViewData
’’ 
[
’’ 
$str
’’ .
]
’’. /
=
’’0 1
_sessionAuthen
’’2 @
.
’’@ A%
controller_action_befor
’’A X
;
’’X Y
ViewData
““ 
[
““ 
$str
““ &
]
““& '
=
““( )
_sessionAuthen
““* 8
.
““8 9
service_api_url
““9 H
;
““H I
ViewData
•• 
[
•• 
$str
•• 
]
•• 
=
••  !
$str
••" $
;
••$ %
ViewData
–– 
[
–– 
$str
–– #
]
––# $
=
––% &
$str
––' )
;
––) *
return
˜˜ 
View
˜˜ 
(
˜˜ 
)
˜˜ 
;
˜˜ 
}
™™ 	
[
›› 	
HttpPost
››	 
]
›› 
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' (
set_session_doc
œœ) 8
(
œœ8 9
[
œœ9 :
FromBody
œœ: B
]
œœB C&
LoadSessionDataViewModel
œœD \
model
œœ] b
)
œœb c
{
 	
_sessionAuthen
žž 
.
žž 
service_api_url
žž *
=
žž+ ,
_IConfiguration
žž- <
[
žž< =
$str
žž= W
]
žžW X
;
žžX Y
_sessionAuthen
ŸŸ 
.
ŸŸ %
controller_action_befor
ŸŸ 2
=
ŸŸ3 4
model
ŸŸ5 :
.
ŸŸ: ;%
controller_action_befor
ŸŸ; R
;
ŸŸR S
_sessionAuthen
   
.
   
pha_seq
   "
=
  # $
model
  % *
.
  * +
pha_seq
  + 2
;
  2 3
_sessionAuthen
¡¡ 
.
¡¡ 
pha_no
¡¡ !
=
¡¡" #
model
¡¡$ )
.
¡¡) *
pha_no
¡¡* 0
;
¡¡0 1
_sessionAuthen
¢¢ 
.
¢¢ 

pha_status
¢¢ %
=
¢¢& '
model
¢¢( -
.
¢¢- .

pha_status
¢¢. 8
;
¢¢8 9
_sessionAuthen
££ 
.
££ 
pha_type_doc
££ '
=
££( )
model
££* /
.
££/ 0
pha_type_doc
££0 <
;
££< =
ViewData
¥¥ 
[
¥¥ 
$str
¥¥ #
]
¥¥# $
=
¥¥% &
_sessionAuthen
¥¥' 5
.
¥¥5 6
user_display
¥¥6 B
;
¥¥B C
ViewData
¦¦ 
[
¦¦ 
$str
¦¦  
]
¦¦  !
=
¦¦" #
_sessionAuthen
¦¦$ 2
.
¦¦2 3
	user_name
¦¦3 <
;
¦¦< =
ViewData
§§ 
[
§§ 
$str
§§  
]
§§  !
=
§§" #
_sessionAuthen
§§$ 2
.
§§2 3
	role_type
§§3 <
;
§§< =
ViewData
©© 
[
©© 
$str
©© 
]
©© 
=
©©  !
_sessionAuthen
©©" 0
.
©©0 1
pha_seq
©©1 8
;
©©8 9
ViewData
ªª 
[
ªª 
$str
ªª 
]
ªª 
=
ªª  
_sessionAuthen
ªª! /
.
ªª/ 0
pha_no
ªª0 6
;
ªª6 7
ViewData
«« 
[
«« 
$str
«« !
]
««! "
=
««# $
_sessionAuthen
««% 3
.
««3 4

pha_status
««4 >
;
««> ?
ViewData
¬¬ 
[
¬¬ 
$str
¬¬ #
]
¬¬# $
=
¬¬% &
_sessionAuthen
¬¬' 5
.
¬¬5 6
pha_type_doc
¬¬6 B
;
¬¬B C
ViewData
­­ 
[
­­ 
$str
­­ .
]
­­. /
=
­­0 1
_sessionAuthen
­­2 @
.
­­@ A%
controller_action_befor
­­A X
;
­­X Y
ViewData
®® 
[
®® 
$str
®® &
]
®®& '
=
®®( )
_sessionAuthen
®®* 8
.
®®8 9
service_api_url
®®9 H
;
®®H I
LoginViewModel
±± 
res_page
±± #
=
±±$ %
new
±±& )
LoginViewModel
±±* 8
(
±±8 9
)
±±9 :
;
±±: ;
res_page
²² 
.
²² 
msg
²² 
=
²² 
$str
²² 
;
²² 
return
³³ 
Ok
³³ 
(
³³ 
res_page
³³ 
)
³³ 
;
³³  
}
´´ 	
[
¸¸ 	
HttpPost
¸¸	 
]
¸¸ 
public
¹¹ 
async
¹¹ 
Task
¹¹ 
<
¹¹ 
IActionResult
¹¹ '
>
¹¹' ( 
follow_back_search
¹¹) ;
(
¹¹; <&
LoadSessionDataViewModel
¹¹< T
model
¹¹U Z
)
¹¹Z [
{
ºº 	
_sessionAuthen
»» 
.
»» 
pha_seq
»» "
=
»»# $
$str
»»% '
;
»»' (
_sessionAuthen
¼¼ 
.
¼¼ 
pha_type_doc
¼¼ '
=
¼¼( )
$str
¼¼* 2
;
¼¼2 3
_sessionAuthen
½½ 
.
½½ 
	role_type
½½ $
=
½½% &
_sessionAuthen
½½' 5
.
½½5 6
	role_type
½½6 ?
;
½½? @
LoginViewModel
¿¿ 
res_page
¿¿ #
=
¿¿$ %
new
¿¿& )
LoginViewModel
¿¿* 8
(
¿¿8 9
)
¿¿9 :
;
¿¿: ;
res_page
ÀÀ 
.
ÀÀ 
seq
ÀÀ 
=
ÀÀ 
_sessionAuthen
ÀÀ )
.
ÀÀ) *
pha_seq
ÀÀ* 1
;
ÀÀ1 2
return
ÂÂ 
Ok
ÂÂ 
(
ÂÂ 
res_page
ÂÂ 
)
ÂÂ 
;
ÂÂ  
}
ÃÃ 	
[
ÅÅ 	
HttpPost
ÅÅ	 
]
ÅÅ 
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
<
ÆÆ 
IActionResult
ÆÆ '
>
ÆÆ' (
case_new_document
ÆÆ) :
(
ÆÆ: ;
[
ÆÆ; <
FromBody
ÆÆ< D
]
ÆÆD E&
LoadSessionDataViewModel
ÆÆF ^
model
ÆÆ_ d
)
ÆÆd e
{
ÇÇ 	
_sessionAuthen
ÈÈ 
.
ÈÈ 
pha_seq
ÈÈ "
=
ÈÈ# $
model
ÈÈ% *
.
ÈÈ* +
pha_seq
ÈÈ+ 2
;
ÈÈ2 3
_sessionAuthen
ÉÉ 
.
ÉÉ 
pha_type_doc
ÉÉ '
=
ÉÉ( )
model
ÉÉ* /
.
ÉÉ/ 0
pha_type_doc
ÉÉ0 <
;
ÉÉ< =
_sessionAuthen
ÊÊ 
.
ÊÊ 
	role_type
ÊÊ $
=
ÊÊ% &
_sessionAuthen
ÊÊ' 5
.
ÊÊ5 6
	role_type
ÊÊ6 ?
;
ÊÊ? @
LoginViewModel
ÌÌ 
res_page
ÌÌ #
=
ÌÌ$ %
new
ÌÌ& )
LoginViewModel
ÌÌ* 8
(
ÌÌ8 9
)
ÌÌ9 :
;
ÌÌ: ;
res_page
ÍÍ 
.
ÍÍ 
seq
ÍÍ 
=
ÍÍ 
_sessionAuthen
ÍÍ )
.
ÍÍ) *
pha_seq
ÍÍ* 1
;
ÍÍ1 2
return
ÏÏ 
Ok
ÏÏ 
(
ÏÏ 
res_page
ÏÏ 
)
ÏÏ 
;
ÏÏ  
}
ÐÐ 	
[
ÒÒ 	
HttpPost
ÒÒ	 
]
ÒÒ 
public
ÖÖ 
IActionResult
ÖÖ 
Privacy
ÖÖ $
(
ÖÖ$ %
)
ÖÖ% &
{
×× 	
return
ØØ 
View
ØØ 
(
ØØ 
)
ØØ 
;
ØØ 
}
ÙÙ 	
[
ÛÛ 	
ResponseCache
ÛÛ	 
(
ÛÛ 
Duration
ÛÛ 
=
ÛÛ  !
$num
ÛÛ" #
,
ÛÛ# $
Location
ÛÛ% -
=
ÛÛ. /#
ResponseCacheLocation
ÛÛ0 E
.
ÛÛE F
None
ÛÛF J
,
ÛÛJ K
NoStore
ÛÛL S
=
ÛÛT U
true
ÛÛV Z
)
ÛÛZ [
]
ÛÛ[ \
public
ÜÜ 
IActionResult
ÜÜ 
Error
ÜÜ "
(
ÜÜ" #
)
ÜÜ# $
{
ÝÝ 	
return
ÞÞ 
View
ÞÞ 
(
ÞÞ 
new
ßß 
ErrorViewModel
ßß "
{
àà 
	RequestId
áá 
=
áá 
Activity
áá  (
.
áá( )
Current
áá) 0
?
áá0 1
.
áá1 2
Id
áá2 4
??
áá5 7
HttpContext
áá8 C
.
ááC D
TraceIdentifier
ááD S
}
ââ 
)
ãã 
;
ãã 
}
ää 	
}
åå 
}ææ 